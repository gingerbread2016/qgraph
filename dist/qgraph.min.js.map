{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","qgraph.js","webpack:/webpack/bootstrap 18828a1bb0963aabd4a6","webpack:///src/index.js","webpack:///~/bean/bean.js","webpack:///src/util/Utils.js","webpack:///src/geometry/Point.js","webpack:///src/geometry/Rectangle.js","webpack:/external {\"root\":\"_\",\"commonjs\":\"lodash\",\"commonjs2\":\"lodash\",\"amd\":\"lodash\"}","webpack:///src/geometry/Shape.js","webpack:///src/util/DomUtils.js","webpack:///src/util/StringBuffer.js","webpack:///src/geometry/Line.js","webpack:///src/geometry/Ellipse.js","webpack:///src/event/EventDispatcher.js","webpack:///src/event/KeyUtils.js","webpack:///src/graph/Graph.js","webpack:///src/graph/Node.js","webpack:///src/graph/Element.js","webpack:///src/util/Cache.js","webpack:///src/view/Label.js","webpack:///src/graph/Edge.js","webpack:///src/layout/Layout.js","webpack:///src/layout/FlowLayout.js","webpack:///src/view/GraphView.js","webpack:///src/view/SVGView.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_5__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_bean","_bean2","_Utils","_Utils2","_DomUtils","_DomUtils2","_StringBuffer","_StringBuffer2","_Point","_Point2","_Line","_Line2","_Shape","_Shape2","_Rectangle","_Rectangle2","_Ellipse","_Ellipse2","_EventDispatcher","_EventDispatcher2","_Graph","_Graph2","_Element","_Element2","_Node","_Node2","_Edge","_Edge2","_Layout","_Layout2","_FlowLayout","_FlowLayout2","_Label","_Label2","_GraphView","_GraphView2","_SVGView","_SVGView2","addShape","Events","Cache","Utils","DomUtils","StringBuffer","Point","Line","Shape","Rectangle","Ellipse","EventDispatcher","Label","Graph","Element","Node","Edge","Layout","FlowLayout","GraphView","SVGView","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_RESULT__","name","context","definition","undefined","selectorEngine","win","window","old","namespaceRegex","nameRegex","addEvent","removeEvent","doc","document","documentElement","W3C_MODEL","eventSupport","ONE","slice","Array","prototype","str2arr","s","d","split","isString","o","isFunction","standardNativeEvents","w3cNativeEvents","nativeEvents","hash","events","i","length","customEvents","isAncestor","element","container","compareDocumentPosition","nodeType","contains","parentNode","check","event","related","relatedTarget","prefix","test","toString","mouseenter","base","condition","mouseleave","mousewheel","navigator","userAgent","Event","commonProps","mouseProps","concat","mouseWheelProps","keyProps","textProps","touchProps","messageProps","stateProps","overOutRegex","typeFixers","reg","fix","newEvent","keyCode","which","type","rightClick","button","pos","x","y","pageX","pageY","clientX","clientY","body","scrollLeft","scrollTop","typeFixerMap","isNative","arguments","ownerDocument","parentWindow","originalEvent","isBean","l","props","fixer","target","srcElement","preventDefault","returnValue","stopPropagation","cancelBubble","stop","stopped","stopImmediatePropagation","isImmediatePropagationStopped","clone","currentTarget","ne","targetElement","RegEntry","wrappedHandler","fn","args","eargs","apply","findTarget","eventElement","__beanDel","ft","handler","original","namespaces","customType","once","removeListener","eventType","inNamespaces","checkNamespaces","j","matches","checkElement","checkOriginal","checkHandler","registry","map","forAll","pfx","list","all","t","charAt","substr","has","get","entries","entry","push","put","key","del","splice","removed","setSelectorEngine","e","querySelectorAll","r","Error","rootListener","propertyName","listeners","listener","add","custom","attachEvent","detachEvent","rm","originalFn","orgType","replace","handlers","delegate","selector","array","match","fireListener","evt","createEvent","dispatchEvent","fireEvent","createEventObject","off","typeSpec","k","isTypeStr","indexOf","hasOwnProperty","on","types","first","delfn","one","fire","names","from","beanDel","bean","remove","noConflict","cleanup","CollectGarbage","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","_debugging","_debugAll","typeRegistry","namespace","_type","createType","defaultType","extend","_extend","getPrototypeOf","config","_","assign","typeName","log","buildTypes","_this2","forEach","child","parent","protoProps","staticProps","Surrogate","superclass","initConfig","cArr","DEFAULTS","prop","getConstructor","jsClass","defaultClass","eval","debug","moduleName","message","console","substring","info","getRelativePosition","bounds","geometry","width","anchorX","offsetX","height","anchorY","offsetY","unscale","view","scale","translate","getObjProperty","getProperty","_createClass","defineProperties","descriptor","aPt","Math","sqrt","p2","_scale","dist","distance","angle","cos","PI","sin","rotate","abs","dotProduct","rect","vertical","W","N","S","E","NE","NW","SE","SW","_lodash","_lodash2","_Shape3","el","w","h","left","right","top","bottom","pt","pt1","pt2","horizontal","contains1","contains2","outPt","pts","margin","isArray","min","max","rects","minx","miny","maxx","Infinity","maxy","each","isIE","version","ActiveXObject","myNav","toLowerCase","parseInt","isFireFox","InstallTrigger","createElement","tag","attribs","styles","html","setElement","innerHTML","createElementByString","str","temp","childNodes","setAttribute","style","testElement","node","method","getAncestorBy","getPosition","elRect","getBoundingClientRect","contextRect","getCenterPosition","move","getSize","offsetWidth","offsetHeight","resize","preloadImages","img","that","Image","onload","index","src","getImageInfo","eventFromInput","tagName","buffer","stuff","pop","sep","join","start","end","cosa","x0","y0","x1","y1","x2","y2","x3","y3","denom","nume_a","nume_b","ua","ub","intersectionX","intersectionY","_interopRequireWildcard","newObj","_KeyUtils","KeyUtils","zoomScale","rootNS","getAttribute","dragging","bind","handleEvent","started","enterStack","startKeys","stopKeys","buf","ns","stack","isRoot","startsWith","rootTarget","nsTarget","prepend","targetStack","data","_this","isKeyEvent","getKeyEvent","getEventInfo","pow","wheelDelta","dragObject","mouse","dragPos","mousemove","currentPos","dispatch","mouseup","simulateEnterLeave","last","clearEnterStack","getNS","val","append","item","nsType","callback","isNaN","lastPosition","_this3","registerKey","getKeyData","ctrl","alt","shift","meta","code","_this4","unregisterKey","zIndex","_this5","register","registeredType","arr","changedTouches","svg","ownerSVGElement","createSVGPoint","point","matrixTransform","getScreenCTM","inverse","clientLeft","clientTop","KeyboardEvent","ctrlKey","altKey","shiftKey","metaKey","nodeDefaults","role","draggable","selectable","editable","resizable","sourceable","targetable","visible","edgeDefaults","uniqueId","model","nodes","edges","selection","destroyed","nodeTypes","edgeTypes","loadModel","getCurrentRoot","NodeClass","getJSClass","addChild","to","EdgeClass","edge","addNode","addEdge","children","without","allowDanglingEdges","multiConnect","readOnly","viewOnly","_typeof","Symbol","iterator","_Element3","graph","inEdges","outEdges","n","source","_ret","render","v","label","_Cache","_Cache2","decorators","createDecorators","views","viewProps","isUndefined","getBounds","className","computedClassName","viewProp","shape","set","template","getTemplate","getView","box","getLabelBox","SVG_TEMPLATE","_computedClassName","caches","getCache","clear","namesapce","FONT_BOLD","FONT_ITALIC","FONT_UNDERLINE","FONT_SHADOW","SVG_TEMPLATE_STR","trim","variable","defaultConfig","fontSize","fontFamily","fontStyle","padding","linePadding","align","containerWidth","containerHeight","labelConfig","defaultsDeep","bold","wrappedLabel","wrap","anchor","dx","setAnchorX","maxBounds","_label","dy","lineHeight","getLabelBoxForEdge","labelLocation","labelOffsetX","labelOffsetY","canvasSupported","stringMeasureEl","getStringSize","memoize","size","isNull","getContext","ctx","font","measure","measureText","position","visibility","display","appendChild","contentWindow","open","write","close","div","getElementById","fontWeight","string","maxWidth","spaceSize","space","lines","word","words","line","currentWidth","wordWidth","newLine","editor","input","refEl","textEl","unselectable","overflow","border","font-family","font-size","font-weight","focus","select","cancel","_get","object","property","receiver","Function","desc","getOwnPropertyDescriptor","getter","setSource","sourcePos","setTarget","targetPos","setTerminal","dir","setEdgeAt","removeEdge","addOutEdge","addInEdge","clearPoints","points","EdgeStyle","getPoints","refPts","getCenter","getLength","strLeft","toNumber","getDirection","getScaled","orientation","toUpperCase","HORIZONTAL","VERTICAL","_Layout3","items","getLinkedNodes","owner","p1","hgap","vgap","_flPos","moveTo","trigger","tabindex","layout","layoutClass","_graph","dispatcher","templateStore","scaled","_viewport","vp","transform","gridSize","gBounds","vBounds","viewport","parseFloat","_firstSelection","_delayEdit","delay","preprocessor","parts","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","next","done","part","camelCase","err","interpolate","defaultClickMode","hideOutline","singleSelect","gridEnabled","guidesEnabled","maxZoom","minZoom","zoomFactor","maskOpacity","_GraphView3","TEMPLATES","$root","$node","$edge","Triangle","Rhombus","hexagon","direction","path","startArrow","endArrow","image","result"],"mappings":"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","file":"qgraph.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"lodash\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"lodash\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"qgraph\"] = factory(require(\"lodash\"));\n\telse\n\t\troot[\"qgraph\"] = factory(root[\"_\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_5__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","/*!\n * \n * \tqgraph - A Graph Manipulation and Visualization Library\n * \tAuthor: Tong Zou\n * \tVersion: v0.0.5\n * \tUrl: https://github.com/tongzou/qgraph\n * \tLicense(s): MIT\n * \n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"lodash\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"lodash\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"qgraph\"] = factory(require(\"lodash\"));\n\telse\n\t\troot[\"qgraph\"] = factory(root[\"_\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_5__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _bean = __webpack_require__(1);\n\t\n\tvar _bean2 = _interopRequireDefault(_bean);\n\t\n\tvar _Utils = __webpack_require__(2);\n\t\n\tvar _Utils2 = _interopRequireDefault(_Utils);\n\t\n\tvar _DomUtils = __webpack_require__(7);\n\t\n\tvar _DomUtils2 = _interopRequireDefault(_DomUtils);\n\t\n\tvar _StringBuffer = __webpack_require__(8);\n\t\n\tvar _StringBuffer2 = _interopRequireDefault(_StringBuffer);\n\t\n\tvar _Point = __webpack_require__(3);\n\t\n\tvar _Point2 = _interopRequireDefault(_Point);\n\t\n\tvar _Line = __webpack_require__(9);\n\t\n\tvar _Line2 = _interopRequireDefault(_Line);\n\t\n\tvar _Shape = __webpack_require__(6);\n\t\n\tvar _Shape2 = _interopRequireDefault(_Shape);\n\t\n\tvar _Rectangle = __webpack_require__(4);\n\t\n\tvar _Rectangle2 = _interopRequireDefault(_Rectangle);\n\t\n\tvar _Ellipse = __webpack_require__(10);\n\t\n\tvar _Ellipse2 = _interopRequireDefault(_Ellipse);\n\t\n\tvar _EventDispatcher = __webpack_require__(11);\n\t\n\tvar _EventDispatcher2 = _interopRequireDefault(_EventDispatcher);\n\t\n\tvar _Graph = __webpack_require__(13);\n\t\n\tvar _Graph2 = _interopRequireDefault(_Graph);\n\t\n\tvar _Element = __webpack_require__(15);\n\t\n\tvar _Element2 = _interopRequireDefault(_Element);\n\t\n\tvar _Node = __webpack_require__(14);\n\t\n\tvar _Node2 = _interopRequireDefault(_Node);\n\t\n\tvar _Edge = __webpack_require__(18);\n\t\n\tvar _Edge2 = _interopRequireDefault(_Edge);\n\t\n\tvar _Layout = __webpack_require__(19);\n\t\n\tvar _Layout2 = _interopRequireDefault(_Layout);\n\t\n\tvar _FlowLayout = __webpack_require__(20);\n\t\n\tvar _FlowLayout2 = _interopRequireDefault(_FlowLayout);\n\t\n\tvar _Label = __webpack_require__(17);\n\t\n\tvar _Label2 = _interopRequireDefault(_Label);\n\t\n\tvar _GraphView = __webpack_require__(21);\n\t\n\tvar _GraphView2 = _interopRequireDefault(_GraphView);\n\t\n\tvar _SVGView = __webpack_require__(22);\n\t\n\tvar _SVGView2 = _interopRequireDefault(_SVGView);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t_Shape2.default.addShape(\"Rectangle\", _Rectangle2.default);\n\t_Shape2.default.addShape(\"Ellipse\", _Ellipse2.default);\n\t\n\texports.default = {\n\t\tEvents: _bean2.default,\n\t\tCache: _Utils2.default,\n\t\tUtils: _Utils2.default,\n\t\tDomUtils: _DomUtils2.default,\n\t\tStringBuffer: _StringBuffer2.default,\n\t\tPoint: _Point2.default,\n\t\tLine: _Line2.default,\n\t\tShape: _Shape2.default,\n\t\tRectangle: _Rectangle2.default,\n\t\tEllipse: _Ellipse2.default,\n\t\tEventDispatcher: _EventDispatcher2.default,\n\t\tLabel: _Label2.default,\n\t\tGraph: _Graph2.default,\n\t\tElement: _Element2.default,\n\t\tNode: _Node2.default,\n\t\tEdge: _Edge2.default,\n\t\tLayout: _Layout2.default,\n\t\tFlowLayout: _FlowLayout2.default,\n\t\tGraphView: _GraphView2.default,\n\t\tSVGView: _SVGView2.default\n\t};\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!\n\t  * Bean - copyright (c) Jacob Thornton 2011-2012\n\t  * https://github.com/fat/bean\n\t  * MIT license\n\t  */\n\t(function (name, context, definition) {\n\t  if (typeof module != 'undefined' && module.exports) module.exports = definition()\n\t  else if (true) !(__WEBPACK_AMD_DEFINE_FACTORY__ = (definition), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__))\n\t  else context[name] = definition()\n\t})('bean', this, function (name, context) {\n\t  name    = name    || 'bean'\n\t  context = context || this\n\t\n\t  var win            = window\n\t    , old            = context[name]\n\t    , namespaceRegex = /[^\\.]*(?=\\..*)\\.|.*/\n\t    , nameRegex      = /\\..*/\n\t    , addEvent       = 'addEventListener'\n\t    , removeEvent    = 'removeEventListener'\n\t    , doc            = document || {}\n\t    , root           = doc.documentElement || {}\n\t    , W3C_MODEL      = root[addEvent]\n\t    , eventSupport   = W3C_MODEL ? addEvent : 'attachEvent'\n\t    , ONE            = {} // singleton for quick matching making add() do one()\n\t\n\t    , slice          = Array.prototype.slice\n\t    , str2arr        = function (s, d) { return s.split(d || ' ') }\n\t    , isString       = function (o) { return typeof o == 'string' }\n\t    , isFunction     = function (o) { return typeof o == 'function' }\n\t\n\t      // events that we consider to be 'native', anything not in this list will\n\t      // be treated as a custom event\n\t    , standardNativeEvents =\n\t        'click dblclick mouseup mousedown contextmenu '                  + // mouse buttons\n\t        'mousewheel mousemultiwheel DOMMouseScroll '                     + // mouse wheel\n\t        'mouseover mouseout mousemove selectstart selectend '            + // mouse movement\n\t        'keydown keypress keyup '                                        + // keyboard\n\t        'orientationchange '                                             + // mobile\n\t        'focus blur change reset select submit '                         + // form elements\n\t        'load unload beforeunload resize move DOMContentLoaded '         + // window\n\t        'readystatechange message '                                      + // window\n\t        'error abort scroll '                                              // misc\n\t      // element.fireEvent('onXYZ'... is not forgiving if we try to fire an event\n\t      // that doesn't actually exist, so make sure we only do these on newer browsers\n\t    , w3cNativeEvents =\n\t        'show '                                                          + // mouse buttons\n\t        'input invalid '                                                 + // form elements\n\t        'touchstart touchmove touchend touchcancel '                     + // touch\n\t        'gesturestart gesturechange gestureend '                         + // gesture\n\t        'textinput '                                                     + // TextEvent\n\t        'readystatechange pageshow pagehide popstate '                   + // window\n\t        'hashchange offline online '                                     + // window\n\t        'afterprint beforeprint '                                        + // printing\n\t        'dragstart dragenter dragover dragleave drag drop dragend '      + // dnd\n\t        'loadstart progress suspend emptied stalled loadmetadata '       + // media\n\t        'loadeddata canplay canplaythrough playing waiting seeking '     + // media\n\t        'seeked ended durationchange timeupdate play pause ratechange '  + // media\n\t        'volumechange cuechange '                                        + // media\n\t        'checking noupdate downloading cached updateready obsolete '       // appcache\n\t\n\t      // convert to a hash for quick lookups\n\t    , nativeEvents = (function (hash, events, i) {\n\t        for (i = 0; i < events.length; i++) events[i] && (hash[events[i]] = 1)\n\t        return hash\n\t      }({}, str2arr(standardNativeEvents + (W3C_MODEL ? w3cNativeEvents : ''))))\n\t\n\t      // custom events are events that we *fake*, they are not provided natively but\n\t      // we can use native events to generate them\n\t    , customEvents = (function () {\n\t        var isAncestor = 'compareDocumentPosition' in root\n\t              ? function (element, container) {\n\t                  return container.compareDocumentPosition && (container.compareDocumentPosition(element) & 16) === 16\n\t                }\n\t              : 'contains' in root\n\t                ? function (element, container) {\n\t                    container = container.nodeType === 9 || container === window ? root : container\n\t                    return container !== element && container.contains(element)\n\t                  }\n\t                : function (element, container) {\n\t                    while (element = element.parentNode) if (element === container) return 1\n\t                    return 0\n\t                  }\n\t          , check = function (event) {\n\t              var related = event.relatedTarget\n\t              return !related\n\t                ? related == null\n\t                : (related !== this && related.prefix !== 'xul' && !/document/.test(this.toString())\n\t                    && !isAncestor(related, this))\n\t            }\n\t\n\t        return {\n\t            mouseenter: { base: 'mouseover', condition: check }\n\t          , mouseleave: { base: 'mouseout', condition: check }\n\t          , mousewheel: { base: /Firefox/.test(navigator.userAgent) ? 'DOMMouseScroll' : 'mousewheel' }\n\t        }\n\t      }())\n\t\n\t      // we provide a consistent Event object across browsers by taking the actual DOM\n\t      // event object and generating a new one from its properties.\n\t    , Event = (function () {\n\t            // a whitelist of properties (for different event types) tells us what to check for and copy\n\t        var commonProps  = str2arr('altKey attrChange attrName bubbles cancelable ctrlKey currentTarget ' +\n\t              'detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey '  +\n\t              'srcElement target timeStamp type view which propertyName')\n\t          , mouseProps   = commonProps.concat(str2arr('button buttons clientX clientY dataTransfer '      +\n\t              'fromElement offsetX offsetY pageX pageY screenX screenY toElement'))\n\t          , mouseWheelProps = mouseProps.concat(str2arr('wheelDelta wheelDeltaX wheelDeltaY wheelDeltaZ ' +\n\t              'axis')) // 'axis' is FF specific\n\t          , keyProps     = commonProps.concat(str2arr('char charCode key keyCode keyIdentifier '          +\n\t              'keyLocation location'))\n\t          , textProps    = commonProps.concat(str2arr('data'))\n\t          , touchProps   = commonProps.concat(str2arr('touches targetTouches changedTouches scale rotation'))\n\t          , messageProps = commonProps.concat(str2arr('data origin source'))\n\t          , stateProps   = commonProps.concat(str2arr('state'))\n\t          , overOutRegex = /over|out/\n\t            // some event types need special handling and some need special properties, do that all here\n\t          , typeFixers   = [\n\t                { // key events\n\t                    reg: /key/i\n\t                  , fix: function (event, newEvent) {\n\t                      newEvent.keyCode = event.keyCode || event.which\n\t                      return keyProps\n\t                    }\n\t                }\n\t              , { // mouse events\n\t                    reg: /click|mouse(?!(.*wheel|scroll))|menu|drag|drop/i\n\t                  , fix: function (event, newEvent, type) {\n\t                      newEvent.rightClick = event.which === 3 || event.button === 2\n\t                      newEvent.pos = { x: 0, y: 0 }\n\t                      if (event.pageX || event.pageY) {\n\t                        newEvent.clientX = event.pageX\n\t                        newEvent.clientY = event.pageY\n\t                      } else if (event.clientX || event.clientY) {\n\t                        newEvent.clientX = event.clientX + doc.body.scrollLeft + root.scrollLeft\n\t                        newEvent.clientY = event.clientY + doc.body.scrollTop + root.scrollTop\n\t                      }\n\t                      if (overOutRegex.test(type)) {\n\t                        newEvent.relatedTarget = event.relatedTarget\n\t                          || event[(type == 'mouseover' ? 'from' : 'to') + 'Element']\n\t                      }\n\t                      return mouseProps\n\t                    }\n\t                }\n\t              , { // mouse wheel events\n\t                    reg: /mouse.*(wheel|scroll)/i\n\t                  , fix: function () { return mouseWheelProps }\n\t                }\n\t              , { // TextEvent\n\t                    reg: /^text/i\n\t                  , fix: function () { return textProps }\n\t                }\n\t              , { // touch and gesture events\n\t                    reg: /^touch|^gesture/i\n\t                  , fix: function () { return touchProps }\n\t                }\n\t              , { // message events\n\t                    reg: /^message$/i\n\t                  , fix: function () { return messageProps }\n\t                }\n\t              , { // popstate events\n\t                    reg: /^popstate$/i\n\t                  , fix: function () { return stateProps }\n\t                }\n\t              , { // everything else\n\t                    reg: /.*/\n\t                  , fix: function () { return commonProps }\n\t                }\n\t            ]\n\t          , typeFixerMap = {} // used to map event types to fixer functions (above), a basic cache mechanism\n\t\n\t          , Event = function (event, element, isNative) {\n\t              if (!arguments.length) return\n\t              event = event || ((element.ownerDocument || element.document || element).parentWindow || win).event\n\t              this.originalEvent = event\n\t              this.isNative       = isNative\n\t              this.isBean         = true\n\t\n\t              if (!event) return\n\t\n\t              var type   = event.type\n\t                , target = event.target || event.srcElement\n\t                , i, l, p, props, fixer\n\t\n\t              this.target = target && target.nodeType === 3 ? target.parentNode : target\n\t\n\t              if (isNative) { // we only need basic augmentation on custom events, the rest expensive & pointless\n\t                fixer = typeFixerMap[type]\n\t                if (!fixer) { // haven't encountered this event type before, map a fixer function for it\n\t                  for (i = 0, l = typeFixers.length; i < l; i++) {\n\t                    if (typeFixers[i].reg.test(type)) { // guaranteed to match at least one, last is .*\n\t                      typeFixerMap[type] = fixer = typeFixers[i].fix\n\t                      break\n\t                    }\n\t                  }\n\t                }\n\t\n\t                props = fixer(event, this, type)\n\t                for (i = props.length; i--;) {\n\t                  if (!((p = props[i]) in this) && p in event) this[p] = event[p]\n\t                }\n\t              }\n\t            }\n\t\n\t        // preventDefault() and stopPropagation() are a consistent interface to those functions\n\t        // on the DOM, stop() is an alias for both of them together\n\t        Event.prototype.preventDefault = function () {\n\t          if (this.originalEvent.preventDefault) this.originalEvent.preventDefault()\n\t          else this.originalEvent.returnValue = false\n\t        }\n\t        Event.prototype.stopPropagation = function () {\n\t          if (this.originalEvent.stopPropagation) this.originalEvent.stopPropagation()\n\t          else this.originalEvent.cancelBubble = true\n\t        }\n\t        Event.prototype.stop = function () {\n\t          this.preventDefault()\n\t          this.stopPropagation()\n\t          this.stopped = true\n\t        }\n\t        // stopImmediatePropagation() has to be handled internally because we manage the event list for\n\t        // each element\n\t        // note that originalElement may be a Bean#Event object in some situations\n\t        Event.prototype.stopImmediatePropagation = function () {\n\t          if (this.originalEvent.stopImmediatePropagation) this.originalEvent.stopImmediatePropagation()\n\t          this.isImmediatePropagationStopped = function () { return true }\n\t        }\n\t        Event.prototype.isImmediatePropagationStopped = function () {\n\t          return this.originalEvent.isImmediatePropagationStopped && this.originalEvent.isImmediatePropagationStopped()\n\t        }\n\t        Event.prototype.clone = function (currentTarget) {\n\t          //TODO: this is ripe for optimisation, new events are *expensive*\n\t          // improving this will speed up delegated events\n\t          var ne = new Event(this, this.element, this.isNative)\n\t          ne.currentTarget = currentTarget\n\t          return ne\n\t        }\n\t\n\t        return Event\n\t      }())\n\t\n\t      // if we're in old IE we can't do onpropertychange on doc or win so we use doc.documentElement for both\n\t    , targetElement = function (element, isNative) {\n\t        return !W3C_MODEL && !isNative && (element === doc || element === win) ? root : element\n\t      }\n\t\n\t      /**\n\t        * Bean maintains an internal registry for event listeners. We don't touch elements, objects\n\t        * or functions to identify them, instead we store everything in the registry.\n\t        * Each event listener has a RegEntry object, we have one 'registry' for the whole instance.\n\t        */\n\t    , RegEntry = (function () {\n\t        // each handler is wrapped so we can handle delegation and custom events\n\t        var wrappedHandler = function (element, fn, condition, args) {\n\t            var call = function (event, eargs) {\n\t                  return fn.apply(element, args ? slice.call(eargs, event ? 0 : 1).concat(args) : eargs)\n\t                }\n\t              , findTarget = function (event, eventElement) {\n\t                  return fn.__beanDel ? fn.__beanDel.ft(event.target, element) : eventElement\n\t                }\n\t              , handler = condition\n\t                  ? function (event) {\n\t                      var target = findTarget(event, this) // deleated event\n\t                      if (condition.apply(target, arguments)) {\n\t                        if (event) event.currentTarget = target\n\t                        return call(event, arguments)\n\t                      }\n\t                    }\n\t                  : function (event) {\n\t                      if (fn.__beanDel) event = event.clone(findTarget(event)) // delegated event, fix the fix\n\t                      return call(event, arguments)\n\t                    }\n\t            handler.__beanDel = fn.__beanDel\n\t            return handler\n\t          }\n\t\n\t        , RegEntry = function (element, type, handler, original, namespaces, args, root) {\n\t            var customType     = customEvents[type]\n\t              , isNative\n\t\n\t            if (type == 'unload') {\n\t              // self clean-up\n\t              handler = once(removeListener, element, type, handler, original)\n\t            }\n\t\n\t            if (customType) {\n\t              if (customType.condition) {\n\t                handler = wrappedHandler(element, handler, customType.condition, args)\n\t              }\n\t              type = customType.base || type\n\t            }\n\t\n\t            this.isNative      = isNative = nativeEvents[type] && !!element[eventSupport]\n\t            this.customType    = !W3C_MODEL && !isNative && type\n\t            this.element       = element\n\t            this.type          = type\n\t            this.original      = original\n\t            this.namespaces    = namespaces\n\t            this.eventType     = W3C_MODEL || isNative ? type : 'propertychange'\n\t            this.target        = targetElement(element, isNative)\n\t            this[eventSupport] = !!this.target[eventSupport]\n\t            this.root          = root\n\t            this.handler       = wrappedHandler(element, handler, null, args)\n\t          }\n\t\n\t        // given a list of namespaces, is our entry in any of them?\n\t        RegEntry.prototype.inNamespaces = function (checkNamespaces) {\n\t          var i, j, c = 0\n\t          if (!checkNamespaces) return true\n\t          if (!this.namespaces) return false\n\t          for (i = checkNamespaces.length; i--;) {\n\t            for (j = this.namespaces.length; j--;) {\n\t              if (checkNamespaces[i] == this.namespaces[j]) c++\n\t            }\n\t          }\n\t          return checkNamespaces.length === c\n\t        }\n\t\n\t        // match by element, original fn (opt), handler fn (opt)\n\t        RegEntry.prototype.matches = function (checkElement, checkOriginal, checkHandler) {\n\t          return this.element === checkElement &&\n\t            (!checkOriginal || this.original === checkOriginal) &&\n\t            (!checkHandler || this.handler === checkHandler)\n\t        }\n\t\n\t        return RegEntry\n\t      }())\n\t\n\t    , registry = (function () {\n\t        // our map stores arrays by event type, just because it's better than storing\n\t        // everything in a single array.\n\t        // uses '$' as a prefix for the keys for safety and 'r' as a special prefix for\n\t        // rootListeners so we can look them up fast\n\t        var map = {}\n\t\n\t          // generic functional search of our registry for matching listeners,\n\t          // `fn` returns false to break out of the loop\n\t          , forAll = function (element, type, original, handler, root, fn) {\n\t              var pfx = root ? 'r' : '$'\n\t              if (!type || type == '*') {\n\t                // search the whole registry\n\t                for (var t in map) {\n\t                  if (t.charAt(0) == pfx) {\n\t                    forAll(element, t.substr(1), original, handler, root, fn)\n\t                  }\n\t                }\n\t              } else {\n\t                var i = 0, l, list = map[pfx + type], all = element == '*'\n\t                if (!list) return\n\t                for (l = list.length; i < l; i++) {\n\t                  if ((all || list[i].matches(element, original, handler)) && !fn(list[i], list, i, type)) return\n\t                }\n\t              }\n\t            }\n\t\n\t          , has = function (element, type, original, root) {\n\t              // we're not using forAll here simply because it's a bit slower and this\n\t              // needs to be fast\n\t              var i, list = map[(root ? 'r' : '$') + type]\n\t              if (list) {\n\t                for (i = list.length; i--;) {\n\t                  if (!list[i].root && list[i].matches(element, original, null)) return true\n\t                }\n\t              }\n\t              return false\n\t            }\n\t\n\t          , get = function (element, type, original, root) {\n\t              var entries = []\n\t              forAll(element, type, original, null, root, function (entry) {\n\t                return entries.push(entry)\n\t              })\n\t              return entries\n\t            }\n\t\n\t          , put = function (entry) {\n\t              var has = !entry.root && !this.has(entry.element, entry.type, null, false)\n\t                , key = (entry.root ? 'r' : '$') + entry.type\n\t              ;(map[key] || (map[key] = [])).push(entry)\n\t              return has\n\t            }\n\t\n\t          , del = function (entry) {\n\t              forAll(entry.element, entry.type, null, entry.handler, entry.root, function (entry, list, i) {\n\t                list.splice(i, 1)\n\t                entry.removed = true\n\t                if (list.length === 0) delete map[(entry.root ? 'r' : '$') + entry.type]\n\t                return false\n\t              })\n\t            }\n\t\n\t            // dump all entries, used for onunload\n\t          , entries = function () {\n\t              var t, entries = []\n\t              for (t in map) {\n\t                if (t.charAt(0) == '$') entries = entries.concat(map[t])\n\t              }\n\t              return entries\n\t            }\n\t\n\t        return { has: has, get: get, put: put, del: del, entries: entries }\n\t      }())\n\t\n\t      // we need a selector engine for delegated events, use querySelectorAll if it exists\n\t      // but for older browsers we need Qwery, Sizzle or similar\n\t    , selectorEngine\n\t    , setSelectorEngine = function (e) {\n\t        if (!arguments.length) {\n\t          selectorEngine = doc.querySelectorAll\n\t            ? function (s, r) {\n\t                return r.querySelectorAll(s)\n\t              }\n\t            : function () {\n\t                throw new Error('Bean: No selector engine installed') // eeek\n\t              }\n\t        } else {\n\t          selectorEngine = e\n\t        }\n\t      }\n\t\n\t      // we attach this listener to each DOM event that we need to listen to, only once\n\t      // per event type per DOM element\n\t    , rootListener = function (event, type) {\n\t        if (!W3C_MODEL && type && event && event.propertyName != '_on' + type) return\n\t\n\t        var listeners = registry.get(this, type || event.type, null, false)\n\t          , l = listeners.length\n\t          , i = 0\n\t\n\t        event = new Event(event, this, true)\n\t        if (type) event.type = type\n\t\n\t        // iterate through all handlers registered for this type, calling them unless they have\n\t        // been removed by a previous handler or stopImmediatePropagation() has been called\n\t        for (; i < l && !event.isImmediatePropagationStopped(); i++) {\n\t          if (!listeners[i].removed) listeners[i].handler.call(this, event)\n\t        }\n\t      }\n\t\n\t      // add and remove listeners to DOM elements\n\t    , listener = W3C_MODEL\n\t        ? function (element, type, add) {\n\t            // new browsers\n\t            element[add ? addEvent : removeEvent](type, rootListener, false)\n\t          }\n\t        : function (element, type, add, custom) {\n\t            // IE8 and below, use attachEvent/detachEvent and we have to piggy-back propertychange events\n\t            // to simulate event bubbling etc.\n\t            var entry\n\t            if (add) {\n\t              registry.put(entry = new RegEntry(\n\t                  element\n\t                , custom || type\n\t                , function (event) { // handler\n\t                    rootListener.call(element, event, custom)\n\t                  }\n\t                , rootListener\n\t                , null\n\t                , null\n\t                , true // is root\n\t              ))\n\t              if (custom && element['_on' + custom] == null) element['_on' + custom] = 0\n\t              entry.target.attachEvent('on' + entry.eventType, entry.handler)\n\t            } else {\n\t              entry = registry.get(element, custom || type, rootListener, true)[0]\n\t              if (entry) {\n\t                entry.target.detachEvent('on' + entry.eventType, entry.handler)\n\t                registry.del(entry)\n\t              }\n\t            }\n\t          }\n\t\n\t    , once = function (rm, element, type, fn, originalFn) {\n\t        // wrap the handler in a handler that does a remove as well\n\t        return function () {\n\t          fn.apply(this, arguments)\n\t          rm(element, type, originalFn)\n\t        }\n\t      }\n\t\n\t    , removeListener = function (element, orgType, handler, namespaces) {\n\t        var type     = orgType && orgType.replace(nameRegex, '')\n\t          , handlers = registry.get(element, type, null, false)\n\t          , removed  = {}\n\t          , i, l\n\t\n\t        for (i = 0, l = handlers.length; i < l; i++) {\n\t          if ((!handler || handlers[i].original === handler) && handlers[i].inNamespaces(namespaces)) {\n\t            // TODO: this is problematic, we have a registry.get() and registry.del() that\n\t            // both do registry searches so we waste cycles doing this. Needs to be rolled into\n\t            // a single registry.forAll(fn) that removes while finding, but the catch is that\n\t            // we'll be splicing the arrays that we're iterating over. Needs extra tests to\n\t            // make sure we don't screw it up. @rvagg\n\t            registry.del(handlers[i])\n\t            if (!removed[handlers[i].eventType] && handlers[i][eventSupport])\n\t              removed[handlers[i].eventType] = { t: handlers[i].eventType, c: handlers[i].type }\n\t          }\n\t        }\n\t        // check each type/element for removed listeners and remove the rootListener where it's no longer needed\n\t        for (i in removed) {\n\t          if (!registry.has(element, removed[i].t, null, false)) {\n\t            // last listener of this type, remove the rootListener\n\t            listener(element, removed[i].t, false, removed[i].c)\n\t          }\n\t        }\n\t      }\n\t\n\t      // set up a delegate helper using the given selector, wrap the handler function\n\t    , delegate = function (selector, fn) {\n\t        //TODO: findTarget (therefore $) is called twice, once for match and once for\n\t        // setting e.currentTarget, fix this so it's only needed once\n\t        var findTarget = function (target, root) {\n\t              var i, array = isString(selector) ? selectorEngine(selector, root) : selector\n\t              for (; target && target !== root; target = target.parentNode) {\n\t                for (i = array.length; i--;) {\n\t                  if (array[i] === target) return target\n\t                }\n\t              }\n\t            }\n\t          , handler = function (e) {\n\t              var match = findTarget(e.target, this)\n\t              if (match) fn.apply(match, arguments)\n\t            }\n\t\n\t        // __beanDel isn't pleasant but it's a private function, not exposed outside of Bean\n\t        handler.__beanDel = {\n\t            ft       : findTarget // attach it here for customEvents to use too\n\t          , selector : selector\n\t        }\n\t        return handler\n\t      }\n\t\n\t    , fireListener = W3C_MODEL ? function (isNative, type, element) {\n\t        // modern browsers, do a proper dispatchEvent()\n\t        var evt = doc.createEvent(isNative ? 'HTMLEvents' : 'UIEvents')\n\t        evt[isNative ? 'initEvent' : 'initUIEvent'](type, true, true, win, 1)\n\t        element.dispatchEvent(evt)\n\t      } : function (isNative, type, element) {\n\t        // old browser use onpropertychange, just increment a custom property to trigger the event\n\t        element = targetElement(element, isNative)\n\t        isNative ? element.fireEvent('on' + type, doc.createEventObject()) : element['_on' + type]++\n\t      }\n\t\n\t      /**\n\t        * Public API: off(), on(), add(), (remove()), one(), fire(), clone()\n\t        */\n\t\n\t      /**\n\t        * off(element[, eventType(s)[, handler ]])\n\t        */\n\t    , off = function (element, typeSpec, fn) {\n\t        var isTypeStr = isString(typeSpec)\n\t          , k, type, namespaces, i\n\t\n\t        if (isTypeStr && typeSpec.indexOf(' ') > 0) {\n\t          // off(el, 't1 t2 t3', fn) or off(el, 't1 t2 t3')\n\t          typeSpec = str2arr(typeSpec)\n\t          for (i = typeSpec.length; i--;)\n\t            off(element, typeSpec[i], fn)\n\t          return element\n\t        }\n\t\n\t        type = isTypeStr && typeSpec.replace(nameRegex, '')\n\t        if (type && customEvents[type]) type = customEvents[type].base\n\t\n\t        if (!typeSpec || isTypeStr) {\n\t          // off(el) or off(el, t1.ns) or off(el, .ns) or off(el, .ns1.ns2.ns3)\n\t          if (namespaces = isTypeStr && typeSpec.replace(namespaceRegex, '')) namespaces = str2arr(namespaces, '.')\n\t          removeListener(element, type, fn, namespaces)\n\t        } else if (isFunction(typeSpec)) {\n\t          // off(el, fn)\n\t          removeListener(element, null, typeSpec)\n\t        } else {\n\t          // off(el, { t1: fn1, t2, fn2 })\n\t          for (k in typeSpec) {\n\t            if (typeSpec.hasOwnProperty(k)) off(element, k, typeSpec[k])\n\t          }\n\t        }\n\t\n\t        return element\n\t      }\n\t\n\t      /**\n\t        * on(element, eventType(s)[, selector], handler[, args ])\n\t        */\n\t    , on = function(element, events, selector, fn) {\n\t        var originalFn, type, types, i, args, entry, first\n\t\n\t        //TODO: the undefined check means you can't pass an 'args' argument, fix this perhaps?\n\t        if (selector === undefined && typeof events == 'object') {\n\t          //TODO: this can't handle delegated events\n\t          for (type in events) {\n\t            if (events.hasOwnProperty(type)) {\n\t              on.call(this, element, type, events[type])\n\t            }\n\t          }\n\t          return\n\t        }\n\t\n\t        if (!isFunction(selector)) {\n\t          // delegated event\n\t          originalFn = fn\n\t          args       = slice.call(arguments, 4)\n\t          fn         = delegate(selector, originalFn, selectorEngine)\n\t        } else {\n\t          args       = slice.call(arguments, 3)\n\t          fn         = originalFn = selector\n\t        }\n\t\n\t        types = str2arr(events)\n\t\n\t        // special case for one(), wrap in a self-removing handler\n\t        if (this === ONE) {\n\t          fn = once(off, element, events, fn, originalFn)\n\t        }\n\t\n\t        for (i = types.length; i--;) {\n\t          // add new handler to the registry and check if it's the first for this element/type\n\t          first = registry.put(entry = new RegEntry(\n\t              element\n\t            , types[i].replace(nameRegex, '') // event type\n\t            , fn\n\t            , originalFn\n\t            , str2arr(types[i].replace(namespaceRegex, ''), '.') // namespaces\n\t            , args\n\t            , false // not root\n\t          ))\n\t          if (entry[eventSupport] && first) {\n\t            // first event of this type on this element, add root listener\n\t            listener(element, entry.eventType, true, entry.customType)\n\t          }\n\t        }\n\t\n\t        return element\n\t      }\n\t\n\t      /**\n\t        * add(element[, selector], eventType(s), handler[, args ])\n\t        *\n\t        * Deprecated: kept (for now) for backward-compatibility\n\t        */\n\t    , add = function (element, events, fn, delfn) {\n\t        return on.apply(\n\t            null\n\t          , !isString(fn)\n\t              ? slice.call(arguments)\n\t              : [ element, fn, events, delfn ].concat(arguments.length > 3 ? slice.call(arguments, 5) : [])\n\t        )\n\t      }\n\t\n\t      /**\n\t        * one(element, eventType(s)[, selector], handler[, args ])\n\t        */\n\t    , one = function () {\n\t        return on.apply(ONE, arguments)\n\t      }\n\t\n\t      /**\n\t        * fire(element, eventType(s)[, args ])\n\t        *\n\t        * The optional 'args' argument must be an array, if no 'args' argument is provided\n\t        * then we can use the browser's DOM event system, otherwise we trigger handlers manually\n\t        */\n\t    , fire = function (element, type, args) {\n\t        var types = str2arr(type)\n\t          , i, j, l, names, handlers\n\t\n\t        for (i = types.length; i--;) {\n\t          type = types[i].replace(nameRegex, '')\n\t          if (names = types[i].replace(namespaceRegex, '')) names = str2arr(names, '.')\n\t          if (!names && !args && element[eventSupport]) {\n\t            fireListener(nativeEvents[type], type, element)\n\t          } else {\n\t            // non-native event, either because of a namespace, arguments or a non DOM element\n\t            // iterate over all listeners and manually 'fire'\n\t            handlers = registry.get(element, type, null, false)\n\t            args = [false].concat(args)\n\t            for (j = 0, l = handlers.length; j < l; j++) {\n\t              if (handlers[j].inNamespaces(names)) {\n\t                handlers[j].handler.apply(element, args)\n\t              }\n\t            }\n\t          }\n\t        }\n\t        return element\n\t      }\n\t\n\t      /**\n\t        * clone(dstElement, srcElement[, eventType ])\n\t        *\n\t        * TODO: perhaps for consistency we should allow the same flexibility in type specifiers?\n\t        */\n\t    , clone = function (element, from, type) {\n\t        var handlers = registry.get(from, type, null, false)\n\t          , l = handlers.length\n\t          , i = 0\n\t          , args, beanDel\n\t\n\t        for (; i < l; i++) {\n\t          if (handlers[i].original) {\n\t            args = [ element, handlers[i].type ]\n\t            if (beanDel = handlers[i].handler.__beanDel) args.push(beanDel.selector)\n\t            args.push(handlers[i].original)\n\t            on.apply(null, args)\n\t          }\n\t        }\n\t        return element\n\t      }\n\t\n\t    , bean = {\n\t          'on'                : on\n\t        , 'add'               : add\n\t        , 'one'               : one\n\t        , 'off'               : off\n\t        , 'remove'            : off\n\t        , 'clone'             : clone\n\t        , 'fire'              : fire\n\t        , 'Event'             : Event\n\t        , 'setSelectorEngine' : setSelectorEngine\n\t        , 'noConflict'        : function () {\n\t            context[name] = old\n\t            return this\n\t          }\n\t      }\n\t\n\t  // for IE, clean up on unload to avoid leaks\n\t  if (win.attachEvent) {\n\t    var cleanup = function () {\n\t      var i, entries = registry.entries()\n\t      for (i in entries) {\n\t        if (entries[i].type && entries[i].type !== 'unload') off(entries[i].element, entries[i].type)\n\t      }\n\t      win.detachEvent('onunload', cleanup)\n\t      win.CollectGarbage && win.CollectGarbage()\n\t    }\n\t    win.attachEvent('onunload', cleanup)\n\t  }\n\t\n\t  // initialize selector engine to internal default (qSA or throw Error)\n\t  setSelectorEngine()\n\t\n\t  return bean\n\t});\n\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _Point = __webpack_require__(3);\n\t\n\tvar _Point2 = _interopRequireDefault(_Point);\n\t\n\tvar _Rectangle = __webpack_require__(4);\n\t\n\tvar _Rectangle2 = _interopRequireDefault(_Rectangle);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t// util variables\n\tvar _debugging = [],\n\t    _debugAll = false,\n\t    typeRegistry = {},\n\t    splice = Array.splice;\n\t\n\t/**\n\t * Utility functions\n\t */\n\texports.default = {\n\t\ttype: function type(namespace, name, _type) {\n\t\t\tif (!typeRegistry[namespace]) typeRegistry[namespace] = {};\n\t\t\tif (!name) return typeRegistry[namespace];\n\t\t\tif (!_type) return typeRegistry[namespace][name];\n\t\t\ttypeRegistry[namespace][name] = _type;\n\t\t},\n\t\n\t\tcreateType: function createType(namespace, props, defaultType) {\n\t\t\tvar name = props.name;\n\t\n\t\t\t// first check if type exists\n\t\t\tvar type = this.type(namespace, name);\n\t\t\tif (!type) {\n\t\t\t\tvar extend = props.extends ? this.type(namespace, props.extends) : null;\n\t\t\t\tif (!extend && defaultType) extend = defaultType;\n\t\t\t\tif (extend) type = function (_extend) {\n\t\t\t\t\t_inherits(type, _extend);\n\t\n\t\t\t\t\tfunction type() {\n\t\t\t\t\t\t_classCallCheck(this, type);\n\t\n\t\t\t\t\t\treturn _possibleConstructorReturn(this, Object.getPrototypeOf(type).apply(this, arguments));\n\t\t\t\t\t}\n\t\n\t\t\t\t\treturn type;\n\t\t\t\t}(extend);else {\n\t\t\t\t\ttype = function type(config) {\n\t\t\t\t\t\t_classCallCheck(this, type);\n\t\n\t\t\t\t\t\t_.assign(this, config);\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tdelete props.name;\n\t\t\t\tdelete props.extends;\n\t\t\t\t_.assign(type.prototype, props);\n\t\t\t\ttype.typeName = name;\n\t\t\t\tthis.type(namespace, name, type);\n\t\t\t\tthis.log('Utils', 'Utils.createType - ' + namespace + '.' + name);\n\t\t\t}\n\t\t\treturn type;\n\t\t},\n\t\n\t\tbuildTypes: function buildTypes(types, namespace, defaultType) {\n\t\t\tvar _this2 = this;\n\t\n\t\t\tthis.log('Utils', 'Utils.buildTypes - ' + namespace);\n\t\n\t\t\tif (!types && defaultType) {\n\t\t\t\tthis.createType(namespace, defaultType);\n\t\t\t\tthis.log('Utils', 'Utils.buildTypes end');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (defaultType) {\n\t\t\t\tvar type = _.remove(types, { name: defaultType.name });\n\t\t\t\ttype = type.length > 0 ? type[0] : null;\n\t\t\t\tif (type) defaultType = this.createType(namespace, _.assign({}, defaultType, type));else defaultType = this.createType(namespace, defaultType);\n\t\t\t}\n\t\n\t\t\t_.forEach(types, function (type) {\n\t\t\t\t_this2.createType(namespace, type, defaultType);\n\t\t\t});\n\t\t\tthis.log('Utils', 'Utils.buildTypes end');\n\t\t},\n\t\n\t\t// Helper function to correctly set up the prototype chain, for subclasses.\n\t\t// Similar to `goog.inherits`, but uses a hash of prototype properties and\n\t\t// class properties to be extended.\n\t\textend: function extend(child, parent, protoProps, staticProps) {\n\t\t\t// Add static properties to the constructor function, if supplied.\n\t\t\t_.extend(child, parent, staticProps);\n\t\n\t\t\t// Set the prototype chain to inherit from `parent`, without calling\n\t\t\t// `parent`'s constructor function.\n\t\t\tvar Surrogate = function Surrogate() {\n\t\t\t\tthis.constructor = child;\n\t\t\t};\n\t\t\tSurrogate.prototype = parent.prototype;\n\t\t\tchild.prototype = new Surrogate();\n\t\n\t\t\t// Add prototype properties (instance properties) to the subclass,\n\t\t\t// if supplied.\n\t\t\tif (protoProps) _.extend(child.prototype, protoProps);\n\t\n\t\t\t// Set a convenience property in case the parent's prototype is needed later.\n\t\t\tchild.superclass = parent.prototype;\n\t\n\t\t\treturn child;\n\t\t},\n\t\n\t\tinitConfig: function initConfig(obj, config) {\n\t\t\tvar props = {},\n\t\t\t    c = obj.constructor,\n\t\t\t    cArr = [c];\n\t\t\twhile (c) {\n\t\t\t\tif (c.super) {\n\t\t\t\t\tc = c.super.constructor;\n\t\t\t\t\tsplice.apply(cArr, [0, 0, c]);\n\t\t\t\t} else c = null;\n\t\t\t}\n\t\n\t\t\tfor (var i = 0; i < cArr.length; i++) {\n\t\t\t\tc = cArr[i];\n\t\t\t\tif (c.DEFAULTS) _.assign(props, c.DEFAULTS);\n\t\t\t}\n\t\t\tobj.props = _.assign(props, config);\n\t\t\tc.prototype.prop = function (name, value) {\n\t\t\t\tif (!value) return this.props[name];\n\t\t\t\tthis.props[name] = value;\n\t\t\t};\n\t\t},\n\t\n\t\t/**\n\t  * Gets the JS class constructor.\n\t  * @param {Object} jsClass\n\t  * @param {Object} defaultClass\n\t  */\n\t\tgetConstructor: function getConstructor(jsClass, defaultClass) {\n\t\t\tif (!jsClass) jsClass = defaultClass;\n\t\n\t\t\tif (_.isString(jsClass)) jsClass = eval(jsClass);\n\t\t\treturn jsClass;\n\t\t},\n\t\n\t\tdebug: function debug(moduleName) {\n\t\t\tif (moduleName) {\n\t\t\t\t_debugging.push(moduleName);\n\t\t\t} else {\n\t\t\t\t_debugAll = true;\n\t\t\t}\n\t\t},\n\t\n\t\tlog: function log(name, message) {\n\t\t\tif (!window.console) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar debug = _debugAll;\n\t\t\tif (!_debugAll) {\n\t\t\t\tdebug = false;\n\t\t\t\tfor (var i = 0; i < _debugging.length; i++) {\n\t\t\t\t\tif (_debugging[i] == name) debug = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!debug) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\twhile (name.length < 10) {\n\t\t\t\tname = name + ' ';\n\t\t\t}\n\t\t\tname = name.substring(0, 10) + \" - \";\n\t\t\tconsole.info(name, message);\n\t\t},\n\t\n\t\t/**\n\t  * Get the relative position of sub shapes within a parent share.\n\t  * @param bounds\n\t  * @param geometry The geometry information, the format of Geometry is:\n\t  * {\n\t  *      x: \"x coordinate of ref point, if less than 1, will be treated as the percentage of the parent width.\",\n\t  *      y: \"y coordinate of ref point.\",\n\t  *      anchorX: \"x pos of child relative to the ref point\",\n\t  *      anchorY: \"y pos of child relative to the ref point\",\n\t  *      offsetX: \"the offset in the x direction.\",\n\t  *      offsetY: \"the offset in the y direction.\",\n\t  *      width: \"the width of the child element\",\n\t  *      height: \"the height of the child element\"\n\t  * }\n\t  * @returns {*[]}\n\t  */\n\t\tgetRelativePosition: function getRelativePosition(bounds, geometry) {\n\t\t\treturn [bounds.width * geometry.x + geometry.width * geometry.anchorX + geometry.offsetX, bounds.height * geometry.y + geometry.height * geometry.anchorY + geometry.offsetY];\n\t\t},\n\t\n\t\t/**\n\t  * Get the position relative to the graph that's unscaled, i.e., absolute position without considering translation and scale.\n\t  * @param view the graph view object\n\t  * @param o can be either a Point or a Rectangle or a Point array.\n\t  */\n\t\tunscale: function unscale(view, o) {\n\t\t\tvar scale = view.scale();\n\t\t\tvar t = view.translate();\n\t\t\tif (o instanceof _Rectangle2.default) return new _Rectangle2.default(o.x * scale + t[0], o.y * scale + t[1], o.width * scale, o.height * scale);else if (o instanceof _Point2.default) return new _Point2.default(o.x * scale + t[0], o.y * scale + t[1]);else return [o[0] * scale + t[0], o[1] * scale + t[1]];\n\t\t},\n\t\n\t\t/**\n\t  * Get the position relative to the graph that's scaled, i.e., relative position considering translation and scale.\n\t  * @param view the graph view object\n\t  * @param o can be either a Point or a Rectangle or a Point array.\n\t  */\n\t\tscale: function scale(view, o) {\n\t\t\tvar scale = view.scale();\n\t\t\tvar t = view.translate();\n\t\t\tif (o instanceof _Rectangle2.default) return new _Rectangle2.default((o.x - t[0]) / scale, (o.y - t[1]) / scale, o.width / scale, o.height / scale);else if (o instanceof _Point2.default) return new _Point2.default((o.x - t[0]) / scale, (o.y - t[1]) / scale);else return [(o[0] - t[0]) / scale, (o[1] - t[1]) / scale];\n\t\t},\n\t\n\t\t/**\n\t  * Convenience method.\n\t  */\n\t\tgetObjProperty: function getObjProperty(obj, prop) {\n\t\t\tif (!obj) return null;\n\t\t\tif (_.has(obj, prop)) return obj[prop];\n\t\t\tif (obj.getProperty && _.isFunction(obj.getProperty)) return obj.getProperty(prop);\n\t\t\treturn null;\n\t\t}\n\t};\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Point = function () {\n\t\tfunction Point(x, y) {\n\t\t\t_classCallCheck(this, Point);\n\t\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\t\t}\n\t\n\t\t/**\n\t  * Make a clone of this point\n\t  */\n\t\n\t\n\t\t_createClass(Point, [{\n\t\t\tkey: \"clone\",\n\t\t\tvalue: function clone() {\n\t\t\t\treturn new Point(this.x, this.y);\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Calculate the distance from this pt to the other pt.\n\t   * @param aPt\n\t   * @returns {number}\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"distance\",\n\t\t\tvalue: function distance(aPt) {\n\t\t\t\treturn Math.sqrt((this.x - aPt.x) * (this.x - aPt.x) + (this.y - aPt.y) * (this.y - aPt.y));\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Translate this point\n\t  \t */\n\t\n\t\t}, {\n\t\t\tkey: \"translate\",\n\t\t\tvalue: function translate(p2) {\n\t\t\t\tthis.x += p2.x;\n\t\t\t\tthis.y += p2.y;\n\t\t\t\treturn this;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Scale this vector\n\t  \t */\n\t\n\t\t}, {\n\t\t\tkey: \"scale\",\n\t\t\tvalue: function scale(_scale) {\n\t\t\t\tthis.x *= _scale;\n\t\t\t\tthis.y *= _scale;\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getScaled\",\n\t\t\tvalue: function getScaled(scale) {\n\t\t\t\treturn new Point(this.x * scale, this.y * scale);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getTranslated\",\n\t\t\tvalue: function getTranslated(p2) {\n\t\t\t\treturn new Point(this.x + p2.x, this.y + p2.y);\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Get the direction vector from this point to p2.\n\t   * @param p2\n\t   * @returns {Point}\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"getDirection\",\n\t\t\tvalue: function getDirection(p2) {\n\t\t\t\tvar dist = this.distance(p2);\n\t\t\t\treturn new Point((p2.x - this.x) / dist, (p2.y - this.y) / dist);\n\t\t\t}\n\t\n\t\t\t/**\n\t   * rotate the point about the origin. With the specified angle.\n\t   * @param angle the angle to rotate\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"rotate\",\n\t\t\tvalue: function rotate(angle) {\n\t\t\t\tvar cos = Math.cos(angle * Math.PI / 180);\n\t\t\t\tvar sin = Math.sin(angle * Math.PI / 180);\n\t\t\t\tvar x = this.x,\n\t\t\t\t    y = this.y;\n\t\t\t\tthis.x = x * cos - y * sin;\n\t\t\t\tthis.y = x * sin + y * cos;\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getRotated\",\n\t\t\tvalue: function getRotated(angle) {\n\t\t\t\treturn this.clone().rotate(angle);\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Calculate the dot product, treating this and p2 as vectors.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"dotProduct\",\n\t\t\tvalue: function dotProduct(p2) {\n\t\t\t\treturn this.x * p2.x + this.y * p2.y;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Calculates the similarity of this Ray with another.\n\t   * Similarity is defined as the absolute value of the dotProduct()\n\t   * @param p2\n\t   * @returns {number}\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"similarity\",\n\t\t\tvalue: function similarity(p2) {\n\t\t\t\treturn Math.abs(this.dotProduct(p2));\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Get the mid point between this and p2.\n\t  \t */\n\t\n\t\t}, {\n\t\t\tkey: \"getMidPoint\",\n\t\t\tvalue: function getMidPoint(p2) {\n\t\t\t\treturn new Point((this.x + p2.x) / 2, (this.y + p2.y) / 2);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"reverse\",\n\t\t\tvalue: function reverse() {\n\t\t\t\tthis.x = -this.x;\n\t\t\t\tthis.y = -this.y;\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"equals\",\n\t\t\tvalue: function equals(p2) {\n\t\t\t\tif (!p2 || p2.constructor != Point) return false;\n\t\n\t\t\t\treturn this.x == p2.x && this.y == p2.y;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Reflect this point w.r.t. the rectangle.\n\t   * If vertical is true, it will reflect the point cross the vertical\n\t   * central line of the rectangle, otherwise reflect cross the horizontal\n\t   * central line.\n\t   *\n\t   * @param rect the rectangle\n\t   * @param vertical whether is vertical reflection or horizontal reflection.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"reflect\",\n\t\t\tvalue: function reflect(rect, vertical) {\n\t\t\t\tif (vertical) this.x = 2 * rect.x - this.x;else this.y = 2 * rect.y - this.y;\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"toString\",\n\t\t\tvalue: function toString() {\n\t\t\t\treturn \"Point:{x=\" + this.x + \";y=\" + this.y + \"}\";\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Point;\n\t}();\n\t\n\tPoint.W = new Point(-1, 0);\n\tPoint.N = new Point(0, -1);\n\tPoint.S = new Point(0, 1);\n\tPoint.E = new Point(1, 0);\n\tPoint.NE = new Point(1, -1);\n\tPoint.NW = new Point(-1, -1);\n\tPoint.SE = new Point(1, 1);\n\tPoint.SW = new Point(-1, 1);\n\t\n\texports.default = Point;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _lodash = __webpack_require__(5);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar _Point = __webpack_require__(3);\n\t\n\tvar _Point2 = _interopRequireDefault(_Point);\n\t\n\tvar _Shape2 = __webpack_require__(6);\n\t\n\tvar _Shape3 = _interopRequireDefault(_Shape2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Rectangle = function (_Shape) {\n\t\t_inherits(Rectangle, _Shape);\n\t\n\t\tfunction Rectangle() {\n\t\t\t_classCallCheck(this, Rectangle);\n\t\n\t\t\treturn _possibleConstructorReturn(this, Object.getPrototypeOf(Rectangle).apply(this, arguments));\n\t\t}\n\t\n\t\t_createClass(Rectangle, [{\n\t\t\tkey: \"contains\",\n\t\n\t\n\t\t\t/**\n\t   * Checks whether this rectangle contains a given point of a given rectangle\n\t   */\n\t\t\tvalue: function contains(el) {\n\t\t\t\tvar w = el.width || 0;\n\t\t\t\tvar h = el.height || 0;\n\t\t\t\tvar left = el.x - w / 2;\n\t\t\t\tvar right = el.x + w / 2;\n\t\t\t\tvar top = el.y - h / 2;\n\t\t\t\tvar bottom = el.y + h / 2;\n\t\t\t\treturn right <= this.right && left >= this.left && top >= this.top && bottom <= this.bottom;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Calcualte the distance to a point. 0 if this rectangle contains the point.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"distance\",\n\t\t\tvalue: function distance(pt) {\n\t\t\t\tif (this.contains(pt)) return 0;\n\t\n\t\t\t\tif (pt.x < this.left) {\n\t\t\t\t\tif (pt.y < this.top) return pt.distance(new _Point2.default(this.left, this.top));\n\t\t\t\t\tif (pt.y <= this.bottom) return this.left - pt.x;\n\t\t\t\t\treturn pt.distance(new _Point2.default(this.left, this.bottom));\n\t\t\t\t}\n\t\t\t\tif (pt.x <= this.right) {\n\t\t\t\t\tif (pt.y <= this.top) return this.top - pt.y;\n\t\t\t\t\treturn pt.y - this.bottom;\n\t\t\t\t}\n\t\t\t\tif (pt.y < this.top) return pt.distance(new _Point2.default(this.right, this.top));\n\t\t\t\tif (pt.y <= this.bottom) return pt.x - this.right;\n\t\t\t\treturn pt.distance(new _Point2.default(this.right, this.bottom));\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Given two points, we want to detect whether the line joining the pts intersect\n\t   * with the rectangle or not. We assume only horizontal or vertical line segments.\n\t   *\n\t   * @return int the side of the intersection: -1: no intersection, 0: left, 1: top, 2: right, 3: bottom, 4: containment.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"detectIntersection\",\n\t\t\tvalue: function detectIntersection(pt1, pt2) {\n\t\t\t\tvar horizontal = pt1.y == pt2.y;\n\t\t\t\tvar contains1 = this.contains(pt1);\n\t\t\t\tvar contains2 = this.contains(pt2);\n\t\t\t\tif (contains1 && contains2) return 4;\n\t\t\t\tif (!contains1 && !contains2) {\n\t\t\t\t\tif (horizontal && pt1.y >= this.top && pt1.y <= this.bottom) {\n\t\t\t\t\t\tif (pt1.x < this.left && pt2.x > this.right) return 0;\n\t\t\t\t\t\tif (pt1.x > this.right && pt2.x < this.left) return 2;\n\t\t\t\t\t}\n\t\t\t\t\tif (!horizontal && pt1.x >= this.left && pt1.x <= this.right) {\n\t\t\t\t\t\tif (pt1.y < this.top && pt2.y > this.bottom) return 1;\n\t\t\t\t\t\tif (pt1.y > this.bottom && pt2.y < this.top) return 3;\n\t\t\t\t\t}\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\n\t\t\t\tvar outPt = contains1 ? pt2 : pt1;\n\t\t\t\tif (horizontal) {\n\t\t\t\t\tif (outPt.x > this.right) return 2;\n\t\t\t\t\treturn 0;\n\t\t\t\t} else {\n\t\t\t\t\tif (outPt.y < this.top) return 1;\n\t\t\t\t\treturn 3;\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"toString\",\n\t\t\tvalue: function toString() {\n\t\t\t\treturn 'Rectangle:{x=' + this.x + ';y=' + this.y + ';width=' + this.width + ';height=' + this.height + '}';\n\t\t\t}\n\t\t}], [{\n\t\t\tkey: \"getBoundingRectangle\",\n\t\n\t\n\t\t\t/**\n\t   * Return the bounding rectangle that contains p1 and p2\n\t   */\n\t\t\tvalue: function getBoundingRectangle(pts, margin) {\n\t\t\t\tif (!pts || pts.length == 0) return null;\n\t\t\t\tmargin = margin || [0, 0, 0, 0];\n\t\t\t\tif (!_lodash2.default.isArray(margin)) margin = [margin, margin, margin, margin];\n\t\t\t\tvar min = [pts[0].x, pts[0].y];\n\t\t\t\tvar max = [pts[0].x, pts[0].y];\n\t\t\t\tfor (var i = 1; i < pts.length; i++) {\n\t\t\t\t\tvar p = pts[i];\n\t\t\t\t\tif (p.x < min[0]) {\n\t\t\t\t\t\tmin[0] = p.x;\n\t\t\t\t\t}\n\t\t\t\t\tif (p.y < min[1]) {\n\t\t\t\t\t\tmin[1] = p.y;\n\t\t\t\t\t}\n\t\t\t\t\tif (p.x > max[0]) {\n\t\t\t\t\t\tmax[0] = p.x;\n\t\t\t\t\t}\n\t\t\t\t\tif (p.y > max[1]) {\n\t\t\t\t\t\tmax[1] = p.y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tmin[0] = min[0] - margin[0];\n\t\t\t\tmin[1] = min[1] - margin[1];\n\t\t\t\tmax[0] = max[0] + margin[2];\n\t\t\t\tmax[1] = max[1] + margin[3];\n\t\t\t\tvar w = Math.abs(max[0] - min[0]);\n\t\t\t\tvar h = Math.abs(max[1] - min[1]);\n\t\t\t\treturn new Rectangle(min[0] + w / 2, min[1] + h / 2, w, h);\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Create a union of all the rectangles.\n\t   * @param rects\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"union\",\n\t\t\tvalue: function union(rects) {\n\t\t\t\tvar minx = null,\n\t\t\t\t    miny = null,\n\t\t\t\t    maxx = -Infinity,\n\t\t\t\t    maxy = -Infinity;\n\t\t\t\t_lodash2.default.each(rects, function (rect) {\n\t\t\t\t\tminx = minx || rect.x;\n\t\t\t\t\tminy = miny || rect.y;\n\t\t\t\t\tminx = Math.min(minx, rect.x);\n\t\t\t\t\tminy = Math.min(miny, rect.y);\n\t\t\t\t\tmaxx = Math.max(maxx, rect.right());\n\t\t\t\t\tmaxy = Math.max(maxy, rect.bottom());\n\t\t\t\t});\n\t\t\t\tminx = minx || 0;\n\t\t\t\tminy = miny || 0;\n\t\t\t\treturn new Rectangle(minx, miny, maxx - minx, maxy - miny);\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Rectangle;\n\t}(_Shape3.default);\n\n\texports.default = Rectangle;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Rectangle = __webpack_require__(4);\n\t\n\tvar _Rectangle2 = _interopRequireDefault(_Rectangle);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar registry = {};\n\t\n\tvar Shape = function () {\n\t\tfunction Shape(x, y, width, height) {\n\t\t\t_classCallCheck(this, Shape);\n\t\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\t\t\tthis.width = width;\n\t\t\tthis.height = height;\n\t\t}\n\t\n\t\t/**\n\t  * Return the y-coord of the top side of this rectangle\n\t  */\n\t\n\t\n\t\t_createClass(Shape, [{\n\t\t\tkey: \"top\",\n\t\t\tget: function get() {\n\t\t\t\treturn this.y - this.height / 2;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Returns the y-coordinate of the bottom of this Rectangle.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"bottom\",\n\t\t\tget: function get() {\n\t\t\t\treturn this.y + this.height / 2;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Return the x-coord of left side of this rectangle\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"left\",\n\t\t\tget: function get() {\n\t\t\t\treturn this.x - this.width / 2;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Returns the x-coordinate of the right side of this Rectangle.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"right\",\n\t\t\tget: function get() {\n\t\t\t\treturn this.x + this.width / 2;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"bounds\",\n\t\t\tget: function get() {\n\t\t\t\treturn new _Rectangle2.default(this.x, this.y, this.width, this.height);\n\t\t\t}\n\t\t}], [{\n\t\t\tkey: \"getShape\",\n\t\t\tvalue: function getShape(name) {\n\t\t\t\treturn registry[name];\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"addShape\",\n\t\t\tvalue: function addShape(name, c) {\n\t\t\t\tregistry[name] = c;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"removeShape\",\n\t\t\tvalue: function removeShape(name) {\n\t\t\t\tdelete registry[name];\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Shape;\n\t}();\n\t\n\texports.default = Shape;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _lodash = __webpack_require__(5);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * dom Utility functions\n\t */\n\texports.default = {\n\t\tisIE: function () {\n\t\t\tvar isIE = false,\n\t\t\t    version = null,\n\t\t\t    window = window || {},\n\t\t\t    navigator = navigator || { userAgent: \"\" };\n\t\t\tif (Object.hasOwnProperty.call(window, \"ActiveXObject\") && !window.ActiveXObject) {\n\t\t\t\tisIE = true;\n\t\t\t\tversion = 11;\n\t\t\t} else {\n\t\t\t\tvar myNav = navigator.userAgent.toLowerCase();\n\t\t\t\tisIE = myNav.indexOf('msie') != -1;\n\t\t\t\tif (isIE) version = parseInt(myNav.split('msie')[1]);\n\t\t\t}\n\t\n\t\t\treturn function () {\n\t\t\t\treturn isIE ? version : false;\n\t\t\t};\n\t\t}(),\n\t\n\t\tisFireFox: function () {\n\t\t\t// InstallTrigger: Firefox's API to install add-ons\n\t\t\treturn typeof InstallTrigger !== 'undefined';\n\t\t}(),\n\t\n\t\tcreateElement: function createElement(tag, attribs, styles, html) {\n\t\t\tvar el = document.createElement(tag);\n\t\t\tthis.setElement(el, attribs, styles);\n\t\t\tif (html) el.innerHTML = html;\n\t\t\treturn el;\n\t\t},\n\t\n\t\tcreateElementByString: function createElementByString(str) {\n\t\t\tvar temp = this.createElement('div', null, null, str);\n\t\t\treturn temp.childNodes;\n\t\t},\n\t\n\t\tsetElement: function setElement(el, attribs, styles) {\n\t\t\tif (attribs) {\n\t\t\t\t_lodash2.default.forEach(attribs, function (value, key) {\n\t\t\t\t\tel.setAttribute(key, value);\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (styles) {\n\t\t\t\t_lodash2.default.forEach(styles, function (value, key) {\n\t\t\t\t\tel.style[key] = value;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\n\t\ttestElement: function testElement(node, method) {\n\t\t\treturn node && node.nodeType == 1 && (!method || method(node));\n\t\t},\n\t\n\t\tgetAncestorBy: function getAncestorBy(node, method) {\n\t\t\twhile (node = node.parentNode) {\n\t\t\t\tif (this.testElement(node, method)) return node;\n\t\t\t}return null;\n\t\t},\n\t\n\t\t/**\n\t  * Get the position of element relative to the context.\n\t  * @param el the element\n\t  * @param context\n\t  * @returns {*[]}\n\t  */\n\t\tgetPosition: function getPosition(el, context) {\n\t\t\tif (!context) context = document.body;\n\t\t\tvar elRect = el.getBoundingClientRect();\n\t\t\tvar contextRect = context.getBoundingClientRect();\n\t\n\t\t\treturn [elRect.left - contextRect.left, elRect.top - contextRect.top];\n\t\t},\n\t\tgetCenterPosition: function getCenterPosition(el, context) {\n\t\t\tif (!context) context = document.body;\n\t\t\tvar elRect = el.getBoundingClientRect();\n\t\t\tvar contextRect = context.getBoundingClientRect();\n\t\t\tvar w = elRect.right - elRect.left;\n\t\t\tvar h = elRect.bottom - elRect.top;\n\t\n\t\t\treturn [elRect.left - contextRect.left + w / 2, elRect.top - contextRect.top + h / 2];\n\t\t},\n\t\n\t\n\t\tmove: function move(el, x, y) {\n\t\t\tif (x) el.style.left = x + 'px';\n\t\t\tif (y) el.style.top = y + 'px';\n\t\t},\n\t\n\t\tgetSize: function getSize(el) {\n\t\t\tvar w = parseInt(el.style.offsetWidth, 10);\n\t\t\tvar h = parseInt(el.style.offsetHeight, 10);\n\t\t\treturn [w, h];\n\t\t},\n\t\n\t\tresize: function resize(el, w, h) {\n\t\t\tif (w) el.style.width = w + \"px\";\n\t\t\tif (h) el.style.height = h + 'px';\n\t\t},\n\t\n\t\tpreloadImages: function preloadImages(array) {\n\t\t\tif (!this.preloadImages.list) this.preloadImages.list = [];\n\t\t\tif (!this.preloadImages.loaded) this.preloadImages.loaded = {};\n\t\n\t\t\tvar list = this.preloadImages.list;\n\t\t\tvar img,\n\t\t\t    that = this;\n\t\t\tfor (var i = 0; i < array.length; i++) {\n\t\t\t\timg = new Image();\n\t\t\t\timg.onload = function () {\n\t\t\t\t\tvar index = list.indexOf(this);\n\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\tthat.preloadImages.loaded[this.name] = { width: this.width, height: this.height };\n\t\t\t\t\t\t// remove image from the array once it's loaded\n\t\t\t\t\t\t// for memory consumption reasons\n\t\t\t\t\t\tlist.splice(index, 1);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tlist.push(img);\n\t\t\t\timg.src = array[i];\n\t\t\t\timg.name = array[i];\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t  * Get's the image's information given the url. Must be preloaded by calling the preloadImage function.\n\t  * @param src\n\t  */\n\t\tgetImageInfo: function getImageInfo(src) {\n\t\t\tif (this.preloadImages.loaded) {\n\t\t\t\treturn this.preloadImages.loaded[src];\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\n\t\t/**\n\t  * Check whether the key event is from input, textarea or select.\n\t  * @param e  input event\n\t  */\n\t\teventFromInput: function eventFromInput(e) {\n\t\t\tvar tagName = e.target.tagName;\n\t\t\treturn tagName == 'INPUT' || tagName == 'TEXTAREA' || tagName == 'SELECT';\n\t\t}\n\t};\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _lodash = __webpack_require__(5);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t/**\n\t * A string buffer for fast string manipulation\n\t */\n\t\n\tvar StringBuffer = function () {\n\t\tfunction StringBuffer(str) {\n\t\t\t_classCallCheck(this, StringBuffer);\n\t\n\t\t\tthis.buffer = [];\n\t\t\tif (str) this.buffer.push(str);\n\t\t}\n\t\n\t\t_createClass(StringBuffer, [{\n\t\t\tkey: \"append\",\n\t\t\tvalue: function append(stuff) {\n\t\t\t\tif (_lodash2.default.isString(stuff)) this.buffer.push(stuff);else if (_lodash2.default.isArray(stuff)) this.buffer = this.buffer.concat(stuff);else this.buffer.push(\"\" + stuff);\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"prepend\",\n\t\t\tvalue: function prepend(stuff) {\n\t\t\t\tif (_lodash2.default.isString(stuff)) this.buffer.splice(0, 0, stuff);else if (_lodash2.default.isArray(stuff)) this.buffer = stuff.concat(this.buffer);else this.buffer.splice(0, 0, \"\" + stuff);\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"clear\",\n\t\t\tvalue: function clear() {\n\t\t\t\tthis.buffer = [];\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"removeLast\",\n\t\t\tvalue: function removeLast() {\n\t\t\t\tthis.buffer.pop();\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"toString\",\n\t\t\tvalue: function toString(sep) {\n\t\t\t\tif (!sep) sep = '';\n\t\t\t\treturn this.buffer.join(sep);\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn StringBuffer;\n\t}();\n\n\texports.default = StringBuffer;\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Point = __webpack_require__(3);\n\t\n\tvar _Point2 = _interopRequireDefault(_Point);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Line = function () {\n\t\tfunction Line(start, end) {\n\t\t\t_classCallCheck(this, Line);\n\t\n\t\t\tthis.start = start;\n\t\t\tthis.end = end;\n\t\t}\n\t\n\t\t/**\n\t  * Calculate the length of this line\n\t  */\n\t\n\t\n\t\t_createClass(Line, [{\n\t\t\tkey: 'length',\n\t\t\tvalue: function length() {\n\t\t\t\treturn this.start.distance(this.end);\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Calculate the distance of this line to the point.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'distance',\n\t\t\tvalue: function distance(pt) {\n\t\t\t\tvar x = this.start.distance(pt);\n\t\t\t\tif (x == 0) return 0;\n\t\n\t\t\t\tvar l = this.length();\n\t\t\t\tvar cosa = new _Point2.default((this.end.x - this.start.x) / l, (this.end.y - this.start.y) / l).dotProduct(new _Point2.default(pt.x / x, pt.y / x));\n\t\n\t\t\t\treturn x * Math.sqrt(1 - cosa * cosa);\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Function: intersection\n\t   *\n\t   * Returns the intersection of two lines as an <mxPoint>.\n\t   *\n\t   * Parameters:\n\t   *\n\t   * x0 - X-coordinate of the first line's startpoint.\n\t   * y0 - X-coordinate of the first line's startpoint.\n\t   * x1 - X-coordinate of the first line's endpoint.\n\t   * y1 - Y-coordinate of the first line's endpoint.\n\t   * x2 - X-coordinate of the second line's startpoint.\n\t   * y2 - Y-coordinate of the second line's startpoint.\n\t   * x3 - X-coordinate of the second line's endpoint.\n\t   * y3 - Y-coordinate of the second line's endpoint.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'toString',\n\t\t\tvalue: function toString() {\n\t\t\t\treturn 'Line:{start=' + this.start + ';end=' + this.end + '}';\n\t\t\t}\n\t\t}], [{\n\t\t\tkey: 'intersection',\n\t\t\tvalue: function intersection(x0, y0, x1, y1, x2, y2, x3, y3) {\n\t\t\t\tvar denom = (y3 - y2) * (x1 - x0) - (x3 - x2) * (y1 - y0);\n\t\t\t\tvar nume_a = (x3 - x2) * (y0 - y2) - (y3 - y2) * (x0 - x2);\n\t\t\t\tvar nume_b = (x1 - x0) * (y0 - y2) - (y1 - y0) * (x0 - x2);\n\t\n\t\t\t\tvar ua = nume_a / denom;\n\t\t\t\tvar ub = nume_b / denom;\n\t\n\t\t\t\tif (ua >= 0.0 && ua <= 1.0 && ub >= 0.0 && ub <= 1.0) {\n\t\t\t\t\t// Get the intersection point\n\t\t\t\t\tvar intersectionX = x0 + ua * (x1 - x0);\n\t\t\t\t\tvar intersectionY = y0 + ua * (y1 - y0);\n\t\n\t\t\t\t\treturn new _Point2.default(intersectionX, intersectionY);\n\t\t\t\t}\n\t\n\t\t\t\t// No intersection\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Line;\n\t}();\n\n\texports.default = Line;\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Shape2 = __webpack_require__(6);\n\t\n\tvar _Shape3 = _interopRequireDefault(_Shape2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Ellipse = function (_Shape) {\n\t\t_inherits(Ellipse, _Shape);\n\t\n\t\tfunction Ellipse() {\n\t\t\t_classCallCheck(this, Ellipse);\n\t\n\t\t\treturn _possibleConstructorReturn(this, Object.getPrototypeOf(Ellipse).apply(this, arguments));\n\t\t}\n\t\n\t\t_createClass(Ellipse, [{\n\t\t\tkey: 'toString',\n\t\t\tvalue: function toString() {\n\t\t\t\treturn 'Ellipse:{x=' + this.x + ';y=' + this.y + ';width=' + this.width + ';height=' + this.height + '}';\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Ellipse;\n\t}(_Shape3.default);\n\n\texports.default = Ellipse;\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _lodash = __webpack_require__(5);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar _bean = __webpack_require__(1);\n\t\n\tvar _bean2 = _interopRequireDefault(_bean);\n\t\n\tvar _KeyUtils = __webpack_require__(12);\n\t\n\tvar KeyUtils = _interopRequireWildcard(_KeyUtils);\n\t\n\tvar _DomUtils = __webpack_require__(7);\n\t\n\tvar _DomUtils2 = _interopRequireDefault(_DomUtils);\n\t\n\tvar _Utils = __webpack_require__(2);\n\t\n\tvar _Utils2 = _interopRequireDefault(_Utils);\n\t\n\tvar _StringBuffer = __webpack_require__(8);\n\t\n\tvar _StringBuffer2 = _interopRequireDefault(_StringBuffer);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar EventDispatcher = function () {\n\t\t/**\n\t  * Constructor\n\t  * @param root the root element that the manager will listen to.\n\t  * @param zoomScale\n\t  */\n\t\n\t\tfunction EventDispatcher(root) {\n\t\t\tvar zoomScale = arguments.length <= 1 || arguments[1] === undefined ? [0, Infinity] : arguments[1];\n\t\n\t\t\t_classCallCheck(this, EventDispatcher);\n\t\n\t\t\tthis.root = root;\n\t\t\tthis.rootNS = root.getAttribute('ns') || 'root';\n\t\t\tthis.zoomScale = zoomScale;\n\t\t\tthis.scale = 1.0;\n\t\t\tthis.listeners = {};\n\t\t\tthis.dragging = false;\n\t\t\tthis.handler = _lodash2.default.bind(this.handleEvent, this);\n\t\t\tthis.started = false;\n\t\n\t\t\t// Simulate mouseenter/mouseleave events\n\t\t\tthis.enterStack = [];\n\t\t}\n\t\n\t\t/**\n\t  * Start listening for events.\n\t  */\n\t\n\t\n\t\t_createClass(EventDispatcher, [{\n\t\t\tkey: \"start\",\n\t\t\tvalue: function start() {\n\t\t\t\tif (this.started) return;\n\t\t\t\t_bean2.default.on(this.root, 'mousedown mouseover mouseout mouseenter mouseleave dblclick click contextmenu mousewheel', this.handler);\n\t\t\t\tthis.startKeys();\n\t\t\t\tthis.started = true;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Stop listening for events.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"stop\",\n\t\t\tvalue: function stop() {\n\t\t\t\tif (!this.started) return;\n\t\t\t\t_bean2.default.off(this.root, 'mousedown mouseover mouseout mouseenter mouseleave dblclick click contextmenu mousewheel', this.handler);\n\t\t\t\tthis.stopKeys();\n\t\t\t\tthis.started = false;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"startKeys\",\n\t\t\tvalue: function startKeys() {\n\t\t\t\t_bean2.default.on(document, 'keydown keyup', this.handler);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"stopKeys\",\n\t\t\tvalue: function stopKeys() {\n\t\t\t\t_bean2.default.off(document, 'keydown keyup', this.handler);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getEventInfo\",\n\t\t\tvalue: function getEventInfo(event) {\n\t\t\t\tvar target = event.target;\n\t\t\t\tvar buf = new _StringBuffer2.default(),\n\t\t\t\t    ns = void 0,\n\t\t\t\t    stack = [],\n\t\t\t\t    isRoot = false;\n\t\t\t\twhile (!isRoot && target && target != document) {\n\t\t\t\t\tns = target.getAttribute('ns');\n\t\t\t\t\tif (ns) {\n\t\t\t\t\t\tisRoot = _lodash2.default.startsWith(ns, \"root.\");\n\t\t\t\t\t\tif (isRoot) {\n\t\t\t\t\t\t\tns = ns.substring(5);\n\t\t\t\t\t\t\tevent.rootTarget = target;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!event.nsTarget) event.nsTarget = target;\n\t\t\t\t\t\tstack.splice(0, 0, target);\n\t\t\t\t\t\tbuf.prepend(ns);\n\t\t\t\t\t}\n\t\t\t\t\ttarget = target.parentNode;\n\t\t\t\t}\n\t\t\t\tif (!isRoot) event.rootTarget = event.nsTarget;\n\t\n\t\t\t\t// target stack is a stack of all the ns targets up to the one with the data binding.\n\t\t\t\tevent.targetStack = stack;\n\t\t\t\tns = buf.toString('.');\n\t\t\t\tif (ns == '') ns = this.rootNS;\n\t\t\t\treturn { data: event.rootTarget, ns: ns };\n\t\t\t}\n\t\n\t\t\t/**\n\t   * The main event handler method, it processes event and generate relevant events to dispatch.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"handleEvent\",\n\t\t\tvalue: function handleEvent(event) {\n\t\t\t\tvar _this = this;\n\t\n\t\t\t\tvar type = event.type;\n\t\n\t\t\t\t// Do not dispatch other events if we are dragging.\n\t\t\t\tif (this.dragging || _DomUtils2.default.eventFromInput(event)) return;\n\t\n\t\t\t\tvar data = void 0,\n\t\t\t\t    ns = void 0,\n\t\t\t\t    pos = this.getPosition(event),\n\t\t\t\t    info = void 0,\n\t\t\t\t    isKeyEvent = type == 'keydown' || type == 'keyup';\n\t\t\t\tif (isKeyEvent) {\n\t\t\t\t\tdata = this.root;\n\t\t\t\t\tns = KeyUtils.getKeyEvent(event);\n\t\t\t\t} else {\n\t\t\t\t\tinfo = this.getEventInfo(event);\n\t\t\t\t\tif (!info) return;\n\t\t\t\t\tdata = info.data;\n\t\t\t\t\tns = info.ns;\n\t\t\t\t}\n\t\n\t\t\t\t//Utils.log('EventDispatcher', \"handleEvent - \" + type + ';ns=' + ns);\n\t\n\t\t\t\tif (type == 'mousewheel') {\n\t\t\t\t\tthis.scale *= Math.pow(2, event.wheelDelta * 0.002);\n\t\t\t\t\tthis.scale = Math.max(Math.min(this.zoomScale[1], this.scale), this.zoomScale[0]);\n\t\t\t\t\tevent.scale = this.scale;\n\t\t\t\t\ttype = 'zoom';\n\t\t\t\t}\n\t\n\t\t\t\t// See if we should create drag events\n\t\t\t\tif (type == 'mousedown' && event.button == 0 /*only drag on left click*/) {\n\t\t\t\t\t\t(function () {\n\t\t\t\t\t\t\t// Create drag object.\n\t\t\t\t\t\t\tvar dragObject = { data: data, pos: ns == 'root' ? EventDispatcher.mouse(_this.root, event) : pos };\n\t\t\t\t\t\t\t_this.dragging = false;\n\t\t\t\t\t\t\t// Start listening for mouse move.\n\t\t\t\t\t\t\tvar dragPos = void 0;\n\t\n\t\t\t\t\t\t\tvar mousemove = function mousemove(event) {\n\t\t\t\t\t\t\t\tvar currentPos = _this.getPosition(event);\n\t\t\t\t\t\t\t\tif (!_this.dragging) {\n\t\t\t\t\t\t\t\t\t// check if the mouse has moved. IE always fire mousemove after mousedown even if the mouse hasn't moved yet.\n\t\t\t\t\t\t\t\t\tif (dragObject.pos[0] == currentPos[0] && dragObject.pos[1] == currentPos[1]) return;\n\t\n\t\t\t\t\t\t\t\t\t// start dragging\n\t\t\t\t\t\t\t\t\t_this.dragging = true;\n\t\t\t\t\t\t\t\t\tevent.rootTarget = dragObject.data;\n\t\t\t\t\t\t\t\t\t_this.dispatch(event, 'dragstart', ns, dragObject.data, dragObject.pos);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (ns == \"root\") dragPos = EventDispatcher.mouse(_this.root, event);else dragPos = currentPos;\n\t\t\t\t\t\t\t\t_this.getEventInfo(event);\n\t\t\t\t\t\t\t\t_this.dispatch(event, 'drag', ns, dragObject.data, dragPos);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tvar mouseup = function mouseup(event) {\n\t\t\t\t\t\t\t\tif (ns == \"root\") dragPos = EventDispatcher.mouse(_this.root, event);else dragPos = _this.getPosition(event);\n\t\n\t\t\t\t\t\t\t\tvar info = _this.getEventInfo(event);\n\t\t\t\t\t\t\t\tif (_this.dragging) {\n\t\t\t\t\t\t\t\t\t_this.dragging = false;\n\t\t\t\t\t\t\t\t\t_this.dispatch(event, 'dragend', ns, dragObject.data, dragPos);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t_this.dispatch(event, 'mouseup', ns, info.data, dragPos);\n\t\t\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\t\t\t_bean2.default.off(window, 'mousemove', mousemove);\n\t\t\t\t\t\t\t\t_bean2.default.off(window, 'mouseup', mouseup);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\t_bean2.default.on(window, 'mousemove', mousemove);\n\t\t\t\t\t\t\t_bean2.default.on(window, 'mouseup', mouseup);\n\t\t\t\t\t\t})();\n\t\t\t\t\t}\n\t\n\t\t\t\tif (!isKeyEvent) this.simulateEnterLeave(event, type, ns, data, pos);\n\t\t\t\tthis.dispatch(event, type, ns, data, pos);\n\t\n\t\t\t\t// disable the default context menu\n\t\t\t\tif (type == 'contextmenu') event.preventDefault();\n\t\t\t}\n\t\n\t\t\t/**\n\t   * try to simulate mouseenter/mouseleave events.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"simulateEnterLeave\",\n\t\t\tvalue: function simulateEnterLeave(event, type, ns, data, pos) {\n\t\t\t\tvar _this2 = this;\n\t\n\t\t\t\tvar last = void 0,\n\t\t\t\t    stack = void 0;\n\t\t\t\tvar clearEnterStack = function clearEnterStack(k) {\n\t\t\t\t\tk = k || 0;\n\t\t\t\t\t// Clear off the enter stack.\n\t\t\t\t\twhile (_this2.enterStack.length >= k + 1) {\n\t\t\t\t\t\tlast = _this2.enterStack.pop();\n\t\t\t\t\t\t_this2.dispatch(event, 'mouseleave', last.ns, last.data, pos);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tvar getNS = function getNS(index) {\n\t\t\t\t\tvar buf = new _StringBuffer2.default();\n\t\t\t\t\tfor (var i = 0; i <= index; i++) {\n\t\t\t\t\t\tvar val = stack[i].getAttribute(\"ns\");\n\t\t\t\t\t\tif (_lodash2.default.startsWith(val, \"root.\")) val = val.substring(5);\n\t\t\t\t\t\tbuf.append(val);\n\t\t\t\t\t}\n\t\t\t\t\treturn buf.toString('.');\n\t\t\t\t};\n\t\n\t\t\t\tif (ns && ns != this.rootNS) {\n\t\t\t\t\tif (type == 'mouseover') {\n\t\t\t\t\t\tstack = event.targetStack;\n\t\t\t\t\t\tvar item = void 0;\n\t\t\t\t\t\tfor (var i = 0; i < stack.length; i++) {\n\t\t\t\t\t\t\tif (i < this.enterStack.length) {\n\t\t\t\t\t\t\t\tif (this.enterStack[i].target != stack[i]) {\n\t\t\t\t\t\t\t\t\tclearEnterStack(i);\n\t\t\t\t\t\t\t\t} else continue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\titem = { data: data, ns: getNS(i), target: stack[i] };\n\t\t\t\t\t\t\tthis.enterStack.push(item);\n\t\t\t\t\t\t\tthis.dispatch(event, 'mouseenter', item.ns, data, pos);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (stack.length < this.enterStack.length) clearEnterStack(stack.length);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (ns == this.rootNS && this.enterStack.length > 0) clearEnterStack();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"dispatch\",\n\t\t\tvalue: function dispatch(event, type, ns, data, pos) {\n\t\t\t\t//if (type != 'mouseover' && type != 'mouseout')\n\t\t\t\t//\tUtils.log('EventDispatcher', \"dispatch - \" + type + '.' + ns + ';' + pos + ';rootTarget=' + event.rootTarget + ';data=' + data);\n\t\t\t\tif (!this.started) return;\n\t\t\t\tvar nsType = ns ? type + '.' + ns : type;\n\t\t\t\t_lodash2.default.forEach(this.listeners, function (listeners, key) {\n\t\t\t\t\tif (EventDispatcher.match(nsType, key)) {\n\t\t\t\t\t\t_lodash2.default.forEach(listeners, function (listener) {\n\t\t\t\t\t\t\tif (!listener.context) listener.callback.apply(window, [type, ns, data, pos, event]);else listener.callback.apply(listener.context, [type, ns, data, pos, event]);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\n\t\t\t\t// after dispatching, do not propagate.\n\t\t\t\tif (event.stopPropagation) event.stopPropagation();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getPosition\",\n\t\t\tvalue: function getPosition(event) {\n\t\t\t\tvar pos = EventDispatcher.mouse(this.root, event);\n\t\t\t\tif (!_lodash2.default.isNaN(pos[0]) && !_lodash2.default.isNaN(pos[1])) this.lastPosition = pos;\n\t\t\t\treturn this.lastPosition;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Registers a key event handler\n\t   * // Key is object {ctrl, alt, shift, meta, code}\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"registerKey\",\n\t\t\tvalue: function registerKey(type, key, callback, context) {\n\t\t\t\tvar _this3 = this;\n\t\n\t\t\t\tif (_lodash2.default.isArray(key)) {\n\t\t\t\t\t_lodash2.default.forEach(key, function (k) {\n\t\t\t\t\t\t_this3.registerKey(type, k, callback, context);\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tkey = KeyUtils.getKeyData(key.ctrl, key.alt, key.shift, key.meta, key.code);\n\t\t\t\tif (!key.length) return;\n\t\t\t\tkey = new _StringBuffer2.default(type).append(key).toString('.');\n\t\n\t\t\t\tvar listener = { callback: callback, context: context };\n\t\t\t\tthis.listeners[key] || (this.listeners[key] = []);\n\t\t\t\tthis.listeners[key].push(listener);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"unregisterKey\",\n\t\t\tvalue: function unregisterKey(type, key, callback, context) {\n\t\t\t\tvar _this4 = this;\n\t\n\t\t\t\tif (_lodash2.default.isArray(key)) {\n\t\t\t\t\t_lodash2.default.forEach(key, function (k) {\n\t\t\t\t\t\t_this4.unregisterKey(type, k, callback, context);\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tkey = KeyUtils.getKeyData(key.ctrl, key.alt, key.shift, key.meta, key.code);\n\t\t\t\tif (!key.length) return;\n\t\t\t\tkey = new _StringBuffer2.default(type).append(key).toString('.');\n\t\n\t\t\t\tvar listeners = this.listeners[key],\n\t\t\t\t    listener = void 0;\n\t\t\t\tif (!listeners) return;\n\t\t\t\tfor (var i = 0; i < listeners.length; i++) {\n\t\t\t\t\tlistener = listeners[i];\n\t\t\t\t\tif (listener.callback === callback && (!context || context === listener.context)) {\n\t\t\t\t\t\tlisteners.splice(i, 1);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Registers an event handler\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"register\",\n\t\t\tvalue: function register(type, callback, context, zIndex) {\n\t\t\t\tvar _this5 = this;\n\t\n\t\t\t\tif (_lodash2.default.isArray(type)) {\n\t\t\t\t\t_lodash2.default.forEach(type, function (t) {\n\t\t\t\t\t\t_this5.register(t, callback, context, zIndex);\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar listener = { callback: callback, context: context, zIndex: zIndex };\n\t\t\t\tthis.listeners[type] || (this.listeners[type] = []);\n\t\t\t\tthis.listeners[type].push(listener);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"unregister\",\n\t\t\tvalue: function unregister(type, callback, context) {\n\t\t\t\tvar listeners = this.listeners[type],\n\t\t\t\t    listener = void 0;\n\t\t\t\tif (!listeners) return;\n\t\t\t\tfor (var i = 0; i < listeners.length; i++) {\n\t\t\t\t\tlistener = listeners[i];\n\t\t\t\t\tif (listener.callback === callback && (!context || context === listener.context)) {\n\t\t\t\t\t\tlisteners.splice(i, 1);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"destroy\",\n\t\t\tvalue: function destroy() {\n\t\t\t\tthis.stop();\n\t\t\t\tdelete this.root;\n\t\t\t\tdelete this.listeners;\n\t\t\t\tdelete this.enterStack;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Check if the registered event type matches the real event type. \"*\" is allowed as a wild card.\n\t   */\n\t\n\t\t}], [{\n\t\t\tkey: \"match\",\n\t\t\tvalue: function match(nsType, registeredType) {\n\t\t\t\tvar arr = registeredType.split('*');\n\t\t\t\tif (arr.length == 1) return nsType == registeredType;\n\t\n\t\t\t\tvar substr = void 0,\n\t\t\t\t    index = 0;\n\t\t\t\tfor (var i = 0; i < arr.length; i++) {\n\t\t\t\t\tif (arr[i].length == 0) continue;\n\t\t\t\t\tsubstr = nsType.slice(index);\n\t\t\t\t\tindex = substr.indexOf(arr[i]);\n\t\t\t\t\tif (index < 0) return false;\n\t\t\t\t\tindex += arr[i].length;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"mouse\",\n\t\t\tvalue: function mouse(container, e) {\n\t\t\t\tif (e.changedTouches) e = e.changedTouches[0];\n\t\t\t\tvar svg = container.ownerSVGElement || container;\n\t\t\t\tif (svg.createSVGPoint) {\n\t\t\t\t\tvar point = svg.createSVGPoint();\n\t\t\t\t\tpoint.x = e.clientX;point.y = e.clientY;\n\t\t\t\t\tpoint = point.matrixTransform(container.getScreenCTM().inverse());\n\t\t\t\t\treturn [point.x, point.y];\n\t\t\t\t}\n\t\t\t\tvar rect = container.getBoundingClientRect();\n\t\t\t\treturn [e.clientX - rect.left - container.clientLeft, e.clientY - rect.top - container.clientTop];\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn EventDispatcher;\n\t}();\n\n\texports.default = EventDispatcher;\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.getKeyEvent = getKeyEvent;\n\texports.getKeyData = getKeyData;\n\t\n\tvar _StringBuffer = __webpack_require__(8);\n\t\n\tvar _StringBuffer2 = _interopRequireDefault(_StringBuffer);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * KEY constant\n\t */\n\tvar KEY = {\n\t\tALT: 18,\n\t\tBACK_SPACE: 8,\n\t\tCAPS_LOCK: 20,\n\t\tCONTROL: 17,\n\t\tDELETE: 46,\n\t\tDOWN: 40,\n\t\tEND: 35,\n\t\tENTER: 13,\n\t\tESCAPE: 220,\n\t\tHOME: 36,\n\t\tLEFT: 37,\n\t\tMETA: 224,\n\t\tNUM_LOCK: 144,\n\t\tPAGE_DOWN: 34,\n\t\tPAGE_UP: 33,\n\t\tPAUSE: 19,\n\t\tPRINTSCREEN: 44,\n\t\tRIGHT: 39,\n\t\tSCROLL_LOCK: 145,\n\t\tSHIFT: 16,\n\t\tSPACE: 32,\n\t\tTAB: 9,\n\t\tUP: 38\n\t\t//ADD          : DomUtils.isFireFox ? 61  : 187,\n\t\t//SUBTRACT     : DomUtils.isFireFox ? 173 : 189\n\t}; ///////////////////////////////////////////////////////////////////////////////\n\t//                                                                           //\n\t//           The Key Utility CLass for the Event Dispatcher          \t     //\n\t//                                                                           //\n\t///////////////////////////////////////////////////////////////////////////////\n\t\n\tfunction getKeyEvent(event) {\n\t\tif (!event || !event instanceof KeyboardEvent) {\n\t\t\treturn null;\n\t\t}\n\t\n\t\tvar key = event.keyCode || event.which;\n\t\n\t\t// Need to find a way to avoid this\n\t\tif (key >= 16 && key <= 18) {\n\t\t\tkey = null;\n\t\t}\n\t\n\t\treturn getKeyData(event.ctrlKey, event.altKey, event.shiftKey, event.metaKey, key);\n\t}\n\t\n\tfunction getKeyData(ctrl, alt, shift, meta, key) {\n\t\tvar buf = new _StringBuffer2.default();\n\t\n\t\tif (ctrl) buf.append(\"CTRL\");\n\t\tif (alt) buf.append(\"ALT\");\n\t\tif (shift) buf.append(\"SHIFT\");\n\t\tif (meta) buf.append(\"META\");\n\t\tif (key) buf.append(key);\n\t\n\t\treturn buf.toString(\".\");\n\t}\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _lodash = __webpack_require__(5);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar _Utils = __webpack_require__(2);\n\t\n\tvar _Utils2 = _interopRequireDefault(_Utils);\n\t\n\tvar _Node = __webpack_require__(14);\n\t\n\tvar _Node2 = _interopRequireDefault(_Node);\n\t\n\tvar _Edge = __webpack_require__(18);\n\t\n\tvar _Edge2 = _interopRequireDefault(_Edge);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar nodeDefaults = {\n\t\tname: 'Default',\n\t\trole: 'node',\n\t\tdraggable: true,\n\t\tselectable: true,\n\t\teditable: true,\n\t\tresizable: false,\n\t\tsourceable: true,\n\t\ttargetable: true,\n\t\tvisible: true\n\t};\n\t\n\tvar edgeDefaults = {\n\t\tname: 'Default',\n\t\trole: 'edge',\n\t\tselectable: true,\n\t\tvisible: true\n\t};\n\t\n\tvar Graph = function () {\n\t\tfunction Graph() {\n\t\t\tvar id = arguments.length <= 0 || arguments[0] === undefined ? _lodash2.default.uniqueId(\"G\") : arguments[0];\n\t\t\tvar config = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t\t\tvar model = arguments[2];\n\t\n\t\t\t_classCallCheck(this, Graph);\n\t\n\t\t\tthis.id = id;\n\t\n\t\t\tthis.nodes = {};\n\t\t\tthis.edges = {};\n\t\n\t\t\tthis.selection = null;\n\t\t\tthis.destroyed = false;\n\t\n\t\t\t_Utils2.default.buildTypes(config.nodeTypes, \"Nodes\", nodeDefaults);\n\t\t\t_Utils2.default.buildTypes(config.edgeTypes, \"Edges\", edgeDefaults);\n\t\n\t\t\tdelete config.nodeTypes;\n\t\t\tdelete config.edgeTypes;\n\t\t\t_Utils2.default.initConfig(this, config);\n\t\t\tthis.root = null;\n\t\t\tif (model) this.loadModel(model);\n\t\t}\n\t\n\t\t_createClass(Graph, [{\n\t\t\tkey: \"addNode\",\n\t\n\t\n\t\t\t/**\n\t   * Create a new Node\n\t   */\n\t\t\tvalue: function addNode(config) {\n\t\t\t\tvar parent = arguments.length <= 1 || arguments[1] === undefined ? this.getCurrentRoot() : arguments[1];\n\t\t\t\tvar pos = arguments[2];\n\t\n\t\t\t\tvar NodeClass = Graph.getJSClass(config, _Node2.default);\n\t\t\t\tvar node = new NodeClass(this, config);\n\t\n\t\t\t\tif (parent) Graph.addChild(parent, node, pos);else {\n\t\t\t\t\tthis.root = node;\n\t\t\t\t\tthis.root.prop('role', 'root');\n\t\t\t\t}\n\t\n\t\t\t\tthis.nodes[node.id] = node;\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"addEdge\",\n\t\t\tvalue: function addEdge(config) {\n\t\t\t\tvar parent = arguments.length <= 1 || arguments[1] === undefined ? this.getCurrentRoot() : arguments[1];\n\t\t\t\tvar from = arguments[2];\n\t\t\t\tvar to = arguments[3];\n\t\n\t\t\t\tvar EdgeClass = Graph.getJSClass(config, _Edge2.default);\n\t\t\t\tvar edge = new EdgeClass(this, config, from, to);\n\t\n\t\t\t\tGraph.addChild(parent, edge);\n\t\t\t\tthis.edges[edge.id] = edge;\n\t\t\t\treturn edge;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"loadModel\",\n\t\t\tvalue: function loadModel(model) {\n\t\t\t\tvar _this = this;\n\t\n\t\t\t\tvar parent = arguments.length <= 1 || arguments[1] === undefined ? this.getCurrentRoot() : arguments[1];\n\t\n\t\t\t\tvar nodes = model.nodes;\n\t\t\t\tvar edges = model.edges;\n\t\t\t\tdelete model.nodes;\n\t\t\t\tdelete model.edges;\n\t\n\t\t\t\tvar node = this.addNode(model, parent);\n\t\t\t\tif (nodes) {\n\t\t\t\t\t_lodash2.default.forEach(nodes, function (child) {\n\t\t\t\t\t\t_this.loadModel(child, node);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (edges) {\n\t\t\t\t\t_lodash2.default.forEach(edges, function (edge) {\n\t\t\t\t\t\tvar from = void 0,\n\t\t\t\t\t\t    to = void 0;\n\t\t\t\t\t\tif (edge.from) from = _this.nodes[edge.from];\n\t\t\t\t\t\tif (edge.to) to = _this.nodes[edge.to];\n\t\t\t\t\t\t_this.addEdge(edge, node, from, to);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getCurrentRoot\",\n\t\t\tvalue: function getCurrentRoot() {\n\t\t\t\treturn this.root;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"reset\",\n\t\t\tvalue: function reset() {}\n\t\t}, {\n\t\t\tkey: \"destroy\",\n\t\t\tvalue: function destroy() {}\n\t\t}], [{\n\t\t\tkey: \"getJSClass\",\n\t\t\tvalue: function getJSClass(config, defaultClass) {\n\t\t\t\tvar jsClass = null;\n\t\t\t\tif (config && config.type) {\n\t\t\t\t\t// See if we can get the js class from config.\n\t\t\t\t\tvar type = _Utils2.default.type(defaultClass.namespace, config.type);\n\t\t\t\t\tif (type) jsClass = type.jsClass;\n\t\t\t\t}\n\t\n\t\t\t\treturn _Utils2.default.getConstructor(jsClass, defaultClass);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"addChild\",\n\t\t\tvalue: function addChild(parent, child) {\n\t\t\t\tif (!parent.children) parent.children = [];\n\t\n\t\t\t\tif (child.parent != parent) {\n\t\t\t\t\tparent.children.push(child);\n\t\n\t\t\t\t\tif (child.parent && child.parent.children) child.parent.children = _lodash2.default.without(child.parent.children, child);\n\t\t\t\t}\n\t\t\t\tchild.parent = parent;\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Graph;\n\t}();\n\t\n\tGraph.DEFAULTS = {\n\t\tallowDanglingEdges: true,\n\t\tmultiConnect: false,\n\t\treadOnly: false,\n\t\tviewOnly: false\n\t};\n\t\n\texports.default = Graph;\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _lodash = __webpack_require__(5);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar _StringBuffer = __webpack_require__(8);\n\t\n\tvar _StringBuffer2 = _interopRequireDefault(_StringBuffer);\n\t\n\tvar _Element2 = __webpack_require__(15);\n\t\n\tvar _Element3 = _interopRequireDefault(_Element2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Node = function (_Element) {\n\t\t_inherits(Node, _Element);\n\t\n\t\tfunction Node(graph) {\n\t\t\tvar config = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t\n\t\t\t_classCallCheck(this, Node);\n\t\n\t\t\tif (!config.id) config.id = _lodash2.default.uniqueId('N');\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Node).call(this, graph, config));\n\t\n\t\t\t_this.inEdges = [];\n\t\t\t_this.outEdges = [];\n\t\t\t_this.parent = null;\n\t\t\treturn _this;\n\t\t}\n\t\n\t\t_createClass(Node, [{\n\t\t\tkey: \"isAncestor\",\n\t\t\tvalue: function isAncestor(n) {\n\t\t\t\t// TODO: should we move this to graph class ?\n\t\t\t\tvar node = n.parent;\n\t\t\t\twhile (node) {\n\t\t\t\t\tif (this == node) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t};\n\t\t\t\t\tnode = node.parent;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"removeEdge\",\n\t\t\tvalue: function removeEdge(edge) {\n\t\t\t\tvar edges = edge.source == this ? this.outEdges : this.inEdges;\n\t\t\t\tfor (var i = 0; i < edges.length; i++) {\n\t\t\t\t\tif (edge == edges[i]) {\n\t\t\t\t\t\tedges.splice(i, 1);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\t// Add a new incoming edge\n\t\n\t\t}, {\n\t\t\tkey: \"addInEdge\",\n\t\t\tvalue: function addInEdge(edge, pos) {\n\t\t\t\tif (pos == null || pos === undefined) this.inEdges.push(edge);else this.inEdges.splice(pos, 0, edge);\n\t\t\t}\n\t\n\t\t\t// Add a new outgoing edge\n\t\n\t\t}, {\n\t\t\tkey: \"addOutEdge\",\n\t\t\tvalue: function addOutEdge(edge, pos) {\n\t\t\t\tif (pos == null || pos === undefined || pos > edge.length - 1) this.outEdges.push(edge);else this.outEdges.splice(pos, 0, edge);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"renderChildren\",\n\t\t\tvalue: function renderChildren(view) {\n\t\t\t\tvar _this2 = this;\n\t\n\t\t\t\tif (this.children) {\n\t\t\t\t\tvar _ret = function () {\n\t\t\t\t\t\tvar buf = new _StringBuffer2.default();\n\t\t\t\t\t\t_lodash2.default.forEach(_this2.children, function (child) {\n\t\t\t\t\t\t\tbuf.append(child.render(view));\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tv: buf.toString()\n\t\t\t\t\t\t};\n\t\t\t\t\t}();\n\t\n\t\t\t\t\tif ((typeof _ret === \"undefined\" ? \"undefined\" : _typeof(_ret)) === \"object\") return _ret.v;\n\t\t\t\t}\n\t\t\t\treturn '';\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"toString\",\n\t\t\tvalue: function toString() {\n\t\t\t\tvar label = this.prop(\"label\") ? this.prop(\"label\") : \"undefined\";\n\t\t\t\tif (_lodash2.default.isArray(label)) label = label[0];\n\t\t\t\treturn 'Node:{id:' + this.id + ';label:' + label + ';type:' + this.props.constructor.typeName + '}';\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Node;\n\t}(_Element3.default);\n\t\n\tNode.namespace = \"Nodes\";\n\t\n\texports.default = Node;\n\t\n\t/*\n\n\t/**\n\t * The DrillDownParent is the parent that displays the vertex when drilled down.\n\t *\n\tVertex.prototype.getDrillDownParent = function() {\n\t\treturn this.parent;\n\t};\n\n\tVertex.prototype.isLocked = function() {\n\t\tvar mode = this.getProperty(\"mode\") || 3;\n\t\treturn !(mode & Graph.ALLOW_INTERACTIONS);\n\t};\n\n\tVertex.prototype.getCrumbText = function() {\n\t\tif (this.isLocked())\n\t\t\treturn '<span><img src=\"webwb/pzreadonly.png\" /></span><span>&nbsp;' + this.getProperty(\"label\") + '</span>';\n\t\treturn this.getProperty(\"label\");\n\t};\n\n\tVertex.prototype.canEdit = function() {\n\t\treturn (!this.parent || !this.parent.isLocked()) && Vertex.superclass.canEdit.call(this);\n\t};\n\n\tVertex.prototype.isContainer = function() {\n\t\treturn this.getProperty(\"container\");\n\t};\n\n\t*/\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _lodash = __webpack_require__(5);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar _Utils = __webpack_require__(2);\n\t\n\tvar _Utils2 = _interopRequireDefault(_Utils);\n\t\n\tvar _Cache = __webpack_require__(16);\n\t\n\tvar _Cache2 = _interopRequireDefault(_Cache);\n\t\n\tvar _StringBuffer = __webpack_require__(8);\n\t\n\tvar _StringBuffer2 = _interopRequireDefault(_StringBuffer);\n\t\n\tvar _Rectangle = __webpack_require__(4);\n\t\n\tvar _Rectangle2 = _interopRequireDefault(_Rectangle);\n\t\n\tvar _Label = __webpack_require__(17);\n\t\n\tvar _Label2 = _interopRequireDefault(_Label);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t/**\n\t * The Element is the common parent for Node and Edge.\n\t */\n\t\n\tvar Element = function () {\n\t\tfunction Element(graph) {\n\t\t\tvar config = arguments.length <= 1 || arguments[1] === undefined ? { id: _lodash2.default.uniqueId() } : arguments[1];\n\t\n\t\t\t_classCallCheck(this, Element);\n\t\n\t\t\tthis.graph = graph;\n\t\t\tthis.id = config.id;\n\t\t\tdelete config.id;\n\t\n\t\t\t// Initialize decorators\n\t\t\tif (config.decorators) {\n\t\t\t\tthis.createDecorators(config.decorators);\n\t\t\t\tdelete config.decorators;\n\t\t\t}\n\t\n\t\t\t// Initialize View Properties\n\t\t\tif (config.views) {\n\t\t\t\tthis.viewProps = config.views;\n\t\t\t\tdelete config.views;\n\t\t\t}\n\t\n\t\t\t// Initialize type\n\t\t\tvar type = config.type || \"Default\";\n\t\t\ttype = _Utils2.default.type(this.constructor.namespace, type);\n\t\t\tif (!type) throw new Error(\"Type not found \" + config.type);\n\t\t\tdelete config.type;\n\t\t\tthis.props = new type(config);\n\t\t}\n\t\n\t\t_createClass(Element, [{\n\t\t\tkey: \"prop\",\n\t\t\tvalue: function prop(name, value) {\n\t\t\t\tif (_lodash2.default.isUndefined(value)) return this.props[name];\n\t\t\t\tthis.props[name] = value;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Get/Set property stored by views.\n\t   * @param key\n\t   * @param name\n\t   * @param value\n\t   * @returns {*}\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"viewProp\",\n\t\t\tvalue: function viewProp() {\n\t\t\t\tvar key = arguments.length <= 0 || arguments[0] === undefined ? 'default' : arguments[0];\n\t\t\t\tvar name = arguments[1];\n\t\t\t\tvar value = arguments[2];\n\t\n\t\t\t\tif (_lodash2.default.isUndefined(value)) {\n\t\t\t\t\tif (key == 'default') return this.prop(name, value);\n\t\t\t\t\treturn this.viewProps[key][name];\n\t\t\t\t}\n\t\t\t\tif (key == 'default') {\n\t\t\t\t\tthis.prop(name, value);\n\t\t\t\t} else {\n\t\t\t\t\tif (!this.viewProps[key]) this.viewProps[key] = {};\n\t\t\t\t\tthis.viewProps[key][name] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"createDecorators\",\n\t\t\tvalue: function createDecorators(decorators) {}\n\t\n\t\t\t/**\n\t   * Get properties needed for rendering this element\n\t   * @returns {{key: (string|*), className: *, namespace: *, bounds: *}}\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"getView\",\n\t\t\tvalue: function getView(key) {\n\t\t\t\tvar bounds = this.getBounds(key);\n\t\t\t\treturn {\n\t\t\t\t\tid: this.id,\n\t\t\t\t\tkey: key,\n\t\t\t\t\tclassName: this.computedClassName,\n\t\t\t\t\tnamespace: this.namespace,\n\t\t\t\t\tx: bounds.x,\n\t\t\t\t\ty: bounds.y,\n\t\t\t\t\twidth: bounds.width,\n\t\t\t\t\theight: bounds.height,\n\t\t\t\t\tscale: this.viewProp(key, 'scale') || 1.0\n\t\t\t\t};\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getBounds\",\n\t\t\tvalue: function getBounds(key) {\n\t\t\t\tvar bounds = _Cache2.default.get(this.id + \".bounds\", key);\n\t\t\t\tif (bounds) return bounds;\n\t\n\t\t\t\tvar shape = this.viewProp(key, 'shape');\n\t\t\t\tvar x = this.viewProp(key, \"x\") || 0;\n\t\t\t\tvar y = this.viewProp(key, \"y\") || 0;\n\t\t\t\tvar w = this.viewProp(key, \"width\") || (shape ? shape.width : 0);\n\t\t\t\tvar h = this.viewProp(key, \"height\") || (shape ? shape.height : 0);\n\t\t\t\tbounds = new _Rectangle2.default(x, y, w, h);\n\t\t\t\t_Cache2.default.set(this.id + '.bounds', bounds, key);\n\t\t\t\treturn bounds;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"render\",\n\t\t\tvalue: function render(view) {\n\t\t\t\tvar template = _Cache2.default.get(this.id + '.template', view.id);\n\t\t\t\tif (!template) {\n\t\t\t\t\t//create the template\n\t\t\t\t\tvar role = this.prop('role');\n\t\t\t\t\ttemplate = view.getTemplate('$' + role, null, this);\n\t\t\t\t\tif (_lodash2.default.isString(template)) template = _lodash2.default.template(template);\n\t\t\t\t\t_Cache2.default.set(this.id + '.template', template, view.id);\n\t\t\t\t}\n\t\t\t\treturn template(this.getView(view.id));\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"renderShape\",\n\t\t\tvalue: function renderShape(view) {\n\t\t\t\tvar shape = this.prop('shape');\n\t\t\t\tif (shape) {\n\t\t\t\t\tvar template = _lodash2.default.template(view.getTemplate(shape.name, shape));\n\t\t\t\t\treturn template(this.getView(view.id));\n\t\t\t\t}\n\t\t\t\treturn '';\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"renderLabel\",\n\t\t\tvalue: function renderLabel(view) {\n\t\t\t\tif (this == this.graph.getCurrentRoot()) return null;\n\t\t\t\tvar box = this.getLabelBox(view.id);\n\t\t\t\tif (box) return _Label2.default.SVG_TEMPLATE(box);\n\t\t\t\treturn '';\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getLabelBox\",\n\t\t\tvalue: function getLabelBox(key) {\n\t\t\t\tvar box = _Cache2.default.get(this.id + '.labelBox', key);\n\t\t\t\tif (box) return box;\n\t\t\t\tvar bounds = this.getBounds(key);\n\t\t\t\t// Just get the config will have a positive performance boost for IE11 and IE10.\n\t\t\t\tbox = _Label2.default.getLabelBox(this.prop('label'), bounds.width, bounds.height, this.viewProp(key, 'labelConfig'));\n\t\t\t\t_Cache2.default.set(this.id + '.labelBox', box, key);\n\t\t\t\treturn box;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"destroy\",\n\t\t\tvalue: function destroy() {\n\t\t\t\tdelete this.graph;\n\t\t\t\tdelete this.decorators;\n\t\t\t\tdelete this.props;\n\t\t\t\tdelete this.viewProps;\n\t\t\t\tthis.destroyed = true;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"computedClassName\",\n\t\t\tget: function get() {\n\t\t\t\tif (!this._computedClassName) {\n\t\t\t\t\tvar buf = new _StringBuffer2.default(this.prop(\"role\"));\n\t\t\t\t\tvar props = this.props;\n\t\t\t\t\tif (props.hasOwnProperty(\"className\")) buf.append(props[\"className\"]);\n\t\t\t\t\tprops = props.constructor.prototype;\n\t\t\t\t\twhile (props) {\n\t\t\t\t\t\tif (props.hasOwnProperty(\"className\")) buf.append(props[\"className\"]);\n\t\t\t\t\t\tprops = Object.getPrototypeOf(props);\n\t\t\t\t\t}\n\t\t\t\t\tthis._computedClassName = buf.toString(' ');\n\t\t\t\t}\n\t\t\t\treturn this._computedClassName;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"namespace\",\n\t\t\tget: function get() {\n\t\t\t\tif (this == this.graph.getCurrentRoot()) return '';\n\t\t\t\treturn \"root.\" + this.prop(\"role\");\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Element;\n\t}();\n\n\t/*\n\n\tCell.prototype.move = function(x, y) {\n\t\tthis.setProperty(\"x\", Math.round(x));\n\t\tthis.setProperty(\"y\", Math.round(y));\n\t\tdelete this.bounds;\n\t};\n\n\tCell.prototype.resize = function(w, h) {\n\t\tthis.setProperty(\"width\", w);\n\t\tthis.setProperty(\"height\", h);\n\t\tdelete this.bounds;\n\t};\n\n\tCell.prototype.canEdit = function() {\n\t\treturn (this.graph ? this.graph.canEdit() : true) && this.getProperty(\"editable\");\n\t};\n\n\tCell.prototype.canSelect = function() {\n\t\treturn (this.graph ? this.graph.canSelect() : true) && this.getProperty(\"selectable\");\n\t};\n\n\tCell.prototype.canMove = function() {\n\t\treturn (this.graph ? this.graph.canEdit() : true) && this.getProperty(\"draggable\");\n\t};\n\n\tCell.prototype.canResize = function() {\n\t\treturn (this.graph ? this.graph.canEdit() : true) && this.getProperty(\"resizable\");\n\t};\n\n\tCell.prototype.getTypeFromString = function(typeStr) {\n\t\treturn this.graph.getType(typeStr);\n\t};\n\n\tCell.prototype.createModifiers = function(modifiers) {\n\t\tthis.modifiers = null;\n\t\tvar modifierSettings = this.getProperty(\"modifierSettings\");\n\t\tif (modifierSettings) {\n\t\t\t_.each(modifiers, function(config) {\n\t\t\t\tconfig.type = this.graph.getModifierType(config.className);\n\t\t\t\tconfig.setting = modifierSettings[config.className];\n\t\t\t\tif (!config.type || !config.setting) return;\n\n\t\t\t\tthis.addModifier(config.className, new Modifier(this, config));\n\t\t\t}, this);\n\n\t\t\t// Check for showAlways settings\n\t\t\t_.each(modifierSettings, function(setting, name) {\n\t\t\t\tif (setting.showAlways && (!this.modifiers || !this.modifiers[name])) {\n\t\t\t\t\tvar config = {type: this.graph.getModifierType(name), setting: setting};\n\t\t\t\t\tif (!config.type) return;\n\t\t\t\t\tthis.addModifier(name, new Modifier(this, config));\n\t\t\t\t}\n\t\t\t}, this);\n\t\t}\n\t};\n\n\tCell.prototype.addModifier = function(name, modifier) {\n\t\tif (!this.modifiers)\n\t\t\tthis.modifiers = {};\n\n\t\tif (!modifier.hasOwnProperty(\"showHeader\"))\n\t\t\tmodifier.showHeader = true;\n\n\t\t// @hack preferably set it in configurations.\n\t\tif (modifier.name == \"HoverProcessModifier\" || modifier.name == \"HoverResults\")\n\t\t\tmodifier.showHeader = false;\n\n\t\tthis.modifiers[name] = modifier;\n\t};\n\n\tCell.prototype.getModifiers = function() {\n\t\tif (_.isUndefined(this.modifiers))\n\t\t\tthis.createModifiers();\n\t\treturn this.modifiers;\n\t};\n\n\tCell.prototype.getModifier = function(name) {\n\t\tvar modifiers = this.getModifiers();\n\t\tif (modifiers)\n\t\t\treturn modifiers[name];\n\t\treturn null;\n\t};\n\n\tCell.prototype.isVisible = function() {\n\t\treturn this.getProperty('visible');\n\t};\n\n\tCell.prototype.isContainer = function() {\n\t\treturn false;\n\t};\n\t*/\n\n\n\texports.default = Element;\n\n/***/ },\n/* 16 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t/**\n\t * Created by tong on 6/7/2016.\n\t */\n\t\n\tvar caches = {};\n\t\n\tvar Cache = {\n\t\tget: function get(key, namespace) {\n\t\t\treturn this.getCache(namespace)[key];\n\t\t},\n\t\n\t\tset: function set(key, value, namespace) {\n\t\t\tthis.getCache(namespace)[key] = value;\n\t\t},\n\t\n\t\tcontains: function contains(key, namespace) {\n\t\t\treturn key in this.getCache(namespace);\n\t\t},\n\t\n\t\tremove: function remove(key, namespace) {\n\t\t\tdelete this.getCache(namespace)[key];\n\t\t},\n\t\n\t\tclear: function clear(namesapce) {\n\t\t\tif (!namespace) caches = {};else if (caches[namespace]) caches[namespace] = {};\n\t\t},\n\t\n\t\tgetCache: function getCache() {\n\t\t\tvar namespace = arguments.length <= 0 || arguments[0] === undefined ? 'default' : arguments[0];\n\t\n\t\t\tif (!caches[namespace]) caches[namespace] = {};\n\t\t\treturn caches[namespace];\n\t\t}\n\t};\n\t\n\texports.default = Cache;\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _lodash = __webpack_require__(5);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar _bean = __webpack_require__(1);\n\t\n\tvar _bean2 = _interopRequireDefault(_bean);\n\t\n\tvar _Utils = __webpack_require__(2);\n\t\n\tvar _Utils2 = _interopRequireDefault(_Utils);\n\t\n\tvar _DomUtils = __webpack_require__(7);\n\t\n\tvar _DomUtils2 = _interopRequireDefault(_DomUtils);\n\t\n\tvar _StringBuffer = __webpack_require__(8);\n\t\n\tvar _StringBuffer2 = _interopRequireDefault(_StringBuffer);\n\t\n\tvar _Rectangle = __webpack_require__(4);\n\t\n\tvar _Rectangle2 = _interopRequireDefault(_Rectangle);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar FONT_BOLD = 1,\n\t    FONT_ITALIC = 2,\n\t    FONT_UNDERLINE = 4,\n\t    FONT_SHADOW = 8;\n\tvar SVG_TEMPLATE_STR = \"\\n<% var box = _.has(data, \\\"dx\\\") ? data : (data.getLabelBox ? data.getLabelBox() : null); \\n   if (box) {%>\\n\\t<g <% if (box.config && box.config.class) {%>class=\\\"<%=box.config.class%>\\\"<%}%>\\t\\t<% if (box.config && box.config.ns) {%>ns=\\\"<%=box.config.ns%>\\\"<%}%>\\t\\ttext-anchor=\\\"<%=box.anchor%>\\\"\\t\\ttransform=\\\"translate(<%=box.bounds.x%>,<%=box.bounds.y%>)\\\">\\n\\t<% if (box.backgroundColor) {%>\\n\\t\\t<rect x=\\\"<%=-box.bounds.width/2%>\\\" y=\\\"<%=-box.bounds.height/2%>\\\" width=\\\"<%=box.bounds.width%>\\\" height=\\\"<%=box.bounds.height%>\\\" fill=\\\"<%=box.backgroundColor%>\\\"/>\\n\\t<% } if (_.isArray(box.label)) { \\n\\t\\t_.each(box.label, function(value, line) {%>\\n\\t\\t\\t<text <% if (box.config && box.config.textStyle) {%>style=\\\"<%=box.config.textStyle%>\\\"<%}%>\\t\\t\\t\\tdx=\\\"<%=box.dx%>\\\" dy=\\\"<%=box.dy + box.lineHeight * line%>\\\"><%=value%></text>\\n\\t\\t<%});} else { %>\\n\\t\\t\\t<text><%=box.label%></text>\\n\\t\\t<%}%>\\n\\t</g>\\n<%}%>\".trim();\n\tvar SVG_TEMPLATE = _lodash2.default.template(SVG_TEMPLATE_STR, { variable: \"data\" });\n\t\n\tvar defaultConfig = {\n\t\tfontSize: 11,\n\t\tfontFamily: \"Arial\",\n\t\tfontStyle: 0,\n\t\tpadding: 0,\n\t\tlinePadding: 0,\n\t\talign: \"left\",\n\t\twidth: 0,\n\t\theight: 0,\n\t\tgeometry: { x: 0, y: 0, anchorY: 0, offsetX: 0, offsetY: 0 }\n\t};\n\t\n\t/**\n\t * The label object handles label sizing/positioning\n\t */\n\t\n\texports.default = function () {\n\t\tvar canvasSupported = false,\n\t\t    stringMeasureEl = null;\n\t\n\t\t/**\n\t  * Calculate the size of the string.\n\t  */\n\t\tvar getStringSize = _lodash2.default.memoize(function (str, fontSize, fontFamily, bold) {\n\t\t\tif (!str || str == \"\") return [0, 0];\n\t\n\t\t\tfontSize = fontSize || 11;\n\t\t\tfontFamily = fontFamily || 'Arial,Helvetica';\n\t\t\tbold = !_lodash2.default.isUndefined(bold) ? bold : false;\n\t\n\t\t\tvar size;\n\t\n\t\t\tif (_lodash2.default.isNull(canvasSupported)) {\n\t\t\t\tstringMeasureEl = _DomUtils2.default.createElement('canvas');\n\t\t\t\tcanvasSupported = !!(stringMeasureEl.getContext && stringMeasureEl.getContext('2d'));\n\t\t\t}\n\t\n\t\t\tif (canvasSupported) {\n\t\t\t\t_Utils2.default.log('Label', 'using canvas');\n\t\t\t\tvar ctx = stringMeasureEl.getContext(\"2d\");\n\t\t\t\tctx.font = fontSize + \" \" + fontFamily + \" \" + (bold ? \"bold\" : \"normal\");\n\t\t\t\tvar measure = ctx.measureText(str);\n\t\t\t\tsize = [measure.width, 10];\n\t\t\t} else {\n\t\t\t\t// first check if there is a string-measuring div available, if not, create now.\n\t\t\t\tif (!stringMeasureEl) {\n\t\t\t\t\tstringMeasureEl = _DomUtils2.default.createElement('iframe', { id: \"_ComputeStylesIframe\" }, { position: \"absolute\", visibility: \"hidden\", display: \"none\", width: \"auto\" });\n\t\t\t\t\tdocument.body.appendChild(stringMeasureEl);\n\t\t\t\t\tvar doc = stringMeasureEl.contentWindow.document;\n\t\t\t\t\tdoc.open();\n\t\t\t\t\tdoc.write('<html><body><div id=\"sizeMeasuringDiv\" style=\"position:absolute;width:auto;height:auto;white-space:pre-wrap;word-wrap:break-word;display:inline-block;\"></div></body></html>');\n\t\t\t\t\tdoc.close();\n\t\t\t\t}\n\t\t\t\tstringMeasureEl.style.display = \"\";\n\t\t\t\tvar div = stringMeasureEl.contentWindow.document.getElementById(\"sizeMeasuringDiv\");\n\t\t\t\tdiv.style.fontSize = fontSize;\n\t\t\t\tdiv.style.fontFamily = fontFamily;\n\t\t\t\tdiv.style.fontWeight = bold ? 'bold' : 'normal';\n\t\t\t\tdiv.style.padding = 0;\n\t\t\t\tdiv.style.width = \"auto\";\n\t\t\t\tdiv.innerHTML = str;\n\t\n\t\t\t\tsize = [div.offsetWidth, div.offsetHeight];\n\t\t\t\tstringMeasureEl.style.display = \"none\";\n\t\t\t}\n\t\t\treturn size;\n\t\t}, function (str, fontSize, fontFamily, bold) {\n\t\t\treturn str + ';' + fontSize + ';' + fontFamily + ';' + bold;\n\t\t});\n\t\n\t\t/**\n\t  * Create a wrapped text.\n\t  * @param {String} string the string to wrap.\n\t  * @param {maxWidth} the maximum width this string can take.\n\t  * @param {fontSize}\n\t  * @param {fontFamily}\n\t  * @param {bold}\n\t  */\n\t\tvar wrap = _lodash2.default.memoize(function (string, maxWidth, fontSize, fontFamily, bold) {\n\t\t\tmaxWidth = maxWidth || 0;\n\t\t\tfontSize = fontSize || 11;\n\t\t\tfontFamily = fontFamily || 'Arial,Helvetica';\n\t\t\tbold = !_lodash2.default.isUndefined(bold) ? bold : false;\n\t\n\t\t\tvar arr = [];\n\t\t\tvar spaceSize = getStringSize(\"&nbsp;\", fontSize, fontFamily, bold),\n\t\t\t    space = spaceSize[0];\n\t\t\tarr.lineHeight = spaceSize[1];\n\t\n\t\t\tif (!maxWidth || !string || string == \"\") {\n\t\t\t\tarr.push(string);\n\t\t\t\tarr.width = !string || string == \"\" ? space : getStringSize(string, fontSize, fontFamily, bold)[0];\n\t\t\t\tarr.height = arr.lineHeight;\n\t\t\t\treturn arr;\n\t\t\t}\n\t\n\t\t\tvar width = 0;\n\t\t\t//split the text by lines\n\t\t\tvar lines = string.split(/[\\r\\n|\\n|\\r]/);\n\t\n\t\t\tvar buf = new _StringBuffer2.default();\n\t\n\t\t\tfor (var j = 0; j < lines.length; j++) {\n\t\t\t\t//split each line by word\n\t\t\t\tvar words = lines[j].split(/[\\s]/);\n\t\t\t\tvar line = \"\",\n\t\t\t\t    currentWidth = 0,\n\t\t\t\t    wordWidth = 0,\n\t\t\t\t    newLine = true,\n\t\t\t\t    word;\n\t\n\t\t\t\tfor (var i = 0; i < words.length; i++) {\n\t\t\t\t\tword = words[i];\n\t\t\t\t\twordWidth = getStringSize(word, fontSize, fontFamily, bold)[0];\n\t\n\t\t\t\t\tif ((newLine ? wordWidth : currentWidth + space + wordWidth) > maxWidth) {\n\t\t\t\t\t\tif (newLine) {\n\t\t\t\t\t\t\tbuf.append(word);\n\t\t\t\t\t\t\twidth = Math.max(width, wordWidth);\n\t\t\t\t\t\t\tif (i < words.length - 1) {\n\t\t\t\t\t\t\t\tarr.push(buf.toString());\n\t\t\t\t\t\t\t\tbuf.clear();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tarr.push(buf.append(line).toString());\n\t\t\t\t\t\t\twidth = Math.max(width, currentWidth + space + wordWidth);\n\t\t\t\t\t\t\tbuf.clear();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tline = \"\";\n\t\t\t\t\t\tcurrentWidth = 0;\n\t\t\t\t\t\tif (!newLine) i--; // move back one word.\n\t\t\t\t\t\tnewLine = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tline = newLine ? word : line + \" \" + word;\n\t\t\t\t\t\tcurrentWidth = newLine ? wordWidth : currentWidth + space + wordWidth;\n\t\t\t\t\t\twidth = Math.max(width, currentWidth);\n\t\t\t\t\t\tnewLine = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (line != \"\") buf.append(line);\n\t\t\t\tif (j < lines.length - 1) {\n\t\t\t\t\tarr.push(buf.toString());\n\t\t\t\t\tbuf.clear();\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tarr.push(buf.toString());\n\t\t\tarr.width = width;\n\t\t\tarr.height = arr.lineHeight * arr.length;\n\t\t\treturn arr;\n\t\t}, function (str, maxWidth, fontSize, fontFamily, bold) {\n\t\t\treturn str + ';' + maxWidth + ';' + fontSize + ';' + fontFamily + ';' + bold;\n\t\t});\n\t\n\t\t/**\n\t  *  Get the view information for how to display the label.\n\t  * @param label The string that needs to be displayed\n\t  * @param containerWidth The width of the parent container.\n\t  * @param containerHeight The height of the parent container.\n\t  * @param labelConfig The configuration on how to display label. It should be an object with the following parameters:\n\t  * {\n\t  *      fontSize, fontFamily, fontStyle, padding,\n\t  *      align: can be either \"left\", \"center\" or \"right\",\n\t  *      width: the maximum width of the label. if less than 1, then is treated as percentage. If 0, no wrapping will occur,\n\t  *      height,\n\t  *      geometry\n\t  * }\n\t  * @returns {*}\n\t  */\n\t\tfunction getLabelBox(label, containerWidth, containerHeight, labelConfig) {\n\t\t\tlabelConfig = _lodash2.default.defaultsDeep(labelConfig, defaultConfig);\n\t\t\tvar fontSize = labelConfig.fontSize;\n\t\t\tvar fontFamily = labelConfig.fontFamily;\n\t\t\tvar fontStyle = labelConfig.fontStyle;\n\t\t\tvar bold = (fontStyle & FONT_BOLD) == FONT_BOLD;\n\t\t\tvar padding = labelConfig.padding;\n\t\t\tvar linePadding = labelConfig.linePadding;\n\t\t\tvar align = labelConfig.align;\n\t\n\t\t\tvar w = labelConfig.width,\n\t\t\t    h = labelConfig.height;\n\t\t\tw = w <= 5 ? containerWidth * w : w;\n\t\t\th = h <= 5 ? containerHeight * h : h;\n\t\t\tw -= 2 * padding;\n\t\t\th -= 2 * padding;\n\t\t\tw = Math.max(0, w);\n\t\t\th = Math.max(0, h);\n\t\n\t\t\tvar geometry = _lodash2.default.clone(labelConfig.geometry);\n\t\t\tvar wrappedLabel = this.wrap(label, w, fontSize, fontFamily, bold);\n\t\t\tgeometry.width = wrappedLabel.width + 2 * padding;\n\t\t\tgeometry.height = wrappedLabel.height + 2 * padding + (wrappedLabel.length - 1) * linePadding;\n\t\t\tvar anchor = \"start\",\n\t\t\t    dx = 0,\n\t\t\t    setAnchorX = !_lodash2.default.has(geometry, \"anchorX\");\n\t\t\tswitch (align) {\n\t\t\t\tcase \"center\":\n\t\t\t\t\tanchor = \"middle\";\n\t\t\t\t\tif (setAnchorX) geometry.anchorX = 0;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"right\":\n\t\t\t\t\tanchor = \"end\";\n\t\t\t\t\tdx = wrappedLabel.width / 2;\n\t\t\t\t\tif (setAnchorX) geometry.anchorX = -0.5;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"left\":\n\t\t\t\t\tdx = -wrappedLabel.width / 2;\n\t\t\t\t\tif (setAnchorX) geometry.anchorX = 0.5;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tvar pos = _Utils2.default.getRelativePosition({ width: containerWidth, height: containerHeight }, geometry);\n\t\t\tvar bounds = new _Rectangle2.default(pos[0], pos[1], geometry.width, geometry.height);\n\t\n\t\t\t// the maximum bounds for the label, used to position inline editor\n\t\t\tgeometry.width = Math.max(w + 2 * padding, geometry.width);\n\t\t\tgeometry.height = Math.max(h + 2 * padding, geometry.height);\n\t\t\tpos = _Utils2.default.getRelativePosition({ width: containerWidth, height: containerHeight }, geometry);\n\t\t\tvar maxBounds = new _Rectangle2.default(pos[0], pos[1], geometry.width, geometry.height);\n\t\n\t\t\treturn {\n\t\t\t\tconfig: labelConfig, label: wrappedLabel, _label: label,\n\t\t\t\tdx: dx, dy: -geometry.height / 2 + padding + wrappedLabel.lineHeight, anchor: anchor, lineHeight: wrappedLabel.lineHeight + linePadding,\n\t\t\t\tbounds: bounds, maxBounds: maxBounds\n\t\t\t};\n\t\t}\n\t\n\t\tfunction getLabelBoxForEdge(label, edge, labelConfig) {\n\t\t\tlabelConfig = _lodash2.default.defaultsDeep(labelConfig, defaultConfig);\n\t\t\tif (!label || label == \"\") return null;\n\t\n\t\t\tvar fontSize = labelConfig.fontSize;\n\t\t\tvar fontFamily = labelConfig.fontFamily;\n\t\t\tvar fontStyle = labelConfig.fontStyle;\n\t\t\tvar bold = (fontStyle & FONT_BOLD) == FONT_BOLD;\n\t\n\t\t\tvar wrappedLabel = this.wrap(label, labelConfig.width, fontSize, fontFamily, bold);\n\t\t\tvar pos = edge.getRelativePosition({ x: labelConfig.labelLocation / 2, offsetX: labelConfig.labelOffsetX || 0, offsetY: labelConfig.labelOffsetY || 0 });\n\t\n\t\t\tvar anchor = \"start\",\n\t\t\t    dx = void 0;\n\t\t\tswitch (labelConfig.align) {\n\t\t\t\tcase \"center\":\n\t\t\t\t\tanchor = \"middle\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"right\":\n\t\t\t\t\tanchor = \"end\";\n\t\t\t\t\tdx = wrappedLabel.width / 2;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"left\":\n\t\t\t\tdefault:\n\t\t\t\t\tdx = -wrappedLabel.width / 2;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tconfig: labelConfig, label: wrappedLabel, _label: label,\n\t\t\t\tdx: dx, dy: -wrappedLabel.height / 2 + wrappedLabel.lineHeight,\n\t\t\t\tanchor: anchor, lineHeight: wrappedLabel.lineHeight,\n\t\t\t\tbounds: new _Rectangle2.default(pos[0], pos[1], wrappedLabel.width, wrappedLabel.height)\n\t\t\t};\n\t\t}\n\t\n\t\tvar editor = {\n\t\t\tvisible: function visible() {\n\t\t\t\treturn this.input && this.input.style.visibility == 'visible';\n\t\t\t},\n\t\n\t\t\tstart: function start(key, container, box, refEl, textEl) {\n\t\t\t\tif (!this.input) {\n\t\t\t\t\tthis.input = _DomUtils2.default.createElement('textarea', { id: \"inlineEditor\", unselectable: \"off\" }, { position: \"absolute\", overflow: \"hidden\", padding: \"0px\", margin: \"0px\", border: \"transparent\" }), container.appendChild(this.input);\n\t\t\t\t} else if (this.visible() && this.key != key) {\n\t\t\t\t\t// need to close the existing editor first\n\t\t\t\t\tthis.stop();\n\t\t\t\t}\n\t\t\t\tthis.key = key;\n\t\t\t\tthis.box = box;\n\t\t\t\tthis.refEl = refEl;\n\t\t\t\tthis.textEl = textEl;\n\t\n\t\t\t\tvar labelConfig = box.config;\n\t\t\t\t//let pos = Utils.unscale(graph, [cell.getBounds().getCenterX() + bounds.x, cell.getBounds().getCenterY() + bounds.y + 5]);\n\t\t\t\tvar pos = _DomUtils2.default.getCenterPosition(refEl, container);\n\t\t\t\tpos = [pos[0] + box.maxBounds.left, pos[1] + box.maxBounds.top];\n\t\t\t\tvar scale = 1.0;\n\t\n\t\t\t\tif (textEl) textEl.style.visibility = 'hidden';\n\t\n\t\t\t\t_DomUtils2.default.setElement(this.input, null, {\n\t\t\t\t\tvisibility: 'visible',\n\t\t\t\t\tleft: pos[0] + \"px\",\n\t\t\t\t\ttop: pos[1] + \"px\",\n\t\t\t\t\twidth: box.maxBounds.width * scale + 'px',\n\t\t\t\t\theight: box.maxBounds.height * scale + 'px',\n\t\t\t\t\t\"font-family\": labelConfig.fontFamily,\n\t\t\t\t\t\"font-size\": labelConfig.fontSize * scale + 'px',\n\t\t\t\t\t\"font-weight\": (labelConfig.fontStyle & FONT_BOLD) == FONT_BOLD ? 'bold' : 'normal'\n\t\t\t\t\t/*\"color\": labelConfig.fontColor*/\n\t\t\t\t});\n\t\n\t\t\t\tthis.input.value = box._label;\n\t\t\t\tthis.input.focus();\n\t\t\t\tthis.input.select();\n\t\t\t\t_bean2.default.fire(this, 'editor.start', [this.key]);\n\t\t\t},\n\t\n\t\t\tstop: function stop(cancel) {\n\t\t\t\tif (!this.visible()) return;\n\t\n\t\t\t\tcancel = cancel || false;\n\t\t\t\tif (this.textEl) this.textEl.style.visibility = null;\n\t\n\t\t\t\tthis.input.style.visibility = 'hidden';\n\t\t\t\tif (!cancel) _bean2.default.fire(this, 'editor.update', [this.key, this.input.value]);\n\t\n\t\t\t\t_bean2.default.fire(this, 'editor.stop', [this.key]);\n\t\t\t\tdelete this.key;\n\t\t\t\tdelete this.box;\n\t\t\t\tdelete this.refEl;\n\t\t\t\tdelete this.textEl;\n\t\t\t}\n\t\t};\n\t\n\t\treturn {\n\t\t\tFONT_BOLD: FONT_BOLD,\n\t\t\tFONT_ITALIC: FONT_ITALIC,\n\t\t\tFONT_UNDERLINE: FONT_UNDERLINE,\n\t\t\tFONT_SHADOW: FONT_SHADOW,\n\t\t\tSVG_TEMPLATE_STR: SVG_TEMPLATE_STR,\n\t\t\tSVG_TEMPLATE: SVG_TEMPLATE,\n\t\t\tgetStringSize: getStringSize,\n\t\t\twrap: wrap,\n\t\t\tgetLabelBox: getLabelBox,\n\t\t\tgetLabelBoxForEdge: getLabelBoxForEdge,\n\t\t\teditor: editor\n\t\t};\n\t}();\n\n/***/ },\n/* 18 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _lodash = __webpack_require__(5);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar _Element2 = __webpack_require__(15);\n\t\n\tvar _Element3 = _interopRequireDefault(_Element2);\n\t\n\tvar _Label = __webpack_require__(17);\n\t\n\tvar _Label2 = _interopRequireDefault(_Label);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Edge = function (_Element) {\n\t\t_inherits(Edge, _Element);\n\t\n\t\tfunction Edge(graph) {\n\t\t\tvar config = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t\t\tvar source = arguments[2];\n\t\t\tvar target = arguments[3];\n\t\n\t\t\t_classCallCheck(this, Edge);\n\t\n\t\t\tif (!config.id) config.id = _lodash2.default.uniqueId('E');\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Edge).call(this, graph, config));\n\t\n\t\t\t_this.source = _this.target = null;\n\t\t\t_this.setSource(source, config.sourcePos);\n\t\t\t_this.setTarget(target, config.targetPos);\n\t\t\treturn _this;\n\t\t}\n\t\n\t\t_createClass(Edge, [{\n\t\t\tkey: \"setSource\",\n\t\t\tvalue: function setSource(node, pos) {\n\t\t\t\tthis.setTerminal(node, pos, 'source');\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"setTarget\",\n\t\t\tvalue: function setTarget(node, pos) {\n\t\t\t\tthis.setTerminal(node, pos, 'target');\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Internal methods to set either the source or target\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"setTerminal\",\n\t\t\tvalue: function setTerminal(node, pos, dir) {\n\t\t\t\tvar end = dir == 'source' ? this.source : this.target;\n\t\t\t\tif (end == node) {\n\t\t\t\t\t// simply change the position of the edge.\n\t\t\t\t\tif (node) node.setEdgeAt(this, pos);\n\t\t\t\t} else {\n\t\t\t\t\tif (end) {\n\t\t\t\t\t\t// first remove the edge from the current end\n\t\t\t\t\t\tend.removeEdge(this);\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif (node) {\n\t\t\t\t\t\tif (dir == 'source') node.addOutEdge(this, pos);else node.addInEdge(this, pos);\n\t\t\t\t\t}\n\t\t\t\t\tif (dir == 'source') this.source = node;else this.target = node;\n\t\t\t\t\tthis.clearPoints();\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\t/*getView(key) {\n\t  \t}*/\n\t\n\t\t}, {\n\t\t\tkey: \"getLabelBox\",\n\t\t\tvalue: function getLabelBox(key) {\n\t\t\t\treturn _Label2.default.getLabelBoxForEdge(this.prop('label'), this.getView(key), this.viewProp(key, 'labelConfig'));\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getPoints\",\n\t\t\tvalue: function getPoints() {\n\t\t\t\t/*if (this.graph.eventDispatcher.dragging) {\n\t   \tthis.clearPoints();\n\t   \treturn [Anchor.getStartPoint(this), Anchor.getEndPoint(this)];\n\t   }*/\n\t\n\t\t\t\tif (!this.points || this.points.length == 0) {\n\t\t\t\t\tdelete this.length;\n\t\t\t\t\tthis.points = EdgeStyle.getPoints(this);\n\t\t\t\t}\n\t\n\t\t\t\treturn this.points;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Return the total length of this connection, in pixels.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"getLength\",\n\t\t\tvalue: function getLength() {\n\t\t\t\tif (!_lodash2.default.isUndefined(this.length)) return this.length;\n\t\n\t\t\t\tvar points = this.getPoints();\n\t\t\t\tvar i,\n\t\t\t\t    l = 0;\n\t\t\t\tfor (i = 0; i < points.length - 1; i++) {\n\t\t\t\t\tl += points[i].distance(points[i + 1]);\n\t\t\t\t}return this.length = l;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"clearPoints\",\n\t\t\tvalue: function clearPoints() {\n\t\t\t\tdelete this.points;\n\t\t\t\tdelete this.length;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Return a pair of points as reference to the calculation of start and end points.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"getReferencePoints\",\n\t\t\tvalue: function getReferencePoints() {\n\t\t\t\tvar pts = [];\n\t\t\t\tvar refPts = this.prop('refPts');\n\t\t\t\tif (this.source) pts.push(this.source.getBounds().getCenter());else pts.push(refPts[0]);\n\t\n\t\t\t\tif (this.target) pts.push(this.target.getBounds().getCenter());else pts.push(refPts[1]);\n\t\t\t\treturn pts;\n\t\t\t}\n\t\n\t\t\t/**\n\t  * Calculate the position where to put modifiers or label..\n\t  *\n\t  * @param geometry: defines how far along the edge should the point be placed.\n\t  * @return the relative position.\n\t  */\n\t\n\t\t}, {\n\t\t\tkey: \"getRelativePosition\",\n\t\t\tvalue: function getRelativePosition(geometry) {\n\t\t\t\tvar p = geometry.x,\n\t\t\t\t    l = this.getLength();\n\t\t\t\tif (_lodash2.default.isString(p)) {\n\t\t\t\t\tif (/%$/.test(p)) {\n\t\t\t\t\t\tp = s(p).strLeft('%').toNumber() / 100;\n\t\t\t\t\t} else if (/px$/.test(p)) {\n\t\t\t\t\t\tp = s(p).strLeft('px').toNumber();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (p >= -1 && p <= 1) p *= l;\n\t\t\t\tif (p < 0) p = l + p;\n\t\t\t\tif (p > l) p = l;\n\t\n\t\t\t\tvar points = this.getPoints(),\n\t\t\t\t    d,\n\t\t\t\t    point,\n\t\t\t\t    dir;\n\t\t\t\tfor (var i = 0; i < points.length - 1; i++) {\n\t\t\t\t\td = points[i].distance(points[i + 1]);\n\t\t\t\t\tif (p <= d) {\n\t\t\t\t\t\t// we've located the line segment.\n\t\t\t\t\t\tpoint = points[i].clone();\n\t\t\t\t\t\tdir = point.getDirection(points[i + 1]);\n\t\t\t\t\t\tpoint.translate(dir.getScaled(p));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tp -= d;\n\t\t\t\t}\n\t\n\t\t\t\t// return the last point.\n\t\t\t\tif (!point) point = points[points.length - 1];\n\t\t\t\treturn [point.x + geometry.offsetX, point.y + geometry.offsetY];\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"toString\",\n\t\t\tvalue: function toString() {\n\t\t\t\treturn 'Edge:{' + (_lodash2.default.isNull(this.source) ? 'null' : this.source.id) + '--' + (_lodash2.default.isNull(this.target) ? 'null' : this.target.id) + '}';\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"destroy\",\n\t\t\tvalue: function destroy() {\n\t\t\t\t_get(Object.getPrototypeOf(Edge.prototype), \"destroy\", this).call(this);\n\t\t\t\tthis.setSource(null);\n\t\t\t\tthis.setTarget(null);\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Edge;\n\t}(_Element3.default);\n\t\n\tEdge.namespace = \"Edges\";\n\t\n\texports.default = Edge;\n\t\n\t/*\n\n\tEdge.prototype.isVisible = function() {\n\t\tif (this.graph.getProperty(\"allowDanglingEdges\")) {\n\t\t\treturn (this.source ? this.source.isVisible() : true) && (this.target ? this.target.isVisible() : true) && this.getProperty(\"visible\");\n\t\t} else\n\t\t\treturn this.source && this.target && this.getProperty('visible') && this.source.isVisible() && this.target.isVisible();\n\t};\n\n\t*/\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _lodash = __webpack_require__(5);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar _Utils = __webpack_require__(2);\n\t\n\tvar _Utils2 = _interopRequireDefault(_Utils);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Layout = function () {\n\t\tfunction Layout() {\n\t\t\tvar config = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\t\n\t\t\t_classCallCheck(this, Layout);\n\t\n\t\t\tif (config.hasOwnProperty(\"orientation\") && _lodash2.default.isString(config.orientation)) {\n\t\t\t\tif (config.orientation.toUpperCase() == \"HORIZONTAL\") config.orientation = Layout.HORIZONTAL;else delete config.orientation;\n\t\t\t}\n\t\t\t_Utils2.default.initConfig(this, config);\n\t\t}\n\t\n\t\t_createClass(Layout, [{\n\t\t\tkey: \"layout\",\n\t\t\tvalue: function layout(root, bounds) {}\n\t\t}, {\n\t\t\tkey: \"reset\",\n\t\t\tvalue: function reset() {}\n\t\t}, {\n\t\t\tkey: \"destroy\",\n\t\t\tvalue: function destroy() {}\n\t\t}]);\n\t\n\t\treturn Layout;\n\t}();\n\t\n\tLayout.VERTICAL = 0;\n\tLayout.HORIZONTAL = 1;\n\t\n\tLayout.DEFAULTS = {\n\t\torientation: Layout.VERTICAL\n\t};\n\t\n\texports.default = Layout;\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Layout2 = __webpack_require__(19);\n\t\n\tvar _Layout3 = _interopRequireDefault(_Layout2);\n\t\n\tvar _bean = __webpack_require__(1);\n\t\n\tvar _bean2 = _interopRequireDefault(_bean);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar FlowLayout = function (_Layout) {\n\t\t_inherits(FlowLayout, _Layout);\n\t\n\t\tfunction FlowLayout() {\n\t\t\t_classCallCheck(this, FlowLayout);\n\t\n\t\t\treturn _possibleConstructorReturn(this, Object.getPrototypeOf(FlowLayout).apply(this, arguments));\n\t\t}\n\t\n\t\t_createClass(FlowLayout, [{\n\t\t\tkey: \"layout\",\n\t\t\tvalue: function layout(root, bounds) {\n\t\t\t\tvar items;\n\t\t\t\tif (!root) items = this.owner.childNodes;else if (_.isArray(root)) items = root;else items = root.getLinkedNodes('target');\n\t\t\t\tif (!items || items.length == 0) return;\n\t\n\t\t\t\tvar x = 0,\n\t\t\t\t    y = 0,\n\t\t\t\t    h = 0,\n\t\t\t\t    node;\n\t\t\t\tvar p1 = 0,\n\t\t\t\t    p2 = 0;\n\t\t\t\tfor (var i = 0; i < items.length; i++) {\n\t\t\t\t\tnode = items[i];\n\t\t\t\t\tif (x > 0 && x + this.hgap + node.getProperty(\"width\") > bounds.width) {\n\t\t\t\t\t\t// create new line\n\t\t\t\t\t\ty += h + this.vgap;\n\t\t\t\t\t\tx = 0;h = 0;p1 = 0;p2++;\n\t\t\t\t\t}\n\t\t\t\t\tnode._flPos = [p1, p2];\n\t\t\t\t\tnode.moveTo([bounds.x + x, bounds.y + y]);\n\t\t\t\t\tx += this.hgap + node.getProperty(\"width\");\n\t\t\t\t\tp1++;\n\t\t\t\t\th = h < node.getProperty(\"height\") ? node.getProperty(\"height\") : h;\n\t\t\t\t}\n\t\t\t\tthis.trigger(new Rectangle(bounds.x, bounds.y, bounds.width, y + h));\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn FlowLayout;\n\t}(_Layout3.default);\n\t\n\tFlowLayout.DEFAULTS = {\n\t\thgap: 10,\n\t\tvgap: 10\n\t};\n\t\n\texports.default = FlowLayout;\n\n/***/ },\n/* 21 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _lodash = __webpack_require__(5);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar _bean = __webpack_require__(1);\n\t\n\tvar _bean2 = _interopRequireDefault(_bean);\n\t\n\tvar _Utils = __webpack_require__(2);\n\t\n\tvar _Utils2 = _interopRequireDefault(_Utils);\n\t\n\tvar _DomUtils = __webpack_require__(7);\n\t\n\tvar _DomUtils2 = _interopRequireDefault(_DomUtils);\n\t\n\tvar _Layout = __webpack_require__(19);\n\t\n\tvar _Layout2 = _interopRequireDefault(_Layout);\n\t\n\tvar _Rectangle = __webpack_require__(4);\n\t\n\tvar _Rectangle2 = _interopRequireDefault(_Rectangle);\n\t\n\tvar _EventDispatcher = __webpack_require__(11);\n\t\n\tvar _EventDispatcher2 = _interopRequireDefault(_EventDispatcher);\n\t\n\tvar _Label = __webpack_require__(17);\n\t\n\tvar _Label2 = _interopRequireDefault(_Label);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar GraphView = function () {\n\t\tfunction GraphView(id, container) {\n\t\t\tvar config = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\t\n\t\t\t_classCallCheck(this, GraphView);\n\t\n\t\t\tthis.id = id;\n\t\t\tthis.box = _DomUtils2.default.createElement('div', { id: this.id, tabindex: 0 }, { overflow: \"hidden\", width: \"100%\", height: \"100%\", position: 'relative' });\n\t\t\tcontainer.appendChild(this.box);\n\t\t\tif (config.layout) {\n\t\t\t\tvar layoutClass = _Utils2.default.getConstructor(config.layout.jsClass, _Layout2.default);\n\t\t\t\tthis.layout = new layoutClass(config.layout.config);\n\t\t\t\tdelete config.layout;\n\t\t\t}\n\t\t\tthis.clear = true;\n\t\t\tthis._graph = null;\n\t\t\tthis.dispatcher = null;\n\t\t\t_Utils2.default.initConfig(this, config);\n\t\n\t\t\t// A object for storing template strings.\n\t\t\tthis.templateStore = {};\n\t\t\t_bean2.default.on(_Label2.default.editor, 'editor.update.*', function (key, value) {\n\t\t\t\tconsole.log(key + '=' + value);\n\t\t\t});\n\t\t}\n\t\n\t\t_createClass(GraphView, [{\n\t\t\tkey: \"graph\",\n\t\t\tvalue: function graph(_graph) {\n\t\t\t\tif (_graph) {\n\t\t\t\t\tthis._graph = _graph;\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t\treturn this._graph;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"viewport\",\n\t\t\tvalue: function viewport(scaled, _viewport) {\n\t\t\t\tif (_lodash2.default.isUndefined(scaled) || _lodash2.default.isNull(scaled)) scaled = false;\n\t\t\t\tif (!_viewport) {\n\t\t\t\t\tvar vp = new _Rectangle2.default(0, 0, this.box.offsetWidth, this.box.offsetHeight);\n\t\t\t\t\tif (scaled) return _Utils2.default.scale(this, vp);\n\t\t\t\t\treturn vp;\n\t\t\t\t}\n\t\t\t\tif (!scaled) _viewport = _Utils2.default.scale(this, _viewport);\n\t\t\t\tvar w = this.box.offsetWidth;\n\t\t\t\tvar scale = w / _viewport.width;\n\t\t\t\tthis.transform(-_viewport.x * scale, -_viewport.y * scale, scale);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"translate\",\n\t\t\tvalue: function translate(t) {\n\t\t\t\tif (!this._graph) return [0, 0];\n\t\t\t\tif (!arguments.length) {\n\t\t\t\t\tvar root = this._graph.getCurrentRoot();\n\t\t\t\t\tif (!root) return [0, 0];\n\t\t\t\t\treturn [root.viewProp(this.id, 'x') || 0, root.viewProp(this.id, 'y') || 0];\n\t\t\t\t}\n\t\t\t\tthis.transform(t[0], t[1]);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"scale\",\n\t\t\tvalue: function scale(k) {\n\t\t\t\tif (!this._graph) return 1.0;\n\t\t\t\tif (!arguments.length) {\n\t\t\t\t\tvar root = this._graph.getCurrentRoot();\n\t\t\t\t\tif (!root) return 1.0;\n\t\n\t\t\t\t\treturn root.viewProp(this.id, 'scale') || 1.0;\n\t\t\t\t}\n\t\n\t\t\t\tswitch (k) {\n\t\t\t\t\tcase \"in\":\n\t\t\t\t\t\tk = this.scale() * this.prop(\"zoomFactor\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"out\":\n\t\t\t\t\t\tk = this.scale() / this.prop(\"zoomFactor\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"actual\":\n\t\t\t\t\t\tk = 1.0;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"fit\":\n\t\t\t\t\t\tvar gridSize = this.prop(\"gridSize\") * 2;\n\t\n\t\t\t\t\t\tvar gBounds = this.getBounds();\n\t\t\t\t\t\tvar vBounds = this.viewport();\n\t\n\t\t\t\t\t\tvBounds.width -= gridSize;\n\t\t\t\t\t\tvBounds.height -= gridSize;\n\t\n\t\t\t\t\t\t/* Do not zoom more than actual if graph already fits into the bounds */\n\t\t\t\t\t\tk = Math.min(vBounds.width / gBounds.width, vBounds.height / gBounds.height, 1.0);\n\t\n\t\t\t\t\t\t//TODO: Add centering code here or trigger an event for that\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif (_lodash2.default.isString(k)) k = parseFloat(k);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tthis.transform(null, null, k);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"transform\",\n\t\t\tvalue: function transform(x, y, scale) {\n\t\t\t\tif (!this._graph) return;\n\t\t\t\tvar root = this._graph.getCurrentRoot();\n\t\t\t\tif (!root) return;\n\t\n\t\t\t\t/*if (!_.isNull(x) && !_.isNull(y))\n\t   \troot.move(x, y);\n\t   if (scale) {\n\t   \tscale = Math.max(this.getProperty(\"minZoom\"), Math.min(this.getProperty(\"maxZoom\"), scale));\n\t   \troot.setProperty('scale', scale);\n\t   \t// sync the scale between the zoom behavior and the graph\n\t   \tvar zoom = this.eventDispatcher.zoom;\n\t   \tif (zoom.scale() != scale)\n\t   \t\tzoom.scale(scale);\n\t   }\n\t   \tthis.trigger(Graph.EVENT_TYPES.REFRESH);*/\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"render\",\n\t\t\tvalue: function render() {\n\t\t\t\tif (!this._graph) return false;\n\t\t\t\t// intialize views\n\t\t\t\tif (this.layout) this.layout.layout(this._graph.getCurrentRoot(), this.viewport());\n\t\n\t\t\t\t// create the event dispatcher if necessary.\n\t\t\t\tif (!this.dispatcher) {\n\t\t\t\t\tthis.dispatcher = new _EventDispatcher2.default(this.box);\n\t\t\t\t\tthis.dispatcher.register('mouseup.node.label', function (type, ns, target, pos, event) {\n\t\t\t\t\t\tvar _this = this;\n\t\n\t\t\t\t\t\tvar node = this._graph.nodes[target.getAttribute('id')];\n\t\t\t\t\t\tif (!this.dispatcher.dragging && !node._firstSelection) {\n\t\t\t\t\t\t\t_Label2.default._delayEdit = _lodash2.default.delay(function () {\n\t\t\t\t\t\t\t\tif (_Label2.default._delayEdit) {\n\t\t\t\t\t\t\t\t\tdelete _Label2.default._delayEdit;\n\t\t\t\t\t\t\t\t\t_Label2.default.editor.start(node.id, _this.box, node.getLabelBox(_this.id), target, event.nsTarget);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}, 250);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this);\n\t\t\t\t\tthis.dispatcher.register(['mousedown.*', 'zoom*'], function (type, ns, target, pos, event) {\n\t\t\t\t\t\tif (!_DomUtils2.default.eventFromInput(event)) {\n\t\t\t\t\t\t\t_Label2.default.editor.stop();\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this);\n\t\t\t\t}\n\t\t\t\tthis.dispatcher.start();\n\t\t\t\treturn true;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Get the template for the specified key.\n\t   * @param key\n\t   * @param config if the template is a function, this config will be passed as the argument.\n\t   * @param preprocessor if the template contains preprossing elements, such as #{shape}, the preprocessor will be\n\t   * used to render them.\n\t   * @returns {*}\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"getTemplate\",\n\t\t\tvalue: function getTemplate(key, config, preprocessor) {\n\t\t\t\tvar t = this.templateStore[key];\n\t\t\t\tif (t && _lodash2.default.isFunction(t)) {\n\t\t\t\t\tt = t(config);\n\t\t\t\t}\n\t\t\t\t// check if there are any preprocessing tags.\n\t\t\t\tif (preprocessor) {\n\t\t\t\t\tvar parts = t.match(/(#{[^#]*})/g);\n\t\t\t\t\tvar obj = {};\n\t\t\t\t\tvar _iteratorNormalCompletion = true;\n\t\t\t\t\tvar _didIteratorError = false;\n\t\t\t\t\tvar _iteratorError = undefined;\n\t\n\t\t\t\t\ttry {\n\t\t\t\t\t\tfor (var _iterator = parts[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\t\t\t\t\tvar part = _step.value;\n\t\n\t\t\t\t\t\t\tpart = part.substring(2, part.length - 1).trim();\n\t\t\t\t\t\t\tobj[part] = preprocessor[_lodash2.default.camelCase('render ' + part)](this);\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t_didIteratorError = true;\n\t\t\t\t\t\t_iteratorError = err;\n\t\t\t\t\t} finally {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif (!_iteratorNormalCompletion && _iterator.return) {\n\t\t\t\t\t\t\t\t_iterator.return();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} finally {\n\t\t\t\t\t\t\tif (_didIteratorError) {\n\t\t\t\t\t\t\t\tthrow _iteratorError;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\n\t\t\t\t\tt = _lodash2.default.template(t, { interpolate: /#{([\\s\\S]+?)}/g })(obj);\n\t\t\t\t}\n\t\t\t\treturn t;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"reset\",\n\t\t\tvalue: function reset() {}\n\t\t}, {\n\t\t\tkey: \"destroy\",\n\t\t\tvalue: function destroy() {}\n\t\t}]);\n\t\n\t\treturn GraphView;\n\t}();\n\t\n\tGraphView.DEFAULTS = {\n\t\tdefaultClickMode: \"pan\",\n\t\thideOutline: false,\n\t\tsingleSelect: true,\n\t\tdraggable: true,\n\t\tgridEnabled: false,\n\t\tguidesEnabled: true,\n\t\tgridSize: 30,\n\t\tmaxZoom: 4.0,\n\t\tminZoom: 0.1,\n\t\tzoomFactor: 1.2,\n\t\tmaskOpacity: 0.5\n\t};\n\t\n\texports.default = GraphView;\n\n/***/ },\n/* 22 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _GraphView2 = __webpack_require__(21);\n\t\n\tvar _GraphView3 = _interopRequireDefault(_GraphView2);\n\t\n\tvar _StringBuffer = __webpack_require__(8);\n\t\n\tvar _StringBuffer2 = _interopRequireDefault(_StringBuffer);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar TEMPLATES = {\n\t\t$root: '<g id=\"${id}\" class=\"${className}\" ns=\"graph\" transform=\"translate(${x},${y})scale(${scale})\">#{children}</g>',\n\t\t$node: '<g id=\"${id}\" class=\"${className}\" ns=\"${namespace}\" transform=\"translate(${x},${y})\">#{shape}#{label}</g>',\n\t\t$edge: '<g id=\"${id}\" class=\"${className}\" ns=\"${namespace}\">#{shape}</g>',\n\t\tEllipse: '<ellipse cx=\"0\" cy=\"0\" rx=\"${width/2}\" ry=\"${height/2}\"></ellipse>',\n\t\tRectangle: '<rect x=\"${-width/2}\" y=\"${-height/2}\" width=\"${width}\" height=\"${height}\" rx=\"9\" ry=\"9\"></rect>',\n\t\tTriangle: '<polygon points=\"${-width/2},${-height/2} ${width/2},${-height/2} 0,${height/2}\"></polygon>',\n\t\tRhombus: '<polygon points=\"0,${-height/2} ${width/2},0 0,${height/2} ${-width/2},0\"></polygon>',\n\t\thexagon: function hexagon(config) {\n\t\t\tvar vertical = config.direction == 'north' || config.direction == 'south';\n\t\t\tif (vertical) return '<polygon points=\"0,${-height/2} ${width/2},${-height/4} ${width/2},${height/4} 0,${height/2} ${-width/2},${height/4} ${-width/2},${-height/4}\"></polygon>';else return '<polygon points=\"${-width/2},0 ${width/4},${-height/2} ${width/4},${-height/2} ${width/2},0 ${width/4},${height/2} ${-width/4},${height/2}\"></polygon>';\n\t\t},\n\t\tpath: function path(config) {\n\t\t\tvar buf = new _StringBuffer2.default();\n\t\t\tbuf.append('<path class=\"sleeper\" d=\"<%=gfw.SVGRenderer.getPathData(data.getPoints())%>\"></path>');\n\t\t\tbuf.append('<path d=\"<%=gfw.SVGRenderer.getPathData(data.getPoints())%>\"');\n\t\t\tif (config.startArrow != 'none' || config.endArrow != 'none') {\n\t\t\t\tbuf.append(' style=\"');\n\t\t\t\tif (config.startArrow != 'none') buf.append('marker-start: url(#<%=data.type.name%>_StartArrow);');\n\t\t\t\tif (config.endArrow != 'none') buf.append('marker-end: url(#<%=data.type.name%>_EndArrow);');\n\t\t\t\tbuf.append('\"');\n\t\t\t}\n\t\t\tbuf.append('></path>');\n\t\t\treturn buf.toString();\n\t\t},\n\t\timage: function image(config) {\n\t\t\treturn '<image x=\"${-width/2}\" y=\"${-height/2}\" width=\"${width}\" height=\"${height}\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"' + config.image + '\"></image>';\n\t\t}\n\t};\n\t\n\tvar SVGView = function (_GraphView) {\n\t\t_inherits(SVGView, _GraphView);\n\t\n\t\tfunction SVGView(id, container, config) {\n\t\t\t_classCallCheck(this, SVGView);\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, Object.getPrototypeOf(SVGView).call(this, id, container, config));\n\t\n\t\t\t_.assign(_this.templateStore, TEMPLATES);\n\t\t\treturn _this;\n\t\t}\n\t\n\t\t_createClass(SVGView, [{\n\t\t\tkey: \"render\",\n\t\t\tvalue: function render() {\n\t\t\t\tvar result = _get(Object.getPrototypeOf(SVGView.prototype), \"render\", this).call(this);\n\t\t\t\tif (result) {\n\t\t\t\t\tvar root = this._graph.getCurrentRoot();\n\t\t\t\t\tvar buf = new _StringBuffer2.default('<svg width=\"100%\" height=\"100%\">');\n\t\t\t\t\tbuf.append(root.render(this));\n\t\t\t\t\tbuf.append('</svg>');\n\t\t\t\t\tthis.box.innerHTML = buf.toString();\n\t\t\t\t}\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn SVGView;\n\t}(_GraphView3.default);\n\t\n\texports.default = SVGView;\n\n/***/ }\n/******/ ])\n});\n;\n"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 18828a1bb0963aabd4a6\n **/","import Events from \"bean\";\nimport Cache from \"./util/Utils\";\nimport Utils from \"./util/Utils\";\nimport DomUtils from \"./util/DomUtils\";\nimport StringBuffer from \"./util/StringBuffer\";\nimport Point from \"./geometry/Point\";\nimport Line from \"./geometry/Line\";\nimport Shape from \"./geometry/Shape\";\nimport Rectangle from \"./geometry/Rectangle\";\nimport Ellipse from \"./geometry/Ellipse\";\nimport EventDispatcher from \"./event/EventDispatcher\";\nimport Graph from \"./graph/Graph\";\nimport Element from \"./graph/Element\";\nimport Node from \"./graph/Node\";\nimport Edge from \"./graph/Edge\";\nimport Layout from \"./layout/Layout\";\nimport FlowLayout from \"./layout/FlowLayout\";\nimport Label from \"./view/Label\";\nimport GraphView from \"./view/GraphView\";\nimport SVGView from \"./view/SVGView\";\n\nShape.addShape(\"Rectangle\", Rectangle);\nShape.addShape(\"Ellipse\", Ellipse);\n\nexport default {\n\tEvents,\n\tCache,\n\tUtils,\n\tDomUtils,\n\tStringBuffer,\n\tPoint,\n\tLine,\n\tShape,\n\tRectangle,\n\tEllipse,\n\tEventDispatcher,\n\tLabel,\n\tGraph,\n\tElement,\n\tNode,\n\tEdge,\n\tLayout,\n\tFlowLayout,\n\tGraphView,\n\tSVGView\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","/*!\n  * Bean - copyright (c) Jacob Thornton 2011-2012\n  * https://github.com/fat/bean\n  * MIT license\n  */\n(function (name, context, definition) {\n  if (typeof module != 'undefined' && module.exports) module.exports = definition()\n  else if (typeof define == 'function' && define.amd) define(definition)\n  else context[name] = definition()\n})('bean', this, function (name, context) {\n  name    = name    || 'bean'\n  context = context || this\n\n  var win            = window\n    , old            = context[name]\n    , namespaceRegex = /[^\\.]*(?=\\..*)\\.|.*/\n    , nameRegex      = /\\..*/\n    , addEvent       = 'addEventListener'\n    , removeEvent    = 'removeEventListener'\n    , doc            = document || {}\n    , root           = doc.documentElement || {}\n    , W3C_MODEL      = root[addEvent]\n    , eventSupport   = W3C_MODEL ? addEvent : 'attachEvent'\n    , ONE            = {} // singleton for quick matching making add() do one()\n\n    , slice          = Array.prototype.slice\n    , str2arr        = function (s, d) { return s.split(d || ' ') }\n    , isString       = function (o) { return typeof o == 'string' }\n    , isFunction     = function (o) { return typeof o == 'function' }\n\n      // events that we consider to be 'native', anything not in this list will\n      // be treated as a custom event\n    , standardNativeEvents =\n        'click dblclick mouseup mousedown contextmenu '                  + // mouse buttons\n        'mousewheel mousemultiwheel DOMMouseScroll '                     + // mouse wheel\n        'mouseover mouseout mousemove selectstart selectend '            + // mouse movement\n        'keydown keypress keyup '                                        + // keyboard\n        'orientationchange '                                             + // mobile\n        'focus blur change reset select submit '                         + // form elements\n        'load unload beforeunload resize move DOMContentLoaded '         + // window\n        'readystatechange message '                                      + // window\n        'error abort scroll '                                              // misc\n      // element.fireEvent('onXYZ'... is not forgiving if we try to fire an event\n      // that doesn't actually exist, so make sure we only do these on newer browsers\n    , w3cNativeEvents =\n        'show '                                                          + // mouse buttons\n        'input invalid '                                                 + // form elements\n        'touchstart touchmove touchend touchcancel '                     + // touch\n        'gesturestart gesturechange gestureend '                         + // gesture\n        'textinput '                                                     + // TextEvent\n        'readystatechange pageshow pagehide popstate '                   + // window\n        'hashchange offline online '                                     + // window\n        'afterprint beforeprint '                                        + // printing\n        'dragstart dragenter dragover dragleave drag drop dragend '      + // dnd\n        'loadstart progress suspend emptied stalled loadmetadata '       + // media\n        'loadeddata canplay canplaythrough playing waiting seeking '     + // media\n        'seeked ended durationchange timeupdate play pause ratechange '  + // media\n        'volumechange cuechange '                                        + // media\n        'checking noupdate downloading cached updateready obsolete '       // appcache\n\n      // convert to a hash for quick lookups\n    , nativeEvents = (function (hash, events, i) {\n        for (i = 0; i < events.length; i++) events[i] && (hash[events[i]] = 1)\n        return hash\n      }({}, str2arr(standardNativeEvents + (W3C_MODEL ? w3cNativeEvents : ''))))\n\n      // custom events are events that we *fake*, they are not provided natively but\n      // we can use native events to generate them\n    , customEvents = (function () {\n        var isAncestor = 'compareDocumentPosition' in root\n              ? function (element, container) {\n                  return container.compareDocumentPosition && (container.compareDocumentPosition(element) & 16) === 16\n                }\n              : 'contains' in root\n                ? function (element, container) {\n                    container = container.nodeType === 9 || container === window ? root : container\n                    return container !== element && container.contains(element)\n                  }\n                : function (element, container) {\n                    while (element = element.parentNode) if (element === container) return 1\n                    return 0\n                  }\n          , check = function (event) {\n              var related = event.relatedTarget\n              return !related\n                ? related == null\n                : (related !== this && related.prefix !== 'xul' && !/document/.test(this.toString())\n                    && !isAncestor(related, this))\n            }\n\n        return {\n            mouseenter: { base: 'mouseover', condition: check }\n          , mouseleave: { base: 'mouseout', condition: check }\n          , mousewheel: { base: /Firefox/.test(navigator.userAgent) ? 'DOMMouseScroll' : 'mousewheel' }\n        }\n      }())\n\n      // we provide a consistent Event object across browsers by taking the actual DOM\n      // event object and generating a new one from its properties.\n    , Event = (function () {\n            // a whitelist of properties (for different event types) tells us what to check for and copy\n        var commonProps  = str2arr('altKey attrChange attrName bubbles cancelable ctrlKey currentTarget ' +\n              'detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey '  +\n              'srcElement target timeStamp type view which propertyName')\n          , mouseProps   = commonProps.concat(str2arr('button buttons clientX clientY dataTransfer '      +\n              'fromElement offsetX offsetY pageX pageY screenX screenY toElement'))\n          , mouseWheelProps = mouseProps.concat(str2arr('wheelDelta wheelDeltaX wheelDeltaY wheelDeltaZ ' +\n              'axis')) // 'axis' is FF specific\n          , keyProps     = commonProps.concat(str2arr('char charCode key keyCode keyIdentifier '          +\n              'keyLocation location'))\n          , textProps    = commonProps.concat(str2arr('data'))\n          , touchProps   = commonProps.concat(str2arr('touches targetTouches changedTouches scale rotation'))\n          , messageProps = commonProps.concat(str2arr('data origin source'))\n          , stateProps   = commonProps.concat(str2arr('state'))\n          , overOutRegex = /over|out/\n            // some event types need special handling and some need special properties, do that all here\n          , typeFixers   = [\n                { // key events\n                    reg: /key/i\n                  , fix: function (event, newEvent) {\n                      newEvent.keyCode = event.keyCode || event.which\n                      return keyProps\n                    }\n                }\n              , { // mouse events\n                    reg: /click|mouse(?!(.*wheel|scroll))|menu|drag|drop/i\n                  , fix: function (event, newEvent, type) {\n                      newEvent.rightClick = event.which === 3 || event.button === 2\n                      newEvent.pos = { x: 0, y: 0 }\n                      if (event.pageX || event.pageY) {\n                        newEvent.clientX = event.pageX\n                        newEvent.clientY = event.pageY\n                      } else if (event.clientX || event.clientY) {\n                        newEvent.clientX = event.clientX + doc.body.scrollLeft + root.scrollLeft\n                        newEvent.clientY = event.clientY + doc.body.scrollTop + root.scrollTop\n                      }\n                      if (overOutRegex.test(type)) {\n                        newEvent.relatedTarget = event.relatedTarget\n                          || event[(type == 'mouseover' ? 'from' : 'to') + 'Element']\n                      }\n                      return mouseProps\n                    }\n                }\n              , { // mouse wheel events\n                    reg: /mouse.*(wheel|scroll)/i\n                  , fix: function () { return mouseWheelProps }\n                }\n              , { // TextEvent\n                    reg: /^text/i\n                  , fix: function () { return textProps }\n                }\n              , { // touch and gesture events\n                    reg: /^touch|^gesture/i\n                  , fix: function () { return touchProps }\n                }\n              , { // message events\n                    reg: /^message$/i\n                  , fix: function () { return messageProps }\n                }\n              , { // popstate events\n                    reg: /^popstate$/i\n                  , fix: function () { return stateProps }\n                }\n              , { // everything else\n                    reg: /.*/\n                  , fix: function () { return commonProps }\n                }\n            ]\n          , typeFixerMap = {} // used to map event types to fixer functions (above), a basic cache mechanism\n\n          , Event = function (event, element, isNative) {\n              if (!arguments.length) return\n              event = event || ((element.ownerDocument || element.document || element).parentWindow || win).event\n              this.originalEvent = event\n              this.isNative       = isNative\n              this.isBean         = true\n\n              if (!event) return\n\n              var type   = event.type\n                , target = event.target || event.srcElement\n                , i, l, p, props, fixer\n\n              this.target = target && target.nodeType === 3 ? target.parentNode : target\n\n              if (isNative) { // we only need basic augmentation on custom events, the rest expensive & pointless\n                fixer = typeFixerMap[type]\n                if (!fixer) { // haven't encountered this event type before, map a fixer function for it\n                  for (i = 0, l = typeFixers.length; i < l; i++) {\n                    if (typeFixers[i].reg.test(type)) { // guaranteed to match at least one, last is .*\n                      typeFixerMap[type] = fixer = typeFixers[i].fix\n                      break\n                    }\n                  }\n                }\n\n                props = fixer(event, this, type)\n                for (i = props.length; i--;) {\n                  if (!((p = props[i]) in this) && p in event) this[p] = event[p]\n                }\n              }\n            }\n\n        // preventDefault() and stopPropagation() are a consistent interface to those functions\n        // on the DOM, stop() is an alias for both of them together\n        Event.prototype.preventDefault = function () {\n          if (this.originalEvent.preventDefault) this.originalEvent.preventDefault()\n          else this.originalEvent.returnValue = false\n        }\n        Event.prototype.stopPropagation = function () {\n          if (this.originalEvent.stopPropagation) this.originalEvent.stopPropagation()\n          else this.originalEvent.cancelBubble = true\n        }\n        Event.prototype.stop = function () {\n          this.preventDefault()\n          this.stopPropagation()\n          this.stopped = true\n        }\n        // stopImmediatePropagation() has to be handled internally because we manage the event list for\n        // each element\n        // note that originalElement may be a Bean#Event object in some situations\n        Event.prototype.stopImmediatePropagation = function () {\n          if (this.originalEvent.stopImmediatePropagation) this.originalEvent.stopImmediatePropagation()\n          this.isImmediatePropagationStopped = function () { return true }\n        }\n        Event.prototype.isImmediatePropagationStopped = function () {\n          return this.originalEvent.isImmediatePropagationStopped && this.originalEvent.isImmediatePropagationStopped()\n        }\n        Event.prototype.clone = function (currentTarget) {\n          //TODO: this is ripe for optimisation, new events are *expensive*\n          // improving this will speed up delegated events\n          var ne = new Event(this, this.element, this.isNative)\n          ne.currentTarget = currentTarget\n          return ne\n        }\n\n        return Event\n      }())\n\n      // if we're in old IE we can't do onpropertychange on doc or win so we use doc.documentElement for both\n    , targetElement = function (element, isNative) {\n        return !W3C_MODEL && !isNative && (element === doc || element === win) ? root : element\n      }\n\n      /**\n        * Bean maintains an internal registry for event listeners. We don't touch elements, objects\n        * or functions to identify them, instead we store everything in the registry.\n        * Each event listener has a RegEntry object, we have one 'registry' for the whole instance.\n        */\n    , RegEntry = (function () {\n        // each handler is wrapped so we can handle delegation and custom events\n        var wrappedHandler = function (element, fn, condition, args) {\n            var call = function (event, eargs) {\n                  return fn.apply(element, args ? slice.call(eargs, event ? 0 : 1).concat(args) : eargs)\n                }\n              , findTarget = function (event, eventElement) {\n                  return fn.__beanDel ? fn.__beanDel.ft(event.target, element) : eventElement\n                }\n              , handler = condition\n                  ? function (event) {\n                      var target = findTarget(event, this) // deleated event\n                      if (condition.apply(target, arguments)) {\n                        if (event) event.currentTarget = target\n                        return call(event, arguments)\n                      }\n                    }\n                  : function (event) {\n                      if (fn.__beanDel) event = event.clone(findTarget(event)) // delegated event, fix the fix\n                      return call(event, arguments)\n                    }\n            handler.__beanDel = fn.__beanDel\n            return handler\n          }\n\n        , RegEntry = function (element, type, handler, original, namespaces, args, root) {\n            var customType     = customEvents[type]\n              , isNative\n\n            if (type == 'unload') {\n              // self clean-up\n              handler = once(removeListener, element, type, handler, original)\n            }\n\n            if (customType) {\n              if (customType.condition) {\n                handler = wrappedHandler(element, handler, customType.condition, args)\n              }\n              type = customType.base || type\n            }\n\n            this.isNative      = isNative = nativeEvents[type] && !!element[eventSupport]\n            this.customType    = !W3C_MODEL && !isNative && type\n            this.element       = element\n            this.type          = type\n            this.original      = original\n            this.namespaces    = namespaces\n            this.eventType     = W3C_MODEL || isNative ? type : 'propertychange'\n            this.target        = targetElement(element, isNative)\n            this[eventSupport] = !!this.target[eventSupport]\n            this.root          = root\n            this.handler       = wrappedHandler(element, handler, null, args)\n          }\n\n        // given a list of namespaces, is our entry in any of them?\n        RegEntry.prototype.inNamespaces = function (checkNamespaces) {\n          var i, j, c = 0\n          if (!checkNamespaces) return true\n          if (!this.namespaces) return false\n          for (i = checkNamespaces.length; i--;) {\n            for (j = this.namespaces.length; j--;) {\n              if (checkNamespaces[i] == this.namespaces[j]) c++\n            }\n          }\n          return checkNamespaces.length === c\n        }\n\n        // match by element, original fn (opt), handler fn (opt)\n        RegEntry.prototype.matches = function (checkElement, checkOriginal, checkHandler) {\n          return this.element === checkElement &&\n            (!checkOriginal || this.original === checkOriginal) &&\n            (!checkHandler || this.handler === checkHandler)\n        }\n\n        return RegEntry\n      }())\n\n    , registry = (function () {\n        // our map stores arrays by event type, just because it's better than storing\n        // everything in a single array.\n        // uses '$' as a prefix for the keys for safety and 'r' as a special prefix for\n        // rootListeners so we can look them up fast\n        var map = {}\n\n          // generic functional search of our registry for matching listeners,\n          // `fn` returns false to break out of the loop\n          , forAll = function (element, type, original, handler, root, fn) {\n              var pfx = root ? 'r' : '$'\n              if (!type || type == '*') {\n                // search the whole registry\n                for (var t in map) {\n                  if (t.charAt(0) == pfx) {\n                    forAll(element, t.substr(1), original, handler, root, fn)\n                  }\n                }\n              } else {\n                var i = 0, l, list = map[pfx + type], all = element == '*'\n                if (!list) return\n                for (l = list.length; i < l; i++) {\n                  if ((all || list[i].matches(element, original, handler)) && !fn(list[i], list, i, type)) return\n                }\n              }\n            }\n\n          , has = function (element, type, original, root) {\n              // we're not using forAll here simply because it's a bit slower and this\n              // needs to be fast\n              var i, list = map[(root ? 'r' : '$') + type]\n              if (list) {\n                for (i = list.length; i--;) {\n                  if (!list[i].root && list[i].matches(element, original, null)) return true\n                }\n              }\n              return false\n            }\n\n          , get = function (element, type, original, root) {\n              var entries = []\n              forAll(element, type, original, null, root, function (entry) {\n                return entries.push(entry)\n              })\n              return entries\n            }\n\n          , put = function (entry) {\n              var has = !entry.root && !this.has(entry.element, entry.type, null, false)\n                , key = (entry.root ? 'r' : '$') + entry.type\n              ;(map[key] || (map[key] = [])).push(entry)\n              return has\n            }\n\n          , del = function (entry) {\n              forAll(entry.element, entry.type, null, entry.handler, entry.root, function (entry, list, i) {\n                list.splice(i, 1)\n                entry.removed = true\n                if (list.length === 0) delete map[(entry.root ? 'r' : '$') + entry.type]\n                return false\n              })\n            }\n\n            // dump all entries, used for onunload\n          , entries = function () {\n              var t, entries = []\n              for (t in map) {\n                if (t.charAt(0) == '$') entries = entries.concat(map[t])\n              }\n              return entries\n            }\n\n        return { has: has, get: get, put: put, del: del, entries: entries }\n      }())\n\n      // we need a selector engine for delegated events, use querySelectorAll if it exists\n      // but for older browsers we need Qwery, Sizzle or similar\n    , selectorEngine\n    , setSelectorEngine = function (e) {\n        if (!arguments.length) {\n          selectorEngine = doc.querySelectorAll\n            ? function (s, r) {\n                return r.querySelectorAll(s)\n              }\n            : function () {\n                throw new Error('Bean: No selector engine installed') // eeek\n              }\n        } else {\n          selectorEngine = e\n        }\n      }\n\n      // we attach this listener to each DOM event that we need to listen to, only once\n      // per event type per DOM element\n    , rootListener = function (event, type) {\n        if (!W3C_MODEL && type && event && event.propertyName != '_on' + type) return\n\n        var listeners = registry.get(this, type || event.type, null, false)\n          , l = listeners.length\n          , i = 0\n\n        event = new Event(event, this, true)\n        if (type) event.type = type\n\n        // iterate through all handlers registered for this type, calling them unless they have\n        // been removed by a previous handler or stopImmediatePropagation() has been called\n        for (; i < l && !event.isImmediatePropagationStopped(); i++) {\n          if (!listeners[i].removed) listeners[i].handler.call(this, event)\n        }\n      }\n\n      // add and remove listeners to DOM elements\n    , listener = W3C_MODEL\n        ? function (element, type, add) {\n            // new browsers\n            element[add ? addEvent : removeEvent](type, rootListener, false)\n          }\n        : function (element, type, add, custom) {\n            // IE8 and below, use attachEvent/detachEvent and we have to piggy-back propertychange events\n            // to simulate event bubbling etc.\n            var entry\n            if (add) {\n              registry.put(entry = new RegEntry(\n                  element\n                , custom || type\n                , function (event) { // handler\n                    rootListener.call(element, event, custom)\n                  }\n                , rootListener\n                , null\n                , null\n                , true // is root\n              ))\n              if (custom && element['_on' + custom] == null) element['_on' + custom] = 0\n              entry.target.attachEvent('on' + entry.eventType, entry.handler)\n            } else {\n              entry = registry.get(element, custom || type, rootListener, true)[0]\n              if (entry) {\n                entry.target.detachEvent('on' + entry.eventType, entry.handler)\n                registry.del(entry)\n              }\n            }\n          }\n\n    , once = function (rm, element, type, fn, originalFn) {\n        // wrap the handler in a handler that does a remove as well\n        return function () {\n          fn.apply(this, arguments)\n          rm(element, type, originalFn)\n        }\n      }\n\n    , removeListener = function (element, orgType, handler, namespaces) {\n        var type     = orgType && orgType.replace(nameRegex, '')\n          , handlers = registry.get(element, type, null, false)\n          , removed  = {}\n          , i, l\n\n        for (i = 0, l = handlers.length; i < l; i++) {\n          if ((!handler || handlers[i].original === handler) && handlers[i].inNamespaces(namespaces)) {\n            // TODO: this is problematic, we have a registry.get() and registry.del() that\n            // both do registry searches so we waste cycles doing this. Needs to be rolled into\n            // a single registry.forAll(fn) that removes while finding, but the catch is that\n            // we'll be splicing the arrays that we're iterating over. Needs extra tests to\n            // make sure we don't screw it up. @rvagg\n            registry.del(handlers[i])\n            if (!removed[handlers[i].eventType] && handlers[i][eventSupport])\n              removed[handlers[i].eventType] = { t: handlers[i].eventType, c: handlers[i].type }\n          }\n        }\n        // check each type/element for removed listeners and remove the rootListener where it's no longer needed\n        for (i in removed) {\n          if (!registry.has(element, removed[i].t, null, false)) {\n            // last listener of this type, remove the rootListener\n            listener(element, removed[i].t, false, removed[i].c)\n          }\n        }\n      }\n\n      // set up a delegate helper using the given selector, wrap the handler function\n    , delegate = function (selector, fn) {\n        //TODO: findTarget (therefore $) is called twice, once for match and once for\n        // setting e.currentTarget, fix this so it's only needed once\n        var findTarget = function (target, root) {\n              var i, array = isString(selector) ? selectorEngine(selector, root) : selector\n              for (; target && target !== root; target = target.parentNode) {\n                for (i = array.length; i--;) {\n                  if (array[i] === target) return target\n                }\n              }\n            }\n          , handler = function (e) {\n              var match = findTarget(e.target, this)\n              if (match) fn.apply(match, arguments)\n            }\n\n        // __beanDel isn't pleasant but it's a private function, not exposed outside of Bean\n        handler.__beanDel = {\n            ft       : findTarget // attach it here for customEvents to use too\n          , selector : selector\n        }\n        return handler\n      }\n\n    , fireListener = W3C_MODEL ? function (isNative, type, element) {\n        // modern browsers, do a proper dispatchEvent()\n        var evt = doc.createEvent(isNative ? 'HTMLEvents' : 'UIEvents')\n        evt[isNative ? 'initEvent' : 'initUIEvent'](type, true, true, win, 1)\n        element.dispatchEvent(evt)\n      } : function (isNative, type, element) {\n        // old browser use onpropertychange, just increment a custom property to trigger the event\n        element = targetElement(element, isNative)\n        isNative ? element.fireEvent('on' + type, doc.createEventObject()) : element['_on' + type]++\n      }\n\n      /**\n        * Public API: off(), on(), add(), (remove()), one(), fire(), clone()\n        */\n\n      /**\n        * off(element[, eventType(s)[, handler ]])\n        */\n    , off = function (element, typeSpec, fn) {\n        var isTypeStr = isString(typeSpec)\n          , k, type, namespaces, i\n\n        if (isTypeStr && typeSpec.indexOf(' ') > 0) {\n          // off(el, 't1 t2 t3', fn) or off(el, 't1 t2 t3')\n          typeSpec = str2arr(typeSpec)\n          for (i = typeSpec.length; i--;)\n            off(element, typeSpec[i], fn)\n          return element\n        }\n\n        type = isTypeStr && typeSpec.replace(nameRegex, '')\n        if (type && customEvents[type]) type = customEvents[type].base\n\n        if (!typeSpec || isTypeStr) {\n          // off(el) or off(el, t1.ns) or off(el, .ns) or off(el, .ns1.ns2.ns3)\n          if (namespaces = isTypeStr && typeSpec.replace(namespaceRegex, '')) namespaces = str2arr(namespaces, '.')\n          removeListener(element, type, fn, namespaces)\n        } else if (isFunction(typeSpec)) {\n          // off(el, fn)\n          removeListener(element, null, typeSpec)\n        } else {\n          // off(el, { t1: fn1, t2, fn2 })\n          for (k in typeSpec) {\n            if (typeSpec.hasOwnProperty(k)) off(element, k, typeSpec[k])\n          }\n        }\n\n        return element\n      }\n\n      /**\n        * on(element, eventType(s)[, selector], handler[, args ])\n        */\n    , on = function(element, events, selector, fn) {\n        var originalFn, type, types, i, args, entry, first\n\n        //TODO: the undefined check means you can't pass an 'args' argument, fix this perhaps?\n        if (selector === undefined && typeof events == 'object') {\n          //TODO: this can't handle delegated events\n          for (type in events) {\n            if (events.hasOwnProperty(type)) {\n              on.call(this, element, type, events[type])\n            }\n          }\n          return\n        }\n\n        if (!isFunction(selector)) {\n          // delegated event\n          originalFn = fn\n          args       = slice.call(arguments, 4)\n          fn         = delegate(selector, originalFn, selectorEngine)\n        } else {\n          args       = slice.call(arguments, 3)\n          fn         = originalFn = selector\n        }\n\n        types = str2arr(events)\n\n        // special case for one(), wrap in a self-removing handler\n        if (this === ONE) {\n          fn = once(off, element, events, fn, originalFn)\n        }\n\n        for (i = types.length; i--;) {\n          // add new handler to the registry and check if it's the first for this element/type\n          first = registry.put(entry = new RegEntry(\n              element\n            , types[i].replace(nameRegex, '') // event type\n            , fn\n            , originalFn\n            , str2arr(types[i].replace(namespaceRegex, ''), '.') // namespaces\n            , args\n            , false // not root\n          ))\n          if (entry[eventSupport] && first) {\n            // first event of this type on this element, add root listener\n            listener(element, entry.eventType, true, entry.customType)\n          }\n        }\n\n        return element\n      }\n\n      /**\n        * add(element[, selector], eventType(s), handler[, args ])\n        *\n        * Deprecated: kept (for now) for backward-compatibility\n        */\n    , add = function (element, events, fn, delfn) {\n        return on.apply(\n            null\n          , !isString(fn)\n              ? slice.call(arguments)\n              : [ element, fn, events, delfn ].concat(arguments.length > 3 ? slice.call(arguments, 5) : [])\n        )\n      }\n\n      /**\n        * one(element, eventType(s)[, selector], handler[, args ])\n        */\n    , one = function () {\n        return on.apply(ONE, arguments)\n      }\n\n      /**\n        * fire(element, eventType(s)[, args ])\n        *\n        * The optional 'args' argument must be an array, if no 'args' argument is provided\n        * then we can use the browser's DOM event system, otherwise we trigger handlers manually\n        */\n    , fire = function (element, type, args) {\n        var types = str2arr(type)\n          , i, j, l, names, handlers\n\n        for (i = types.length; i--;) {\n          type = types[i].replace(nameRegex, '')\n          if (names = types[i].replace(namespaceRegex, '')) names = str2arr(names, '.')\n          if (!names && !args && element[eventSupport]) {\n            fireListener(nativeEvents[type], type, element)\n          } else {\n            // non-native event, either because of a namespace, arguments or a non DOM element\n            // iterate over all listeners and manually 'fire'\n            handlers = registry.get(element, type, null, false)\n            args = [false].concat(args)\n            for (j = 0, l = handlers.length; j < l; j++) {\n              if (handlers[j].inNamespaces(names)) {\n                handlers[j].handler.apply(element, args)\n              }\n            }\n          }\n        }\n        return element\n      }\n\n      /**\n        * clone(dstElement, srcElement[, eventType ])\n        *\n        * TODO: perhaps for consistency we should allow the same flexibility in type specifiers?\n        */\n    , clone = function (element, from, type) {\n        var handlers = registry.get(from, type, null, false)\n          , l = handlers.length\n          , i = 0\n          , args, beanDel\n\n        for (; i < l; i++) {\n          if (handlers[i].original) {\n            args = [ element, handlers[i].type ]\n            if (beanDel = handlers[i].handler.__beanDel) args.push(beanDel.selector)\n            args.push(handlers[i].original)\n            on.apply(null, args)\n          }\n        }\n        return element\n      }\n\n    , bean = {\n          'on'                : on\n        , 'add'               : add\n        , 'one'               : one\n        , 'off'               : off\n        , 'remove'            : off\n        , 'clone'             : clone\n        , 'fire'              : fire\n        , 'Event'             : Event\n        , 'setSelectorEngine' : setSelectorEngine\n        , 'noConflict'        : function () {\n            context[name] = old\n            return this\n          }\n      }\n\n  // for IE, clean up on unload to avoid leaks\n  if (win.attachEvent) {\n    var cleanup = function () {\n      var i, entries = registry.entries()\n      for (i in entries) {\n        if (entries[i].type && entries[i].type !== 'unload') off(entries[i].element, entries[i].type)\n      }\n      win.detachEvent('onunload', cleanup)\n      win.CollectGarbage && win.CollectGarbage()\n    }\n    win.attachEvent('onunload', cleanup)\n  }\n\n  // initialize selector engine to internal default (qSA or throw Error)\n  setSelectorEngine()\n\n  return bean\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/bean/bean.js\n ** module id = 1\n ** module chunks = 0\n **/","import Point from \"../geometry/Point\";\nimport Rectangle from \"../geometry/Rectangle\";\n\n// util variables\nlet _debugging = [], _debugAll = false, typeRegistry = {}, splice = Array.splice;\n\n/**\n * Utility functions\n */\nexport default {\n\ttype: function(namespace, name, type) {\n\t\tif (!typeRegistry[namespace])\n\t\t\ttypeRegistry[namespace] = {};\n\t\tif (!name)\n\t\t\treturn typeRegistry[namespace];\n\t\tif (!type)\n\t\t\treturn typeRegistry[namespace][name];\n\t\ttypeRegistry[namespace][name] = type;\n\t},\n\n\tcreateType: function(namespace, props, defaultType) {\n\t\tlet name = props.name;\n\n\t\t// first check if type exists\n\t\tlet type = this.type(namespace, name);\n\t\tif (!type) {\n\t\t\tlet extend = props.extends ? this.type(namespace, props.extends) : null;\n\t\t\tif (!extend && defaultType)\n\t\t\t\textend = defaultType;\n\t\t\tif (extend)\n\t\t\t\ttype = class extends extend {};\n\t\t\telse {\n\t\t\t\ttype = class {\n\t\t\t\t\tconstructor(config) {\n\t\t\t\t\t\t_.assign(this, config);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t\tdelete props.name;\n\t\t\tdelete props.extends;\n\t\t\t_.assign(type.prototype, props);\n\t\t\ttype.typeName = name;\n\t\t\tthis.type(namespace, name, type);\n\t\t\tthis.log('Utils', 'Utils.createType - ' + namespace + '.' + name);\n\t\t}\n\t\treturn type;\n\t},\n\n\tbuildTypes: function(types, namespace, defaultType) {\n\t\tthis.log('Utils', 'Utils.buildTypes - ' + namespace);\n\n\t\tif (!types && defaultType) {\n\t\t\tthis.createType(namespace, defaultType);\n\t\t\tthis.log('Utils', 'Utils.buildTypes end');\n\t\t\treturn;\n\t\t}\n\t\tif (defaultType) {\n\t\t\tlet type = _.remove(types, {name: defaultType.name});\n\t\t\ttype = type.length > 0 ? type[0] : null;\n\t\t\tif (type)\n\t\t\t\tdefaultType = this.createType(namespace, _.assign({}, defaultType, type));\n\t\t\telse\n\t\t\t\tdefaultType = this.createType(namespace, defaultType);\n\t\t}\n\n\t\t_.forEach(types, (type) => {\n\t\t\tthis.createType(namespace, type, defaultType);\n\t\t});\n\t\tthis.log('Utils', 'Utils.buildTypes end');\n\t},\n\n\t// Helper function to correctly set up the prototype chain, for subclasses.\n\t// Similar to `goog.inherits`, but uses a hash of prototype properties and\n\t// class properties to be extended.\n\textend: function(child, parent, protoProps, staticProps) {\n\t\t// Add static properties to the constructor function, if supplied.\n\t\t_.extend(child, parent, staticProps);\n\n\t\t// Set the prototype chain to inherit from `parent`, without calling\n\t\t// `parent`'s constructor function.\n\t\tvar Surrogate = function(){ this.constructor = child; };\n\t\tSurrogate.prototype = parent.prototype;\n\t\tchild.prototype = new Surrogate;\n\n\t\t// Add prototype properties (instance properties) to the subclass,\n\t\t// if supplied.\n\t\tif (protoProps) _.extend(child.prototype, protoProps);\n\n\t\t// Set a convenience property in case the parent's prototype is needed later.\n\t\tchild.superclass = parent.prototype;\n\n\t\treturn child;\n\t},\n\n\tinitConfig: function(obj, config) {\n\t\tlet props = {}, c = obj.constructor, cArr = [c];\n\t\twhile (c) {\n\t\t\tif (c.super) {\n\t\t\t\tc = c.super.constructor;\n\t\t\t\tsplice.apply(cArr, [0, 0, c]);\n\t\t\t} else\n\t\t\t\tc = null;\n\t\t}\n\n\t\tfor (let i = 0; i < cArr.length; i++) {\n\t\t\tc = cArr[i];\n\t\t\tif (c.DEFAULTS)\n\t\t\t\t_.assign(props, c.DEFAULTS);\n\t\t}\n\t\tobj.props = _.assign(props, config);\n\t\tc.prototype.prop = function(name, value) {\n\t\t\tif (!value)\n\t\t\t\treturn this.props[name];\n\t\t\tthis.props[name] = value;\n\t\t};\n\t},\n\n\t/**\n\t * Gets the JS class constructor.\n\t * @param {Object} jsClass\n\t * @param {Object} defaultClass\n\t */\n\tgetConstructor: function(jsClass, defaultClass) {\n\t\tif (!jsClass)\n\t\t\tjsClass = defaultClass;\n\n\t\tif (_.isString(jsClass))\n\t\t\tjsClass = eval(jsClass);\n\t\treturn jsClass;\n\t},\n\n\tdebug: function(moduleName) {\n\t\tif (moduleName) {\n\t\t\t_debugging.push(moduleName);\n\t\t} else {\n\t\t\t_debugAll = true;\n\t\t}\n\t},\n\n\tlog: function(name, message) {\n\t\tif (!window.console) { return; }\n\t\tvar debug = _debugAll;\n\t\tif (!_debugAll) {\n\t\t\tdebug = false;\n\t\t\tfor (var i = 0; i<_debugging.length; i++) {\n\t\t\t\tif (_debugging[i]==name) debug = true;\n\t\t\t}\n\t\t}\n\t\tif (!debug) { return; }\n\t\twhile (name.length<10) { name=name+' '; }\n\t\tname = name.substring(0, 10)+\" - \";\n\t\tconsole.info(name, message);\n\t},\n\n\t/**\n\t * Get the relative position of sub shapes within a parent share.\n\t * @param bounds\n\t * @param geometry The geometry information, the format of Geometry is:\n\t * {\n\t *      x: \"x coordinate of ref point, if less than 1, will be treated as the percentage of the parent width.\",\n\t *      y: \"y coordinate of ref point.\",\n\t *      anchorX: \"x pos of child relative to the ref point\",\n\t *      anchorY: \"y pos of child relative to the ref point\",\n\t *      offsetX: \"the offset in the x direction.\",\n\t *      offsetY: \"the offset in the y direction.\",\n\t *      width: \"the width of the child element\",\n\t *      height: \"the height of the child element\"\n\t * }\n\t * @returns {*[]}\n\t */\n\tgetRelativePosition: function(bounds, geometry) {\n\t\treturn [bounds.width * geometry.x + geometry.width * geometry.anchorX + geometry.offsetX,\n\t\t\tbounds.height * geometry.y + geometry.height * geometry.anchorY + geometry.offsetY];\n\t},\n\n\t/**\n\t * Get the position relative to the graph that's unscaled, i.e., absolute position without considering translation and scale.\n\t * @param view the graph view object\n\t * @param o can be either a Point or a Rectangle or a Point array.\n\t */\n\tunscale: function(view, o) {\n\t\tvar scale = view.scale();\n\t\tvar t = view.translate();\n\t\tif (o instanceof Rectangle)\n\t\t\treturn new Rectangle(o.x*scale+t[0], o.y*scale+t[1], o.width*scale, o.height*scale);\n\t\telse if (o instanceof Point)\n\t\t\treturn new Point(o.x*scale+t[0], o.y*scale+t[1]);\n\t\telse\n\t\t\treturn [o[0]*scale+t[0], o[1]*scale+t[1]];\n\t},\n\n\t/**\n\t * Get the position relative to the graph that's scaled, i.e., relative position considering translation and scale.\n\t * @param view the graph view object\n\t * @param o can be either a Point or a Rectangle or a Point array.\n\t */\n\tscale: function(view, o) {\n\t\tvar scale = view.scale();\n\t\tvar t = view.translate();\n\t\tif (o instanceof Rectangle)\n\t\t\treturn new Rectangle((o.x-t[0])/scale, (o.y-t[1])/scale, o.width/scale, o.height/scale);\n\t\telse if (o instanceof Point)\n\t\t\treturn new Point((o.x-t[0])/scale, (o.y-t[1])/scale);\n\t\telse\n\t\t\treturn [(o[0]-t[0])/scale, (o[1]-t[1])/scale];\n\t},\n\n\t/**\n\t * Convenience method.\n\t */\n\tgetObjProperty: function(obj, prop) {\n\t\tif (!obj)\n\t\t\treturn null;\n\t\tif (_.has(obj, prop))\n\t\t\treturn obj[prop];\n\t\tif (obj.getProperty && _.isFunction(obj.getProperty))\n\t\t\treturn obj.getProperty(prop);\n\t\treturn null;\n\t}\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/util/Utils.js\n **/","class Point {\n\tconstructor(x, y) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t}\n\n\t/**\n\t * Make a clone of this point\n\t */\n\tclone() {\n\t\treturn new Point(this.x, this.y);\n\t}\n\n\t/**\n\t * Calculate the distance from this pt to the other pt.\n\t * @param aPt\n\t * @returns {number}\n\t */\n\tdistance(aPt) {\n\t\treturn Math.sqrt((this.x - aPt.x) * (this.x - aPt.x) + (this.y - aPt.y) * (this.y - aPt.y));\n\t}\n\n\t/**\n\t * Translate this point\n \t */\n\ttranslate(p2) {\n\t\tthis.x += p2.x;\n\t\tthis.y += p2.y;\n\t\treturn this;\n\t}\n\n\t/**\n\t * Scale this vector\n \t */\n\tscale(scale) {\n\t\tthis.x *= scale;\n\t\tthis.y *= scale;\n\t\treturn this;\n\t}\n\n\tgetScaled(scale) {\n\t\treturn new Point(this.x * scale, this.y * scale);\n\t}\n\n\tgetTranslated(p2) {\n\t\treturn new Point(this.x + p2.x, this.y + p2.y);\n\t}\n\n\t/**\n\t * Get the direction vector from this point to p2.\n\t * @param p2\n\t * @returns {Point}\n\t */\n\tgetDirection(p2) {\n\t\tvar dist = this.distance(p2);\n\t\treturn new Point((p2.x - this.x) / dist, (p2.y - this.y) / dist);\n\t}\n\n\t/**\n\t * rotate the point about the origin. With the specified angle.\n\t * @param angle the angle to rotate\n\t */\n\trotate(angle) {\n\t\tvar cos = Math.cos(angle * Math.PI / 180);\n\t\tvar sin = Math.sin(angle * Math.PI / 180);\n\t\tvar x = this.x, y = this.y;\n\t\tthis.x = x * cos - y * sin;\n\t\tthis.y = x * sin + y * cos;\n\t\treturn this;\n\t}\n\n\tgetRotated(angle) {\n\t\treturn this.clone().rotate(angle);\n\t}\n\n\t/**\n\t * Calculate the dot product, treating this and p2 as vectors.\n\t */\n\tdotProduct(p2) {\n\t\treturn this.x * p2.x + this.y * p2.y;\n\t}\n\n\t/**\n\t * Calculates the similarity of this Ray with another.\n\t * Similarity is defined as the absolute value of the dotProduct()\n\t * @param p2\n\t * @returns {number}\n\t */\n\tsimilarity(p2) {\n\t\treturn Math.abs(this.dotProduct(p2));\n\t}\n\n\t/**\n\t * Get the mid point between this and p2.\n \t */\n\tgetMidPoint(p2) {\n\t\treturn new Point((this.x + p2.x) / 2, (this.y + p2.y) / 2);\n\t}\n\n\treverse() {\n\t\tthis.x = -this.x;\n\t\tthis.y = -this.y;\n\t\treturn this;\n\t}\n\n\tequals(p2) {\n\t\tif (!p2 || p2.constructor != Point) return false;\n\n\t\treturn (this.x == p2.x && this.y == p2.y);\n\t}\n\n\t/**\n\t * Reflect this point w.r.t. the rectangle.\n\t * If vertical is true, it will reflect the point cross the vertical\n\t * central line of the rectangle, otherwise reflect cross the horizontal\n\t * central line.\n\t *\n\t * @param rect the rectangle\n\t * @param vertical whether is vertical reflection or horizontal reflection.\n\t */\n\treflect(rect, vertical) {\n\t\tif (vertical)\n\t\t\tthis.x = 2 * rect.x - this.x;\n\t\telse\n\t\t\tthis.y = 2 * rect.y - this.y;\n\t\treturn this;\n\t}\n\n\ttoString() {\n\t\treturn \"Point:{x=\" + this.x + \";y=\" + this.y + \"}\";\n\t}\n}\n\nPoint.W = new Point(-1, 0);\nPoint.N = new Point(0, -1);\nPoint.S = new Point(0, 1);\nPoint.E = new Point(1, 0);\nPoint.NE = new Point(1, -1);\nPoint.NW = new Point(-1, -1);\nPoint.SE = new Point(1, 1);\nPoint.SW = new Point(-1, 1);\n\nexport default Point;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geometry/Point.js\n **/","import _ from \"lodash\";\nimport Point from \"./Point\";\nimport Shape from \"./Shape\";\n\nexport default class Rectangle extends Shape {\n\n\t/**\n\t * Return the bounding rectangle that contains p1 and p2\n\t */\n\tstatic getBoundingRectangle(pts, margin) {\n\t\tif (!pts || pts.length == 0) return null;\n\t\tmargin = margin || [0, 0, 0, 0];\n\t\tif (!_.isArray(margin))\n\t\t\tmargin = [margin, margin, margin, margin];\n\t\tvar min = [pts[0].x, pts[0].y];\n\t\tvar max = [pts[0].x, pts[0].y];\n\t\tfor (var i = 1; i < pts.length; i++) {\n\t\t\tvar p = pts[i];\n\t\t\tif (p.x < min[0]) {\n\t\t\t\tmin[0] = p.x;\n\t\t\t}\n\t\t\tif (p.y < min[1]) {\n\t\t\t\tmin[1] = p.y;\n\t\t\t}\n\t\t\tif (p.x > max[0]) {\n\t\t\t\tmax[0] = p.x;\n\t\t\t}\n\t\t\tif (p.y > max[1]) {\n\t\t\t\tmax[1] = p.y;\n\t\t\t}\n\t\t}\n\t\tmin[0] = min[0] - margin[0];\n\t\tmin[1] = min[1] - margin[1];\n\t\tmax[0] = max[0] + margin[2];\n\t\tmax[1] = max[1] + margin[3];\n\t\tvar w = Math.abs(max[0] - min[0]);\n\t\tvar h = Math.abs(max[1] - min[1]);\n\t\treturn new Rectangle(min[0] + w/2, min[1] + h/2, w, h);\n\t}\n\n\t/**\n\t * Create a union of all the rectangles.\n\t * @param rects\n\t */\n\tstatic union(rects) {\n\t\tvar minx = null, miny = null, maxx = -Infinity, maxy = -Infinity;\n\t\t_.each(rects, function (rect) {\n\t\t\tminx = minx || rect.x;\n\t\t\tminy = miny || rect.y;\n\t\t\tminx = Math.min(minx, rect.x);\n\t\t\tminy = Math.min(miny, rect.y);\n\t\t\tmaxx = Math.max(maxx, rect.right());\n\t\t\tmaxy = Math.max(maxy, rect.bottom());\n\t\t});\n\t\tminx = minx || 0;\n\t\tminy = miny || 0;\n\t\treturn new Rectangle(minx, miny, maxx - minx, maxy - miny);\n\t}\n\n\t/**\n\t * Checks whether this rectangle contains a given point of a given rectangle\n\t */\n\tcontains(el) {\n\t\tlet w = el.width || 0;\n\t\tlet h = el.height || 0;\n\t\tlet left = el.x - w/2;\n\t\tlet right = el.x + w/2;\n\t\tlet top = el.y - h/2;\n\t\tlet bottom = el.y + h/2;\n\t\treturn (right <= this.right) && (left >= this.left) &&\n\t\t\t(top >= this.top) && (bottom <= this.bottom);\n\t}\n\n\t/**\n\t * Calcualte the distance to a point. 0 if this rectangle contains the point.\n\t */\n\tdistance(pt) {\n\t\tif (this.contains(pt)) return 0;\n\n\t\tif (pt.x < this.left) {\n\t\t\tif (pt.y < this.top)\n\t\t\t\treturn pt.distance(new Point(this.left, this.top));\n\t\t\tif (pt.y <= this.bottom)\n\t\t\t\treturn this.left - pt.x;\n\t\t\treturn pt.distance(new Point(this.left, this.bottom));\n\t\t}\n\t\tif (pt.x <= this.right) {\n\t\t\tif (pt.y <= this.top)\n\t\t\t\treturn this.top - pt.y;\n\t\t\treturn pt.y - this.bottom;\n\t\t}\n\t\tif (pt.y < this.top)\n\t\t\treturn pt.distance(new Point(this.right, this.top));\n\t\tif (pt.y <= this.bottom)\n\t\t\treturn pt.x - this.right;\n\t\treturn pt.distance(new Point(this.right, this.bottom));\n\t}\n\n\t/**\n\t * Given two points, we want to detect whether the line joining the pts intersect\n\t * with the rectangle or not. We assume only horizontal or vertical line segments.\n\t *\n\t * @return int the side of the intersection: -1: no intersection, 0: left, 1: top, 2: right, 3: bottom, 4: containment.\n\t */\n\tdetectIntersection(pt1, pt2) {\n\t\tvar horizontal = pt1.y == pt2.y;\n\t\tvar contains1 = this.contains(pt1);\n\t\tvar contains2 = this.contains(pt2);\n\t\tif (contains1 && contains2) return 4;\n\t\tif (!contains1 && !contains2) {\n\t\t\tif (horizontal && (pt1.y >= this.top && pt1.y <= this.bottom)) {\n\t\t\t\tif (pt1.x < this.left && pt2.x > this.right)\n\t\t\t\t\treturn 0;\n\t\t\t\tif (pt1.x > this.right && pt2.x < this.left)\n\t\t\t\t\treturn 2;\n\t\t\t}\n\t\t\tif (!horizontal && (pt1.x >= this.left && pt1.x <= this.right)) {\n\t\t\t\tif (pt1.y < this.top && pt2.y > this.bottom)\n\t\t\t\t\treturn 1;\n\t\t\t\tif (pt1.y > this.bottom && pt2.y < this.top)\n\t\t\t\t\treturn 3;\n\t\t\t}\n\t\t\treturn -1;\n\t\t}\n\n\t\tvar outPt = contains1 ? pt2 : pt1;\n\t\tif (horizontal) {\n\t\t\tif (outPt.x > this.right)\n\t\t\t\treturn 2;\n\t\t\treturn 0;\n\t\t} else {\n\t\t\tif (outPt.y < this.top)\n\t\t\t\treturn 1;\n\t\t\treturn 3;\n\t\t}\n\t}\n\n\ttoString() {\n\t\treturn 'Rectangle:{x=' + this.x + ';y=' + this.y + ';width=' + this.width + ';height=' + this.height + '}';\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geometry/Rectangle.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"_\",\"commonjs\":\"lodash\",\"commonjs2\":\"lodash\",\"amd\":\"lodash\"}\n ** module id = 5\n ** module chunks = 0\n **/","import Rectangle from \"./Rectangle\";\n\nlet registry = {};\n\nclass Shape {\n\tconstructor(x, y, width, height) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t}\n\n\t/**\n\t * Return the y-coord of the top side of this rectangle\n\t */\n\tget top() { return this.y - this.height/2; }\n\n\t/**\n\t * Returns the y-coordinate of the bottom of this Rectangle.\n\t */\n\tget bottom() { return this.y + this.height/2; }\n\n\t/**\n\t * Return the x-coord of left side of this rectangle\n\t */\n\tget left() { return this.x - this.width/2; }\n\n\t/**\n\t * Returns the x-coordinate of the right side of this Rectangle.\n\t */\n\tget right() { return this.x + this.width/2; }\n\n\tget bounds() { return new Rectangle(this.x, this.y, this.width, this.height); }\n\n\tstatic getShape(name) {\n\t\treturn registry[name];\n\t}\n\n\tstatic addShape(name, c) {\n\t\tregistry[name] = c;\n\t}\n\n\tstatic removeShape(name) {\n\t\tdelete registry[name];\n\t}\n}\n\nexport default Shape;\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geometry/Shape.js\n **/","import _ from \"lodash\";\n\n/**\n * dom Utility functions\n */\nexport default {\n\tisIE: (function() {\n\t\tlet isIE = false, version = null, window = window || {}, navigator = navigator || {userAgent: \"\"};\n\t\tif (Object.hasOwnProperty.call(window, \"ActiveXObject\") && !window.ActiveXObject) {\n\t\t\tisIE = true;\n\t\t\tversion = 11;\n\t\t} else {\n\t\t\tvar myNav = navigator.userAgent.toLowerCase();\n\t\t\tisIE = myNav.indexOf('msie') != -1;\n\t\t\tif (isIE)\n\t\t\t\tversion = parseInt(myNav.split('msie')[1]);\n\t\t}\n\n\t\treturn function() {\n\t\t\treturn isIE ? version : false;\n\t\t};\n\t})(),\n\n\tisFireFox : (function(){\n\t\t// InstallTrigger: Firefox's API to install add-ons\n\t\treturn typeof InstallTrigger !== 'undefined';\n\t})(),\n\n\tcreateElement: function (tag, attribs, styles, html) {\n\t\tlet el = document.createElement(tag);\n\t\tthis.setElement(el, attribs, styles);\n\t\tif (html)\n\t\t\tel.innerHTML = html;\n\t\treturn el;\n\t},\n\n\tcreateElementByString: function(str) {\n\t\tlet temp = this.createElement('div', null, null, str);\n\t\treturn temp.childNodes;\n\t},\n\n\tsetElement: function (el, attribs, styles) {\n\t\tif (attribs) {\n\t\t\t_.forEach(attribs, function(value, key) {\n\t\t\t    el.setAttribute(key, value);\n\t\t\t });\n\t\t}\n\t\tif (styles) {\n\t\t\t_.forEach(styles, function(value, key) {\n\t\t\t\tel.style[key] = value;\n\t\t\t});\n\t\t}\n\t},\n\n\ttestElement: function(node, method) {\n\t\treturn node && node.nodeType == 1 && ( !method || method(node) );\n\t},\n\n\tgetAncestorBy: function(node, method) {\n\t\twhile (node = node.parentNode)\n\t\t\tif (this.testElement(node, method) )\n\t\t\t\treturn node;\n\n\t\treturn null;\n\t},\n\n\t/**\n\t * Get the position of element relative to the context.\n\t * @param el the element\n\t * @param context\n\t * @returns {*[]}\n\t */\n\tgetPosition(el, context) {\n\t\tif (!context) context = document.body;\n\t\tlet elRect = el.getBoundingClientRect();\n\t\tlet contextRect = context.getBoundingClientRect();\n\n\t\treturn [elRect.left - contextRect.left, elRect.top - contextRect.top];\n\t},\n\n\tgetCenterPosition(el, context) {\n\t\tif (!context) context = document.body;\n\t\tlet elRect = el.getBoundingClientRect();\n\t\tlet contextRect = context.getBoundingClientRect();\n\t\tlet w = elRect.right - elRect.left;\n\t\tlet h = elRect.bottom - elRect.top;\n\n\t\treturn [elRect.left - contextRect.left + w/2, elRect.top - contextRect.top + h/2];\n\t},\n\n\tmove: function(el, x, y) {\n\t\tif (x) el.style.left = x + 'px';\n\t\tif (y) el.style.top = y + 'px';\n\t},\n\n\tgetSize: function(el) {\n\t\tvar w = parseInt(el.style.offsetWidth, 10);\n\t\tvar h = parseInt(el.style.offsetHeight, 10);\n\t\treturn [w, h];\n\t},\n\n\tresize: function(el, w, h) {\n\t\tif (w) el.style.width = w + \"px\";\n\t\tif (h) el.style.height = h + 'px';\n\t},\n\n\tpreloadImages: function(array) {\n\t\tif (!this.preloadImages.list) this.preloadImages.list = [];\n\t\tif (!this.preloadImages.loaded) this.preloadImages.loaded = {};\n\n\t\tvar list = this.preloadImages.list;\n\t\tvar img, that = this;\n\t\tfor (var i = 0; i < array.length; i++) {\n\t\t\timg = new Image();\n\t\t\timg.onload = function() {\n\t\t\t\tvar index = list.indexOf(this);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tthat.preloadImages.loaded[this.name] = {width: this.width, height: this.height};\n\t\t\t\t\t// remove image from the array once it's loaded\n\t\t\t\t\t// for memory consumption reasons\n\t\t\t\t\tlist.splice(index, 1);\n\t\t\t\t}\n\t\t\t};\n\t\t\tlist.push(img);\n\t\t\timg.src = array[i];\n\t\t\timg.name = array[i];\n\t\t}\n\t},\n\n\t/**\n\t * Get's the image's information given the url. Must be preloaded by calling the preloadImage function.\n\t * @param src\n\t */\n\tgetImageInfo: function(src) {\n\t\tif (this.preloadImages.loaded) {\n\t\t\treturn this.preloadImages.loaded[src];\n\t\t}\n\t\treturn null;\n\t},\n\n\t/**\n\t * Check whether the key event is from input, textarea or select.\n\t * @param e  input event\n\t */\n\teventFromInput: function(e){\n\t\tvar tagName = e.target.tagName;\n\t\treturn (tagName == 'INPUT' || tagName == 'TEXTAREA' || tagName == 'SELECT');\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/util/DomUtils.js\n **/","import _ from \"lodash\";\n\n/**\n * A string buffer for fast string manipulation\n */\nexport default class StringBuffer {\n\tconstructor(str) {\n\t\tthis.buffer = [];\n\t\tif (str)\n\t\t\tthis.buffer.push(str);\n\t}\n\n\tappend(stuff) {\n\t\tif (_.isString(stuff))\n\t\t\tthis.buffer.push(stuff);\n\t\telse if (_.isArray(stuff))\n\t\t\tthis.buffer = this.buffer.concat(stuff);\n\t\telse\n\t\t\tthis.buffer.push(\"\" + stuff);\n\t\treturn this;\n\t}\n\n\tprepend(stuff) {\n\t\tif (_.isString(stuff))\n\t\t\tthis.buffer.splice(0, 0, stuff);\n\t\telse if (_.isArray(stuff))\n\t\t\tthis.buffer = stuff.concat(this.buffer);\n\t\telse\n\t\t\tthis.buffer.splice(0, 0, \"\" + stuff);\n\t\treturn this;\n\t}\n\n\tclear() {\n\t\tthis.buffer = [];\n\t}\n\n\tremoveLast() {\n\t\tthis.buffer.pop();\n\t\treturn this;\n\t}\n\n\ttoString(sep) {\n\t\tif (!sep) sep = '';\n\t\treturn this.buffer.join(sep);\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/util/StringBuffer.js\n **/","import Point from \"./Point\";\n\nexport default class Line {\n\tconstructor(start, end) {\n\t\tthis.start = start;\n\t\tthis.end = end;\n\t}\n\n\t/**\n\t * Calculate the length of this line\n\t */\n\tlength() {\n\t\treturn this.start.distance(this.end);\n\t}\n\n\t/**\n\t * Calculate the distance of this line to the point.\n\t */\n\tdistance(pt) {\n\t\tvar x = this.start.distance(pt);\n\t\tif (x == 0) return 0;\n\n\t\tvar l = this.length();\n\t\tvar cosa = new Point((this.end.x - this.start.x) / l, (this.end.y - this.start.y) / l).dotProduct(\n\t\t\tnew Point(pt.x / x, pt.y / x));\n\n\t\treturn x * Math.sqrt(1 - cosa * cosa);\n\t}\n\n\t/**\n\t * Function: intersection\n\t *\n\t * Returns the intersection of two lines as an <mxPoint>.\n\t *\n\t * Parameters:\n\t *\n\t * x0 - X-coordinate of the first line's startpoint.\n\t * y0 - X-coordinate of the first line's startpoint.\n\t * x1 - X-coordinate of the first line's endpoint.\n\t * y1 - Y-coordinate of the first line's endpoint.\n\t * x2 - X-coordinate of the second line's startpoint.\n\t * y2 - Y-coordinate of the second line's startpoint.\n\t * x3 - X-coordinate of the second line's endpoint.\n\t * y3 - Y-coordinate of the second line's endpoint.\n\t */\n\tstatic intersection(x0, y0, x1, y1, x2, y2, x3, y3) {\n\t\tvar denom = ((y3 - y2) * (x1 - x0)) - ((x3 - x2) * (y1 - y0));\n\t\tvar nume_a = ((x3 - x2) * (y0 - y2)) - ((y3 - y2) * (x0 - x2));\n\t\tvar nume_b = ((x1 - x0) * (y0 - y2)) - ((y1 - y0) * (x0 - x2));\n\n\t\tvar ua = nume_a / denom;\n\t\tvar ub = nume_b / denom;\n\n\t\tif (ua >= 0.0 && ua <= 1.0 && ub >= 0.0 && ub <= 1.0) {\n\t\t\t// Get the intersection point\n\t\t\tvar intersectionX = x0 + ua * (x1 - x0);\n\t\t\tvar intersectionY = y0 + ua * (y1 - y0);\n\n\t\t\treturn new Point(intersectionX, intersectionY);\n\t\t}\n\n\t\t// No intersection\n\t\treturn null;\n\t}\n\n\ttoString() {\n\t\treturn 'Line:{start=' + this.start + ';end=' + this.end + '}';\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geometry/Line.js\n **/","import Shape from \"./Shape\";\n\nexport default class Ellipse extends Shape {\n\ttoString() {\n\t\treturn 'Ellipse:{x=' + this.x + ';y=' + this.y + ';width=' + this.width + ';height=' + this.height + '}';\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geometry/Ellipse.js\n **/","import _ from \"lodash\";\nimport Events from \"bean\";\nimport * as KeyUtils from \"./KeyUtils\";\nimport DomUtils from \"../util/DomUtils\";\nimport Utils from \"../util/Utils\";\nimport StringBuffer from \"./../util/StringBuffer\";\n\nexport default class EventDispatcher {\n\t/**\n\t * Constructor\n\t * @param root the root element that the manager will listen to.\n\t * @param zoomScale\n\t */\n\tconstructor(root, zoomScale = [0, Infinity]) {\n\t\tthis.root = root;\n\t\tthis.rootNS = root.getAttribute('ns') || 'root';\n\t\tthis.zoomScale = zoomScale;\n\t\tthis.scale = 1.0;\n\t\tthis.listeners = {};\n\t\tthis.dragging = false;\n\t\tthis.handler = _.bind(this.handleEvent, this);\n\t\tthis.started = false;\n\n\t\t// Simulate mouseenter/mouseleave events\n\t\tthis.enterStack = [];\n\t}\n\n\t/**\n\t * Start listening for events.\n\t */\n\tstart() {\n\t\tif (this.started) return;\n\t\tEvents.on(this.root, 'mousedown mouseover mouseout mouseenter mouseleave dblclick click contextmenu mousewheel', this.handler);\n\t\tthis.startKeys();\n\t\tthis.started = true;\n\t}\n\n\t/**\n\t * Stop listening for events.\n\t */\n\tstop() {\n\t\tif (!this.started) return;\n\t\tEvents.off(this.root, 'mousedown mouseover mouseout mouseenter mouseleave dblclick click contextmenu mousewheel', this.handler);\n\t\tthis.stopKeys();\n\t\tthis.started = false;\n\t}\n\n\tstartKeys() {\n\t\tEvents.on(document, 'keydown keyup', this.handler);\n\t}\n\n\tstopKeys() {\n\t\tEvents.off(document, 'keydown keyup', this.handler);\n\t}\n\n\tgetEventInfo(event) {\n\t\tlet target = event.target;\n\t\tlet buf = new StringBuffer(), ns, stack = [], isRoot = false;\n\t\twhile (!isRoot && target && target != document) {\n\t\t\tns = target.getAttribute('ns');\n\t\t\tif (ns) {\n\t\t\t\tisRoot = _.startsWith(ns, \"root.\");\n\t\t\t\tif (isRoot) {\n\t\t\t\t\tns = ns.substring(5);\n\t\t\t\t\tevent.rootTarget = target;\n\t\t\t\t}\n\t\t\t\tif (!event.nsTarget) event.nsTarget = target;\n\t\t\t\tstack.splice(0, 0, target);\n\t\t\t\tbuf.prepend(ns);\n\t\t\t}\n\t\t\ttarget = target.parentNode;\n\t\t}\n\t\tif (!isRoot)\n\t\t\tevent.rootTarget = event.nsTarget;\n\n\t\t// target stack is a stack of all the ns targets up to the one with the data binding.\n\t\tevent.targetStack = stack;\n\t\tns = buf.toString('.');\n\t\tif (ns == '') ns = this.rootNS;\n\t\treturn {data: event.rootTarget, ns: ns};\n\t}\n\n\t/**\n\t * The main event handler method, it processes event and generate relevant events to dispatch.\n\t */\n\thandleEvent(event) {\n\t\tlet type = event.type;\n\n\t\t// Do not dispatch other events if we are dragging.\n\t\tif (this.dragging || DomUtils.eventFromInput(event)) return;\n\n\t\tlet data, ns, pos = this.getPosition(event), info, isKeyEvent = (type == 'keydown' || type =='keyup');\n\t\tif (isKeyEvent) {\n\t\t\tdata = this.root;\n\t\t\tns = KeyUtils.getKeyEvent(event);\n\t\t} else {\n\t\t\tinfo = this.getEventInfo(event);\n\t\t\tif (!info) return;\n\t\t\tdata = info.data;\n\t\t\tns = info.ns;\n\t\t}\n\n\t\t//Utils.log('EventDispatcher', \"handleEvent - \" + type + ';ns=' + ns);\n\n\t\tif (type == 'mousewheel') {\n\t\t\tthis.scale *= Math.pow(2, event.wheelDelta * 0.002);\n\t\t\tthis.scale = Math.max(Math.min(this.zoomScale[1], this.scale), this.zoomScale[0]);\n\t\t\tevent.scale = this.scale;\n\t\t\ttype = 'zoom';\n\t\t}\n\n\t\t// See if we should create drag events\n\t\tif (type == 'mousedown' && event.button == 0 /*only drag on left click*/) {\n\t\t\t// Create drag object.\n\t\t\tconst dragObject = {data: data, pos: ns == 'root' ? EventDispatcher.mouse(this.root, event) : pos};\n\t\t\tthis.dragging = false;\n\t\t\t// Start listening for mouse move.\n\t\t\tlet dragPos;\n\n\t\t\tconst mousemove = (event) => {\n\t\t\t\tlet currentPos = this.getPosition(event);\n\t\t\t\tif (!this.dragging) {\n\t\t\t\t\t// check if the mouse has moved. IE always fire mousemove after mousedown even if the mouse hasn't moved yet.\n\t\t\t\t\tif (dragObject.pos[0] == currentPos[0] && dragObject.pos[1] == currentPos[1]) return;\n\n\t\t\t\t\t// start dragging\n\t\t\t\t\tthis.dragging = true;\n\t\t\t\t\tevent.rootTarget = dragObject.data;\n\t\t\t\t\tthis.dispatch(event, 'dragstart', ns, dragObject.data, dragObject.pos);\n\t\t\t\t}\n\t\t\t\tif (ns == \"root\")\n\t\t\t\t\tdragPos = EventDispatcher.mouse(this.root, event);\n\t\t\t\telse\n\t\t\t\t\tdragPos = currentPos;\n\t\t\t\tthis.getEventInfo(event);\n\t\t\t\tthis.dispatch(event, 'drag', ns, dragObject.data, dragPos);\n\t\t\t};\n\t\t\tconst mouseup = (event) => {\n\t\t\t\tif (ns == \"root\")\n\t\t\t\t\tdragPos = EventDispatcher.mouse(this.root, event);\n\t\t\t\telse\n\t\t\t\t\tdragPos = this.getPosition(event);\n\n\t\t\t\tlet info = this.getEventInfo(event);\n\t\t\t\tif (this.dragging) {\n\t\t\t\t\tthis.dragging = false;\n\t\t\t\t\tthis.dispatch(event, 'dragend', ns, dragObject.data, dragPos);\n\t\t\t\t} else {\n\t\t\t\t\tthis.dispatch(event, 'mouseup', ns, info.data, dragPos);\n\t\t\t\t}\n\n\t\t\t\tEvents.off(window, 'mousemove', mousemove);\n\t\t\t\tEvents.off(window, 'mouseup', mouseup);\n\t\t\t};\n\t\t\tevent.preventDefault();\n\t\t\tEvents.on(window, 'mousemove', mousemove);\n\t\t\tEvents.on(window, 'mouseup', mouseup);\n\t\t}\n\n\t\tif (!isKeyEvent)\n\t\t\tthis.simulateEnterLeave(event, type, ns, data, pos);\n\t\tthis.dispatch(event, type, ns, data, pos);\n\n\t\t// disable the default context menu\n\t\tif (type == 'contextmenu')\n\t\t\tevent.preventDefault();\n\t}\n\n\t/**\n\t * try to simulate mouseenter/mouseleave events.\n\t */\n\tsimulateEnterLeave(event, type, ns, data, pos) {\n\t\tlet last, stack;\n\t\tconst clearEnterStack = (k) => {\n\t\t\tk = k || 0;\n\t\t\t// Clear off the enter stack.\n\t\t\twhile (this.enterStack.length >= k + 1) {\n\t\t\t\tlast = this.enterStack.pop();\n\t\t\t\tthis.dispatch(event, 'mouseleave', last.ns, last.data, pos);\n\t\t\t}\n\t\t};\n\t\tconst getNS = function(index) {\n\t\t\tlet buf = new StringBuffer();\n\t\t\tfor (let i = 0; i <= index; i++) {\n\t\t\t\tvar val = stack[i].getAttribute(\"ns\");\n\t\t\t\tif (_.startsWith(val, \"root.\"))\n\t\t\t\t\tval = val.substring(5);\n\t\t\t\tbuf.append(val);\n\t\t\t}\n\t\t\treturn buf.toString('.');\n\t\t};\n\n\t\tif (ns && ns != this.rootNS) {\n\t\t\tif (type == 'mouseover') {\n\t\t\t\tstack = event.targetStack;\n\t\t\t\tlet item;\n\t\t\t\tfor (let i = 0; i < stack.length; i++) {\n\t\t\t\t\tif (i < this.enterStack.length) {\n\t\t\t\t\t\tif (this.enterStack[i].target != stack[i]) {\n\t\t\t\t\t\t\tclearEnterStack(i);\n\t\t\t\t\t\t} else\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\titem = {data: data, ns: getNS(i), target: stack[i]};\n\t\t\t\t\tthis.enterStack.push(item);\n\t\t\t\t\tthis.dispatch(event, 'mouseenter', item.ns, data, pos);\n\t\t\t\t}\n\t\t\t\tif (stack.length < this.enterStack.length)\n\t\t\t\t\tclearEnterStack(stack.length);\n\t\t\t}\n\t\t}\n\t\tif (ns == this.rootNS && this.enterStack.length > 0)\n\t\t\tclearEnterStack();\n\t}\n\n\tdispatch(event, type, ns, data, pos) {\n\t\t//if (type != 'mouseover' && type != 'mouseout')\n\t\t//\tUtils.log('EventDispatcher', \"dispatch - \" + type + '.' + ns + ';' + pos + ';rootTarget=' + event.rootTarget + ';data=' + data);\n\t\tif (!this.started) return;\n\t\tconst nsType = ns ? type + '.' + ns : type;\n\t\t_.forEach(this.listeners, (listeners, key) => {\n\t\t\tif (EventDispatcher.match(nsType, key)) {\n\t\t\t\t_.forEach(listeners, (listener) => {\n\t\t\t\t\tif (!listener.context)\n\t\t\t\t\t\tlistener.callback.apply(window, [type, ns, data, pos, event]);\n\t\t\t\t\telse\n\t\t\t\t\t\tlistener.callback.apply(listener.context, [type, ns, data, pos, event]);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\t// after dispatching, do not propagate.\n\t\tif (event.stopPropagation)\n\t\t\tevent.stopPropagation();\n\t}\n\n\tgetPosition(event) {\n\t\tconst pos = EventDispatcher.mouse(this.root, event);\n\t\tif(! _.isNaN(pos[0]) && ! _.isNaN(pos[1]))\n\t\t\tthis.lastPosition = pos;\n\t\treturn this.lastPosition;\n\t}\n\n\t/**\n\t * Registers a key event handler\n\t * // Key is object {ctrl, alt, shift, meta, code}\n\t */\n\tregisterKey(type, key, callback, context) {\n\t\tif (_.isArray(key)) {\n\t\t\t_.forEach(key, (k) => {\n\t\t\t\tthis.registerKey(type, k, callback, context);\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tkey = KeyUtils.getKeyData(key.ctrl, key.alt, key.shift, key.meta, key.code);\n\t\tif(!key.length) return;\n\t\tkey = new StringBuffer(type).append(key).toString('.');\n\n\t\tconst listener = {callback: callback, context: context};\n\t\tthis.listeners[key] || (this.listeners[key] = []);\n\t\tthis.listeners[key].push(listener);\n\t}\n\n\tunregisterKey(type, key, callback, context) {\n\t\tif (_.isArray(key)) {\n\t\t\t_.forEach(key, (k) => {\n\t\t\t\tthis.unregisterKey(type, k, callback, context);\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tkey = KeyUtils.getKeyData(key.ctrl, key.alt, key.shift, key.meta, key.code);\n\t\tif(!key.length) return;\n\t\tkey = new StringBuffer(type).append(key).toString('.');\n\n\t\tlet listeners = this.listeners[key], listener;\n\t\tif (!listeners) return;\n\t\tfor (let i = 0; i < listeners.length; i++) {\n\t\t\tlistener = listeners[i];\n\t\t\tif (listener.callback === callback && (!context || context === listener.context)) {\n\t\t\t\tlisteners.splice(i, 1);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Registers an event handler\n\t */\n\tregister(type, callback, context, zIndex) {\n\t\tif (_.isArray(type)) {\n\t\t\t_.forEach(type, (t) => {\n\t\t\t\tthis.register(t, callback, context, zIndex);\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tconst listener = {callback: callback, context: context, zIndex: zIndex};\n\t\tthis.listeners[type] || (this.listeners[type] = []);\n\t\tthis.listeners[type].push(listener);\n\t}\n\n\tunregister(type, callback, context) {\n\t\tlet listeners = this.listeners[type], listener;\n\t\tif (!listeners) return;\n\t\tfor (let i = 0; i < listeners.length; i++) {\n\t\t\tlistener = listeners[i];\n\t\t\tif (listener.callback === callback && (!context || context === listener.context)) {\n\t\t\t\tlisteners.splice(i, 1);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tdestroy() {\n\t\tthis.stop();\n\t\tdelete this.root;\n\t\tdelete this.listeners;\n\t\tdelete this.enterStack;\n\t}\n\n\t/**\n\t * Check if the registered event type matches the real event type. \"*\" is allowed as a wild card.\n\t */\n\tstatic match(nsType, registeredType) {\n\t\tconst arr = registeredType.split('*');\n\t\tif (arr.length == 1)\n\t\t\treturn nsType == registeredType;\n\n\t\tlet substr, index = 0;\n\t\tfor (let i = 0; i < arr.length; i++) {\n\t\t\tif (arr[i].length == 0) continue;\n\t\t\tsubstr = nsType.slice(index);\n\t\t\tindex = substr.indexOf(arr[i]);\n\t\t\tif (index < 0)\n\t\t\t\treturn false;\n\t\t\tindex += arr[i].length;\n\t\t}\n\t\treturn true;\n\t}\n\n\tstatic mouse(container, e) {\n\t\tif (e.changedTouches) e = e.changedTouches[0];\n\t\tvar svg = container.ownerSVGElement || container;\n\t\tif (svg.createSVGPoint) {\n\t\t\tvar point = svg.createSVGPoint();\n\t\t\tpoint.x = e.clientX; point.y = e.clientY;\n\t\t\tpoint = point.matrixTransform(container.getScreenCTM().inverse());\n\t\t\treturn [point.x, point.y];\n\t\t}\n\t\tvar rect = container.getBoundingClientRect();\n\t\treturn [e.clientX - rect.left - container.clientLeft, e.clientY - rect.top - container.clientTop];\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/event/EventDispatcher.js\n **/","///////////////////////////////////////////////////////////////////////////////\n//                                                                           //\n//           The Key Utility CLass for the Event Dispatcher          \t     //\n//                                                                           //\n///////////////////////////////////////////////////////////////////////////////\n\nimport StringBuffer from \"./../util/StringBuffer\";\n\n/**\n * KEY constant\n */\nconst KEY = {\n\tALT          : 18,\n\tBACK_SPACE   : 8,\n\tCAPS_LOCK    : 20,\n\tCONTROL      : 17,\n\tDELETE       : 46,\n\tDOWN         : 40,\n\tEND          : 35,\n\tENTER        : 13,\n\tESCAPE       : 220,\n\tHOME         : 36,\n\tLEFT         : 37,\n\tMETA         : 224,\n\tNUM_LOCK     : 144,\n\tPAGE_DOWN    : 34,\n\tPAGE_UP      : 33,\n\tPAUSE        : 19,\n\tPRINTSCREEN  : 44,\n\tRIGHT        : 39,\n\tSCROLL_LOCK  : 145,\n\tSHIFT        : 16,\n\tSPACE        : 32,\n\tTAB          : 9,\n\tUP           : 38\n\t//ADD          : DomUtils.isFireFox ? 61  : 187,\n\t//SUBTRACT     : DomUtils.isFireFox ? 173 : 189\n};\n\nexport function getKeyEvent(event) {\n\tif (!event || !event instanceof KeyboardEvent) {\n\t\treturn null;\n\t}\n\n\tvar key = event.keyCode || event.which;\n\n\t// Need to find a way to avoid this\n\tif (key >= 16 && key <= 18) {\n\t\tkey = null;\n\t}\n\n\treturn getKeyData(event.ctrlKey, event.altKey, event.shiftKey, event.metaKey, key);\n}\n\nexport function getKeyData(ctrl, alt, shift, meta, key) {\n\tvar buf = new StringBuffer();\n\n\tif (ctrl) buf.append(\"CTRL\");\n\tif (alt) buf.append(\"ALT\");\n\tif (shift) buf.append(\"SHIFT\");\n\tif (meta) buf.append(\"META\");\n\tif (key) buf.append(key);\n\n\treturn buf.toString(\".\");\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/event/KeyUtils.js\n **/","import _ from \"lodash\";\nimport Utils from \"../util/Utils\";\nimport Node from \"./Node\";\nimport Edge from \"./Edge\";\n\nconst nodeDefaults = {\n\tname: 'Default',\n\trole: 'node',\n\tdraggable: true,\n\tselectable: true,\n\teditable: true,\n\tresizable: false,\n\tsourceable: true,\n\ttargetable: true,\n\tvisible: true\n};\n\nconst edgeDefaults = {\n\tname: 'Default',\n\trole: 'edge',\n\tselectable: true,\n\tvisible: true\n};\n\nclass Graph {\n\tconstructor(id = _.uniqueId(\"G\"), config = {}, model) {\n\t\tthis.id = id;\n\n\t\tthis.nodes = {};\n\t\tthis.edges = {};\n\n\t\tthis.selection = null;\n\t\tthis.destroyed = false;\n\n\t\tUtils.buildTypes(config.nodeTypes, \"Nodes\", nodeDefaults);\n\t\tUtils.buildTypes(config.edgeTypes, \"Edges\", edgeDefaults);\n\n\t\tdelete config.nodeTypes;\n\t\tdelete config.edgeTypes;\n\t\tUtils.initConfig(this, config);\n\t\tthis.root = null;\n\t\tif (model)\n\t\t\tthis.loadModel(model);\n\t}\n\n\tstatic getJSClass(config, defaultClass) {\n\t\tvar jsClass = null;\n\t\tif (config && config.type) {\n\t\t\t// See if we can get the js class from config.\n\t\t\tvar type = Utils.type(defaultClass.namespace, config.type);\n\t\t\tif (type)\n\t\t\t\tjsClass = type.jsClass;\n\t\t}\n\n\t\treturn Utils.getConstructor(jsClass, defaultClass);\n\t}\n\n\t/**\n\t * Create a new Node\n\t */\n\taddNode(config, parent = this.getCurrentRoot(), pos) {\n\t\tlet NodeClass = Graph.getJSClass(config, Node);\n\t\tlet node = new NodeClass(this, config);\n\n\t\tif (parent)\n\t\t\tGraph.addChild(parent, node, pos);\n\t\telse {\n\t\t\tthis.root = node;\n\t\t\tthis.root.prop('role', 'root');\n\t\t}\n\n\t\tthis.nodes[node.id] = node;\n\t\treturn node;\n\t}\n\n\taddEdge(config, parent = this.getCurrentRoot(), from, to) {\n\t\tlet EdgeClass = Graph.getJSClass(config, Edge);\n\t\tlet edge = new EdgeClass(this, config, from, to);\n\n\t\tGraph.addChild(parent, edge);\n\t\tthis.edges[edge.id] = edge;\n\t\treturn edge;\n\t}\n\n\tstatic addChild(parent, child) {\n\t\tif (!parent.children)\n\t\t\tparent.children = [];\n\n\t\tif (child.parent != parent) {\n\t\t\tparent.children.push(child);\n\n\t\t\tif (child.parent && child.parent.children)\n\t\t\t\tchild.parent.children = _.without(child.parent.children, child);\n\t\t}\n\t\tchild.parent = parent;\n\t}\n\n\tloadModel(model, parent = this.getCurrentRoot()) {\n\t\tvar nodes = model.nodes;\n\t\tvar edges = model.edges;\n\t\tdelete model.nodes;\n\t\tdelete model.edges;\n\n\t\tvar node = this.addNode(model, parent);\n\t\tif (nodes) {\n\t\t\t_.forEach(nodes, (child) => {\n\t\t\t\tthis.loadModel(child, node);\n\t\t\t});\n\t\t}\n\t\tif (edges) {\n\t\t\t_.forEach(edges, (edge) => {\n\t\t\t\tlet from, to;\n\t\t\t\tif (edge.from)\n\t\t\t\t\tfrom = this.nodes[edge.from];\n\t\t\t\tif (edge.to)\n\t\t\t\t\tto = this.nodes[edge.to];\n\t\t\t\tthis.addEdge(edge, node, from, to);\n\t\t\t});\n\t\t}\n\t}\n\n\tgetCurrentRoot() {\n\t\treturn this.root;\n\t}\n\n\treset() {}\n\tdestroy() {}\n}\n\nGraph.DEFAULTS = {\n\tallowDanglingEdges: true,\n\tmultiConnect: false,\n\treadOnly: false,\n\tviewOnly: false\n};\n\nexport default Graph;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/graph/Graph.js\n **/","import _ from \"lodash\";\nimport StringBuffer from \"../util/StringBuffer\";\nimport Element from \"./Element\";\n\nclass Node extends Element {\n\tconstructor(graph, config = {}) {\n\t\tif (!config.id) config.id = _.uniqueId('N');\n\t\tsuper(graph, config);\n\n\t\tthis.inEdges = [];\n\t\tthis.outEdges = [];\n\t\tthis.parent = null;\n\t}\n\n\tisAncestor(n) {\n\t\t// TODO: should we move this to graph class ?\n\t\tvar node = n.parent;\n\t\twhile (node) {\n\t\t\tif (this == node) { return true };\n\t\t\tnode = node.parent;\n\t\t}\n\t\treturn false;\n\t}\n\n\tremoveEdge(edge) {\n\t\tvar edges = edge.source == this ? this.outEdges : this.inEdges;\n\t\tfor (var i = 0; i < edges.length; i++) {\n\t\t\tif (edge == edges[i]) {\n\t\t\t\tedges.splice(i, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Add a new incoming edge\n\taddInEdge(edge, pos) {\n\t\tif (pos == null || pos === undefined)\n\t\t\tthis.inEdges.push(edge);\n\t\telse\n\t\t\tthis.inEdges.splice(pos, 0, edge);\n\t}\n\n\t// Add a new outgoing edge\n\taddOutEdge(edge, pos) {\n\t\tif (pos == null || pos === undefined || pos > edge.length - 1)\n\t\t\tthis.outEdges.push(edge);\n\t\telse\n\t\t\tthis.outEdges.splice(pos, 0, edge);\n\t}\n\n\trenderChildren(view) {\n\t\tif (this.children) {\n\t\t\tlet buf = new StringBuffer();\n\t\t\t_.forEach(this.children, (child) => {\n\t\t\t\tbuf.append(child.render(view));\n\t\t\t});\n\t\t\treturn buf.toString();\n\t\t}\n\t\treturn '';\n\t}\n\n\ttoString() {\n\t\tvar label = this.prop(\"label\") ? this.prop(\"label\") : \"undefined\";\n\t\tif (_.isArray(label))\n\t\t\tlabel = label[0];\n\t\treturn 'Node:{id:' + this.id + ';label:' + label + ';type:' + this.props.constructor.typeName + '}';\n\t}\n}\nNode.namespace = \"Nodes\";\n\nexport default Node;\n\n/*\n\n/**\n * The DrillDownParent is the parent that displays the vertex when drilled down.\n *\nVertex.prototype.getDrillDownParent = function() {\n\treturn this.parent;\n};\n\nVertex.prototype.isLocked = function() {\n\tvar mode = this.getProperty(\"mode\") || 3;\n\treturn !(mode & Graph.ALLOW_INTERACTIONS);\n};\n\nVertex.prototype.getCrumbText = function() {\n\tif (this.isLocked())\n\t\treturn '<span><img src=\"webwb/pzreadonly.png\" /></span><span>&nbsp;' + this.getProperty(\"label\") + '</span>';\n\treturn this.getProperty(\"label\");\n};\n\nVertex.prototype.canEdit = function() {\n\treturn (!this.parent || !this.parent.isLocked()) && Vertex.superclass.canEdit.call(this);\n};\n\nVertex.prototype.isContainer = function() {\n\treturn this.getProperty(\"container\");\n};\n\n*/\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/graph/Node.js\n **/","import _ from \"lodash\";\nimport Utils from \"../util/Utils\";\nimport Cache from \"../util/Cache\";\nimport StringBuffer from \"../util/StringBuffer\";\nimport Rectangle from \"../geometry/Rectangle\";\nimport Label from \"../view/Label\";\n\n/**\n * The Element is the common parent for Node and Edge.\n */\nexport default class Element {\n\tconstructor(graph, config = {id: _.uniqueId()}) {\n\t\tthis.graph = graph;\n\t\tthis.id = config.id;\n\t\tdelete config.id;\n\n\t\t// Initialize decorators\n\t\tif (config.decorators) {\n\t\t\tthis.createDecorators(config.decorators);\n\t\t\tdelete config.decorators;\n\t\t}\n\n\t\t// Initialize View Properties\n\t\tif (config.views) {\n\t\t\tthis.viewProps = config.views;\n\t\t\tdelete config.views;\n\t\t}\n\n\t\t// Initialize type\n\t\tvar type = config.type || \"Default\";\n\t\ttype = Utils.type(this.constructor.namespace, type);\n\t\tif (!type)\n\t\t\tthrow new Error(\"Type not found \" + config.type);\n\t\tdelete config.type;\n\t\tthis.props = new type(config);\n\t}\n\n\tprop(name, value) {\n\t\tif (_.isUndefined(value))\n\t\t\treturn this.props[name];\n\t\tthis.props[name] = value;\n\t}\n\n\t/**\n\t * Get/Set property stored by views.\n\t * @param key\n\t * @param name\n\t * @param value\n\t * @returns {*}\n\t */\n\tviewProp(key = 'default', name, value) {\n\t\tif (_.isUndefined(value)) {\n\t\t\tif (key == 'default')\n\t\t\t\treturn this.prop(name, value);\n\t\t\treturn this.viewProps[key][name];\n\t\t}\n\t\tif (key == 'default') {\n\t\t\tthis.prop(name, value);\n\t\t} else {\n\t\t\tif (!this.viewProps[key])\n\t\t\t\tthis.viewProps[key] = {};\n\t\t\tthis.viewProps[key][name] = value;\n\t\t}\n\t}\n\n\tcreateDecorators(decorators) {}\n\n\t/**\n\t * Get properties needed for rendering this element\n\t * @returns {{key: (string|*), className: *, namespace: *, bounds: *}}\n\t */\n\tgetView(key) {\n\t\tlet bounds = this.getBounds(key);\n\t\treturn {\n\t\t\tid: this.id,\n\t\t\tkey: key,\n\t\t\tclassName: this.computedClassName,\n\t\t\tnamespace: this.namespace,\n\t\t\tx: bounds.x,\n\t\t\ty: bounds.y,\n\t\t\twidth: bounds.width,\n\t\t\theight: bounds.height,\n\t\t\tscale: this.viewProp(key, 'scale') || 1.0\n\t\t}\n\t}\n\n\tgetBounds(key) {\n\t\tlet bounds = Cache.get(this.id + \".bounds\", key);\n\t\tif (bounds) return bounds;\n\n\t\tlet shape = this.viewProp(key, 'shape');\n\t\tlet x = this.viewProp(key, \"x\") || 0;\n\t\tlet y = this.viewProp(key, \"y\") || 0;\n\t\tlet w = this.viewProp(key, \"width\") || (shape ? shape.width : 0);\n\t\tlet h = this.viewProp(key, \"height\") || (shape ? shape.height : 0);\n\t\tbounds = new Rectangle(x, y, w, h);\n\t\tCache.set(this.id + '.bounds', bounds, key);\n\t\treturn bounds;\n\t}\n\n\trender(view) {\n\t\tlet template = Cache.get(this.id + '.template', view.id);\n\t\tif (!template) {\n\t\t\t//create the template\n\t\t\tlet role = this.prop('role');\n\t\t\ttemplate = view.getTemplate('$' + role, null, this);\n\t\t\tif (_.isString(template))\n\t\t\t\ttemplate = _.template(template);\n\t\t\tCache.set(this.id + '.template', template, view.id);\n\t\t}\n\t\treturn template(this.getView(view.id));\n\t}\n\n\trenderShape(view) {\n\t\tlet shape = this.prop('shape');\n\t\tif (shape) {\n\t\t\tlet template = _.template(view.getTemplate(shape.name, shape));\n\t\t\treturn template(this.getView(view.id));\n\t\t}\n\t\treturn '';\n\t}\n\n\trenderLabel(view) {\n\t\tif (this == this.graph.getCurrentRoot())\n\t\t\treturn null;\n\t\tlet box = this.getLabelBox(view.id);\n\t\tif (box)\n\t\t\treturn Label.SVG_TEMPLATE(box);\n\t\treturn '';\n\t}\n\n\tgetLabelBox(key) {\n\t\tlet box = Cache.get(this.id + '.labelBox', key);\n\t\tif (box) return box;\n\t\tlet bounds = this.getBounds(key);\n\t\t// Just get the config will have a positive performance boost for IE11 and IE10.\n\t\tbox = Label.getLabelBox(this.prop('label'), bounds.width, bounds.height, this.viewProp(key, 'labelConfig'));\n\t\tCache.set(this.id + '.labelBox', box, key);\n\t\treturn box;\n\t}\n\n\tget computedClassName() {\n\t\tif (!this._computedClassName) {\n\t\t\tvar buf = new StringBuffer(this.prop(\"role\"));\n\t\t\tlet props = this.props;\n\t\t\tif (props.hasOwnProperty(\"className\"))\n\t\t\t\tbuf.append(props[\"className\"]);\n\t\t\tprops = props.constructor.prototype;\n\t\t\twhile (props) {\n\t\t\t\tif (props.hasOwnProperty(\"className\"))\n\t\t\t\t\tbuf.append(props[\"className\"]);\n\t\t\t\tprops = Object.getPrototypeOf(props);\n\t\t\t}\n\t\t\tthis._computedClassName = buf.toString(' ');\n\t\t}\n\t\treturn this._computedClassName;\n\t}\n\n\tget namespace() {\n\t\tif (this == this.graph.getCurrentRoot()) return '';\n\t\treturn \"root.\" + this.prop(\"role\");\n\t}\n\n\tdestroy() {\n\t\tdelete this.graph;\n\t\tdelete this.decorators;\n\t\tdelete this.props;\n\t\tdelete this.viewProps;\n\t\tthis.destroyed = true;\n\t}\n}\n\n/*\n\nCell.prototype.move = function(x, y) {\n\tthis.setProperty(\"x\", Math.round(x));\n\tthis.setProperty(\"y\", Math.round(y));\n\tdelete this.bounds;\n};\n\nCell.prototype.resize = function(w, h) {\n\tthis.setProperty(\"width\", w);\n\tthis.setProperty(\"height\", h);\n\tdelete this.bounds;\n};\n\nCell.prototype.canEdit = function() {\n\treturn (this.graph ? this.graph.canEdit() : true) && this.getProperty(\"editable\");\n};\n\nCell.prototype.canSelect = function() {\n\treturn (this.graph ? this.graph.canSelect() : true) && this.getProperty(\"selectable\");\n};\n\nCell.prototype.canMove = function() {\n\treturn (this.graph ? this.graph.canEdit() : true) && this.getProperty(\"draggable\");\n};\n\nCell.prototype.canResize = function() {\n\treturn (this.graph ? this.graph.canEdit() : true) && this.getProperty(\"resizable\");\n};\n\nCell.prototype.getTypeFromString = function(typeStr) {\n\treturn this.graph.getType(typeStr);\n};\n\nCell.prototype.createModifiers = function(modifiers) {\n\tthis.modifiers = null;\n\tvar modifierSettings = this.getProperty(\"modifierSettings\");\n\tif (modifierSettings) {\n\t\t_.each(modifiers, function(config) {\n\t\t\tconfig.type = this.graph.getModifierType(config.className);\n\t\t\tconfig.setting = modifierSettings[config.className];\n\t\t\tif (!config.type || !config.setting) return;\n\n\t\t\tthis.addModifier(config.className, new Modifier(this, config));\n\t\t}, this);\n\n\t\t// Check for showAlways settings\n\t\t_.each(modifierSettings, function(setting, name) {\n\t\t\tif (setting.showAlways && (!this.modifiers || !this.modifiers[name])) {\n\t\t\t\tvar config = {type: this.graph.getModifierType(name), setting: setting};\n\t\t\t\tif (!config.type) return;\n\t\t\t\tthis.addModifier(name, new Modifier(this, config));\n\t\t\t}\n\t\t}, this);\n\t}\n};\n\nCell.prototype.addModifier = function(name, modifier) {\n\tif (!this.modifiers)\n\t\tthis.modifiers = {};\n\n\tif (!modifier.hasOwnProperty(\"showHeader\"))\n\t\tmodifier.showHeader = true;\n\n\t// @hack preferably set it in configurations.\n\tif (modifier.name == \"HoverProcessModifier\" || modifier.name == \"HoverResults\")\n\t\tmodifier.showHeader = false;\n\n\tthis.modifiers[name] = modifier;\n};\n\nCell.prototype.getModifiers = function() {\n\tif (_.isUndefined(this.modifiers))\n\t\tthis.createModifiers();\n\treturn this.modifiers;\n};\n\nCell.prototype.getModifier = function(name) {\n\tvar modifiers = this.getModifiers();\n\tif (modifiers)\n\t\treturn modifiers[name];\n\treturn null;\n};\n\nCell.prototype.isVisible = function() {\n\treturn this.getProperty('visible');\n};\n\nCell.prototype.isContainer = function() {\n\treturn false;\n};\n*/\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/graph/Element.js\n **/","/**\n * Created by tong on 6/7/2016.\n */\n\nlet caches = {};\n\nlet Cache = {\n\tget: function(key, namespace) {\n\t\treturn this.getCache(namespace)[key];\n\t},\n\n\tset: function(key, value, namespace) {\n\t\tthis.getCache(namespace)[key] = value;\n\t},\n\n\tcontains: function(key, namespace) {\n\t\treturn key in this.getCache(namespace);\n\t},\n\n\tremove: function(key, namespace) {\n\t\tdelete this.getCache(namespace)[key];\n\t},\n\n\tclear: function(namesapce) {\n\t\tif (!namespace)\n\t\t\tcaches = {};\n\t\telse if (caches[namespace])\n\t\t\tcaches[namespace] = {};\n\t},\n\n\tgetCache: function(namespace = 'default') {\n\t\tif (!caches[namespace])\n\t\t\tcaches[namespace] = {};\n\t\treturn caches[namespace];\n\t}\n};\n\nexport default Cache;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/util/Cache.js\n **/","import _ from \"lodash\";\nimport Events from \"bean\";\nimport Utils from \"../util/Utils\";\nimport DomUtils from \"../util/DomUtils\";\nimport StringBuffer from \"../util/StringBuffer\";\nimport Rectangle from \"../geometry/Rectangle\";\n\nconst FONT_BOLD = 1, FONT_ITALIC = 2, FONT_UNDERLINE = 4, FONT_SHADOW = 8;\nconst SVG_TEMPLATE_STR = `\n<% var box = _.has(data, \"dx\") ? data : (data.getLabelBox ? data.getLabelBox() : null); \n   if (box) {%>\n\t<g <% if (box.config && box.config.class) {%>class=\"<%=box.config.class%>\"<%}%>\\\n\t\t<% if (box.config && box.config.ns) {%>ns=\"<%=box.config.ns%>\"<%}%>\\\n\t\ttext-anchor=\"<%=box.anchor%>\"\\\n\t\ttransform=\"translate(<%=box.bounds.x%>,<%=box.bounds.y%>)\">\n\t<% if (box.backgroundColor) {%>\n\t\t<rect x=\"<%=-box.bounds.width/2%>\" y=\"<%=-box.bounds.height/2%>\" width=\"<%=box.bounds.width%>\" height=\"<%=box.bounds.height%>\" fill=\"<%=box.backgroundColor%>\"/>\n\t<% } if (_.isArray(box.label)) { \n\t\t_.each(box.label, function(value, line) {%>\n\t\t\t<text <% if (box.config && box.config.textStyle) {%>style=\"<%=box.config.textStyle%>\"<%}%>\\\n\t\t\t\tdx=\"<%=box.dx%>\" dy=\"<%=box.dy + box.lineHeight * line%>\"><%=value%></text>\n\t\t<%});} else { %>\n\t\t\t<text><%=box.label%></text>\n\t\t<%}%>\n\t</g>\n<%}%>`.trim();\nconst SVG_TEMPLATE = _.template(SVG_TEMPLATE_STR, {variable: \"data\"});\n\nlet defaultConfig = {\n\tfontSize: 11,\n\tfontFamily: \"Arial\",\n\tfontStyle: 0,\n\tpadding: 0,\n\tlinePadding: 0,\n\talign: \"left\",\n\twidth: 0,\n\theight: 0,\n\tgeometry: {x: 0, y: 0, anchorY: 0, offsetX: 0, offsetY: 0}\n};\n\n/**\n * The label object handles label sizing/positioning\n */\nexport default (function() {\n\tlet canvasSupported = false, stringMeasureEl = null;\n\n\t/**\n\t * Calculate the size of the string.\n\t */\n\tlet getStringSize = _.memoize(function(str, fontSize, fontFamily, bold) {\n\t\tif (!str || str == \"\")\n\t\t\treturn [0, 0];\n\n\t\tfontSize = fontSize || 11;\n\t\tfontFamily = fontFamily || 'Arial,Helvetica';\n\t\tbold = !_.isUndefined(bold) ? bold: false;\n\n\t\tvar size;\n\n\t\tif (_.isNull(canvasSupported)) {\n\t\t\tstringMeasureEl = DomUtils.createElement('canvas');\n\t\t\tcanvasSupported = !!(stringMeasureEl.getContext && stringMeasureEl.getContext('2d'));\n\t\t}\n\n\t\tif (canvasSupported) {\n\t\t\tUtils.log('Label', 'using canvas');\n\t\t\tvar ctx = stringMeasureEl.getContext(\"2d\");\n\t\t\tctx.font = fontSize + \" \" + fontFamily + \" \" + (bold ? \"bold\" : \"normal\");\n\t\t\tvar measure = ctx.measureText(str);\n\t\t\tsize = [measure.width, 10];\n\t\t} else {\n\t\t\t// first check if there is a string-measuring div available, if not, create now.\n\t\t\tif (!stringMeasureEl) {\n\t\t\t\tstringMeasureEl = DomUtils.createElement('iframe', {id:\"_ComputeStylesIframe\"}, {position:\"absolute\", visibility:\"hidden\", display:\"none\", width:\"auto\"});\n\t\t\t\tdocument.body.appendChild(stringMeasureEl);\n\t\t\t\tvar doc = stringMeasureEl.contentWindow.document;\n\t\t\t\tdoc.open();\n\t\t\t\tdoc.write('<html><body><div id=\"sizeMeasuringDiv\" style=\"position:absolute;width:auto;height:auto;white-space:pre-wrap;word-wrap:break-word;display:inline-block;\"></div></body></html>');\n\t\t\t\tdoc.close();\n\t\t\t}\n\t\t\tstringMeasureEl.style.display = \"\";\n\t\t\tvar div = stringMeasureEl.contentWindow.document.getElementById(\"sizeMeasuringDiv\");\n\t\t\tdiv.style.fontSize = fontSize;\n\t\t\tdiv.style.fontFamily = fontFamily;\n\t\t\tdiv.style.fontWeight = bold ? 'bold' : 'normal';\n\t\t\tdiv.style.padding = 0;\n\t\t\tdiv.style.width = \"auto\";\n\t\t\tdiv.innerHTML = str;\n\n\t\t\tsize = [div.offsetWidth, div.offsetHeight];\n\t\t\tstringMeasureEl.style.display = \"none\";\n\t\t}\n\t\treturn size;\n\t}, function(str, fontSize, fontFamily, bold) { return str + ';' + fontSize + ';' + fontFamily + ';' + bold; });\n\n\t/**\n\t * Create a wrapped text.\n\t * @param {String} string the string to wrap.\n\t * @param {maxWidth} the maximum width this string can take.\n\t * @param {fontSize}\n\t * @param {fontFamily}\n\t * @param {bold}\n\t */\n\tlet wrap = _.memoize(function(string, maxWidth, fontSize, fontFamily, bold) {\n\t\tmaxWidth = maxWidth || 0;\n\t\tfontSize = fontSize || 11;\n\t\tfontFamily = fontFamily || 'Arial,Helvetica';\n\t\tbold = !_.isUndefined(bold) ? bold: false;\n\n\t\tvar arr = [];\n\t\tvar spaceSize = getStringSize(\"&nbsp;\", fontSize, fontFamily, bold), space = spaceSize[0];\n\t\tarr.lineHeight = spaceSize[1];\n\n\t\tif (!maxWidth || !string || string == \"\") {\n\t\t\tarr.push(string);\n\t\t\tarr.width = (!string || string == \"\") ? space : getStringSize(string, fontSize, fontFamily, bold)[0];\n\t\t\tarr.height = arr.lineHeight;\n\t\t\treturn arr;\n\t\t}\n\n\t\tvar width = 0;\n\t\t//split the text by lines\n\t\tvar lines = string.split(/[\\r\\n|\\n|\\r]/);\n\n\t\tvar buf = new StringBuffer();\n\n\t\tfor (var j = 0; j < lines.length; j++) {\n\t\t\t//split each line by word\n\t\t\tvar words = lines[j].split(/[\\s]/);\n\t\t\tvar line = \"\", currentWidth = 0, wordWidth = 0, newLine = true, word;\n\n\t\t\tfor (var i = 0; i < words.length; i++) {\n\t\t\t\tword = words[i];\n\t\t\t\twordWidth = getStringSize(word, fontSize, fontFamily, bold)[0];\n\n\t\t\t\tif ((newLine ? wordWidth : currentWidth + space + wordWidth) > maxWidth) {\n\t\t\t\t\tif (newLine) {\n\t\t\t\t\t\tbuf.append(word);\n\t\t\t\t\t\twidth = Math.max(width, wordWidth);\n\t\t\t\t\t\tif (i < words.length - 1) {\n\t\t\t\t\t\t\tarr.push(buf.toString());\n\t\t\t\t\t\t\tbuf.clear();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tarr.push(buf.append(line).toString());\n\t\t\t\t\t\twidth = Math.max(width, currentWidth + space + wordWidth);\n\t\t\t\t\t\tbuf.clear();\n\t\t\t\t\t}\n\t\t\t\t\tline = \"\";\n\t\t\t\t\tcurrentWidth = 0;\n\t\t\t\t\tif (!newLine)\n\t\t\t\t\t\ti--; // move back one word.\n\t\t\t\t\tnewLine = true;\n\t\t\t\t} else {\n\t\t\t\t\tline = newLine ? word : line + \" \" + word;\n\t\t\t\t\tcurrentWidth = newLine ? wordWidth : currentWidth + space + wordWidth;\n\t\t\t\t\twidth = Math.max(width, currentWidth);\n\t\t\t\t\tnewLine = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (line != \"\")\n\t\t\t\tbuf.append(line);\n\t\t\tif (j < lines.length - 1) {\n\t\t\t\tarr.push(buf.toString());\n\t\t\t\tbuf.clear();\n\t\t\t}\n\t\t}\n\n\t\tarr.push(buf.toString());\n\t\tarr.width = width;\n\t\tarr.height = arr.lineHeight * arr.length;\n\t\treturn arr;\n\t}, function(str, maxWidth, fontSize, fontFamily, bold) { return str + ';' + maxWidth + ';' + fontSize + ';' + fontFamily + ';' + bold; });\n\n\t/**\n\t *  Get the view information for how to display the label.\n\t * @param label The string that needs to be displayed\n\t * @param containerWidth The width of the parent container.\n\t * @param containerHeight The height of the parent container.\n\t * @param labelConfig The configuration on how to display label. It should be an object with the following parameters:\n\t * {\n\t *      fontSize, fontFamily, fontStyle, padding,\n\t *      align: can be either \"left\", \"center\" or \"right\",\n\t *      width: the maximum width of the label. if less than 1, then is treated as percentage. If 0, no wrapping will occur,\n\t *      height,\n\t *      geometry\n\t * }\n\t * @returns {*}\n\t */\n\tfunction getLabelBox(label, containerWidth, containerHeight, labelConfig) {\n\t\tlabelConfig = _.defaultsDeep(labelConfig, defaultConfig);\n\t\tlet fontSize = labelConfig.fontSize;\n\t\tlet fontFamily = labelConfig.fontFamily;\n\t\tlet fontStyle = labelConfig.fontStyle;\n\t\tlet bold = (fontStyle & FONT_BOLD) == FONT_BOLD;\n\t\tlet padding = labelConfig.padding;\n\t\tlet linePadding = labelConfig.linePadding;\n\t\tlet align = labelConfig.align;\n\n\t\tlet w = labelConfig.width, h = labelConfig.height;\n\t\tw = w <= 5 ? containerWidth * w : w;\n\t\th = h <= 5 ? containerHeight * h : h;\n\t\tw -= 2 * padding;\n\t\th -= 2 * padding;\n\t\tw = Math.max(0, w);\n\t\th = Math.max(0, h);\n\n\t\tlet geometry = _.clone(labelConfig.geometry);\n\t\tlet wrappedLabel = this.wrap(label, w, fontSize, fontFamily, bold);\n\t\tgeometry.width = wrappedLabel.width + 2 * padding;\n\t\tgeometry.height = wrappedLabel.height + 2 * padding + (wrappedLabel.length - 1) * linePadding;\n\t\tlet anchor = \"start\", dx = 0, setAnchorX = !_.has(geometry, \"anchorX\");\n\t\tswitch (align) {\n\t\t\tcase \"center\":\n\t\t\t\tanchor = \"middle\";\n\t\t\t\tif (setAnchorX) geometry.anchorX = 0;\n\t\t\t\tbreak;\n\t\t\tcase \"right\":\n\t\t\t\tanchor = \"end\";\n\t\t\t\tdx = wrappedLabel.width/2;\n\t\t\t\tif (setAnchorX) geometry.anchorX = -0.5;\n\t\t\t\tbreak;\n\t\t\tcase \"left\":\n\t\t\t\tdx = -wrappedLabel.width/2;\n\t\t\t\tif (setAnchorX) geometry.anchorX = 0.5;\n\t\t\t\tbreak;\n\t\t}\n\t\tlet pos = Utils.getRelativePosition({width: containerWidth, height: containerHeight}, geometry);\n\t\tlet bounds = new Rectangle(pos[0], pos[1], geometry.width, geometry.height);\n\n\t\t// the maximum bounds for the label, used to position inline editor\n\t\tgeometry.width = Math.max(w + 2 * padding, geometry.width);\n\t\tgeometry.height = Math.max(h + 2 * padding, geometry.height);\n\t\tpos = Utils.getRelativePosition({width: containerWidth, height: containerHeight}, geometry);\n\t\tlet maxBounds = new Rectangle(pos[0], pos[1], geometry.width, geometry.height);\n\n\t\treturn {\n\t\t\tconfig: labelConfig, label: wrappedLabel, _label: label,\n\t\t\tdx, dy: -geometry.height/2 + padding + wrappedLabel.lineHeight, anchor, lineHeight: wrappedLabel.lineHeight + linePadding,\n\t\t\tbounds, maxBounds\n\t\t};\n\t}\n\n\tfunction getLabelBoxForEdge(label, edge, labelConfig) {\n\t\tlabelConfig = _.defaultsDeep(labelConfig, defaultConfig);\n\t\tif (!label || label == \"\") return null;\n\n\t\tlet fontSize = labelConfig.fontSize;\n\t\tlet fontFamily = labelConfig.fontFamily;\n\t\tlet fontStyle = labelConfig.fontStyle;\n\t\tlet bold = (fontStyle & FONT_BOLD) == FONT_BOLD;\n\n\t\tlet wrappedLabel = this.wrap(label, labelConfig.width, fontSize, fontFamily, bold);\n\t\tlet pos = edge.getRelativePosition({x: labelConfig.labelLocation/2, offsetX: labelConfig.labelOffsetX || 0, offsetY: labelConfig.labelOffsetY || 0});\n\n\t\tlet anchor = \"start\", dx;\n\t\tswitch (labelConfig.align) {\n\t\t\tcase \"center\":\n\t\t\t\tanchor = \"middle\";\n\t\t\t\tbreak;\n\t\t\tcase \"right\":\n\t\t\t\tanchor = \"end\";\n\t\t\t\tdx = wrappedLabel.width/2;\n\t\t\t\tbreak;\n\t\t\tcase \"left\":\n\t\t\tdefault:\n\t\t\t\tdx = -wrappedLabel.width/2;\n\t\t\t\tbreak;\n\t\t}\n\t\treturn {\n\t\t\tconfig: labelConfig, label: wrappedLabel, _label: label,\n\t\t\tdx: dx, dy: -wrappedLabel.height/2 + wrappedLabel.lineHeight,\n\t\t\tanchor: anchor, lineHeight: wrappedLabel.lineHeight,\n\t\t\tbounds: new Rectangle(pos[0], pos[1], wrappedLabel.width, wrappedLabel.height)\n\t\t};\n\t}\n\n\tlet editor = {\n\t\tvisible: function() { return this.input && this.input.style.visibility == 'visible'; },\n\n\t\tstart: function(key, container, box, refEl, textEl) {\n\t\t\tif (!this.input) {\n\t\t\t\tthis.input = DomUtils.createElement('textarea', {id:\"inlineEditor\", unselectable:\"off\"}, {position:\"absolute\", overflow:\"hidden\", padding:\"0px\", margin:\"0px\", border:\"transparent\"}),\n\t\t\t\tcontainer.appendChild(this.input);\n\t\t\t} else if (this.visible() && this.key != key) {\n\t\t\t\t// need to close the existing editor first\n\t\t\t\tthis.stop();\n\t\t\t}\n\t\t\tthis.key = key;\n\t\t\tthis.box = box;\n\t\t\tthis.refEl = refEl;\n\t\t\tthis.textEl = textEl;\n\n\t\t\tlet labelConfig = box.config;\n\t\t\t//let pos = Utils.unscale(graph, [cell.getBounds().getCenterX() + bounds.x, cell.getBounds().getCenterY() + bounds.y + 5]);\n\t\t\tlet pos = DomUtils.getCenterPosition(refEl, container);\n\t\t\tpos = [pos[0] + box.maxBounds.left, pos[1] + box.maxBounds.top];\n\t\t\tlet scale = 1.0;\n\n\t\t\tif (textEl)\n\t\t\t\ttextEl.style.visibility = 'hidden';\n\n\t\t\tDomUtils.setElement(this.input, null, {\n\t\t\t\tvisibility: 'visible',\n\t\t\t\tleft: pos[0] + \"px\",\n\t\t\t\ttop: pos[1] + \"px\",\n\t\t\t\twidth: (box.maxBounds.width * scale) + 'px',\n\t\t\t\theight: (box.maxBounds.height * scale) + 'px',\n\t\t\t\t\"font-family\": labelConfig.fontFamily,\n\t\t\t\t\"font-size\": (labelConfig.fontSize * scale) + 'px',\n\t\t\t\t\"font-weight\": (labelConfig.fontStyle & FONT_BOLD) == FONT_BOLD ? 'bold' : 'normal'\n\t\t\t\t/*\"color\": labelConfig.fontColor*/\n\t\t\t});\n\n\t\t\tthis.input.value = box._label;\n\t\t\tthis.input.focus();\n\t\t\tthis.input.select();\n\t\t\tEvents.fire(this, 'editor.start', [this.key]);\n\t\t},\n\n\t\tstop: function(cancel) {\n\t\t\tif (!this.visible()) return;\n\n\t\t\tcancel = cancel || false;\n\t\t\tif (this.textEl)\n\t\t\t\tthis.textEl.style.visibility = null;\n\n\t\t\tthis.input.style.visibility = 'hidden';\n\t\t\tif (!cancel)\n\t\t\t\tEvents.fire(this, 'editor.update', [this.key, this.input.value]);\n\n\t\t\tEvents.fire(this, 'editor.stop', [this.key]);\n\t\t\tdelete this.key;\n\t\t\tdelete this.box;\n\t\t\tdelete this.refEl;\n\t\t\tdelete this.textEl;\n\t\t}\n\t};\n\n\treturn {\n\t\tFONT_BOLD,\n\t\tFONT_ITALIC,\n\t\tFONT_UNDERLINE,\n\t\tFONT_SHADOW,\n\t\tSVG_TEMPLATE_STR,\n\t\tSVG_TEMPLATE,\n\t\tgetStringSize,\n\t\twrap,\n\t\tgetLabelBox,\n\t\tgetLabelBoxForEdge,\n\t\teditor\n\t};\n})();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/view/Label.js\n **/","import _ from \"lodash\";\nimport Element from \"./Element\";\nimport Label from \"../view/Label\";\n\nclass Edge extends Element {\n\tconstructor(graph, config = {}, source, target) {\n\t\tif (!config.id) config.id = _.uniqueId('E');\n\t\tsuper(graph, config);\n\n\t\tthis.source = this.target = null;\n\t\tthis.setSource(source, config.sourcePos);\n\t\tthis.setTarget(target, config.targetPos);\n\t}\n\n\tsetSource(node, pos) {\n\t\tthis.setTerminal(node, pos, 'source');\n\t}\n\n\tsetTarget(node, pos) {\n\t\tthis.setTerminal(node, pos, 'target');\n\t}\n\n\t/**\n\t * Internal methods to set either the source or target\n\t */\n\t setTerminal(node, pos, dir) {\n\t\tvar end = dir == 'source' ? this.source : this.target;\n\t\tif (end == node) {\n\t\t\t// simply change the position of the edge.\n\t\t\tif (node)\n\t\t\t\tnode.setEdgeAt(this, pos);\n\t\t} else {\n\t\t\tif (end) {\n\t\t\t\t// first remove the edge from the current end\n\t\t\t\tend.removeEdge(this);\n\t\t\t}\n\n\t\t\tif (node) {\n\t\t\t\tif (dir == 'source')\n\t\t\t\t\tnode.addOutEdge(this, pos);\n\t\t\t\telse\n\t\t\t\t\tnode.addInEdge(this, pos);\n\t\t\t}\n\t\t\tif (dir == 'source')\n\t\t\t\tthis.source = node;\n\t\t\telse\n\t\t\t\tthis.target = node;\n\t\t\tthis.clearPoints();\n\t\t}\n\t}\n\n\t/*getView(key) {\n\n\t}*/\n\n\tgetLabelBox(key) {\n\t\treturn Label.getLabelBoxForEdge(this.prop('label'), this.getView(key), this.viewProp(key, 'labelConfig'));\n\t}\n\n\tgetPoints() {\n\t\t/*if (this.graph.eventDispatcher.dragging) {\n\t\t\tthis.clearPoints();\n\t\t\treturn [Anchor.getStartPoint(this), Anchor.getEndPoint(this)];\n\t\t}*/\n\n\t\tif (!this.points || this.points.length == 0) {\n\t\t\tdelete this.length;\n\t\t\tthis.points = EdgeStyle.getPoints(this);\n\t\t}\n\n\t\treturn this.points;\n\t}\n\n\t/**\n\t * Return the total length of this connection, in pixels.\n\t */\n\tgetLength() {\n\t\tif (!_.isUndefined(this.length)) return this.length;\n\n\t\tvar points = this.getPoints();\n\t\tvar i, l = 0;\n\t\tfor (i = 0; i < points.length - 1; i++)\n\t\t\tl += points[i].distance(points[i+1]);\n\t\treturn this.length = l;\n\t}\n\n\tclearPoints() {\n\t\tdelete this.points;\n\t\tdelete this.length;\n\t}\n\n\t/**\n\t * Return a pair of points as reference to the calculation of start and end points.\n\t */\n\tgetReferencePoints() {\n\t\tvar pts = [];\n\t\tvar refPts = this.prop('refPts');\n\t\tif (this.source)\n\t\t\tpts.push(this.source.getBounds().getCenter());\n\t\telse\n\t\t\tpts.push(refPts[0]);\n\n\t\tif (this.target)\n\t\t\tpts.push(this.target.getBounds().getCenter());\n\t\telse\n\t\t\tpts.push(refPts[1]);\n\t\treturn pts;\n\t}\n\n\t /**\n\t * Calculate the position where to put modifiers or label..\n\t *\n\t * @param geometry: defines how far along the edge should the point be placed.\n\t * @return the relative position.\n\t */\n\t getRelativePosition(geometry) {\n\t\tvar p = geometry.x, l = this.getLength();\n\t\tif (_.isString(p)) {\n\t\t\tif (/%$/.test(p)) {\n\t\t\t\tp = s(p).strLeft('%').toNumber() / 100;\n\t\t\t} else if (/px$/.test(p)) {\n\t\t\t\tp = s(p).strLeft('px').toNumber();\n\t\t\t}\n\t\t}\n\t\tif (p >= -1 && p <= 1) p *= l;\n\t\tif (p < 0) p = l + p;\n\t\tif (p > l) p = l;\n\n\t\tvar points = this.getPoints(), d, point, dir;\n\t\tfor (var i = 0; i < points.length - 1; i++) {\n\t\t\td = points[i].distance(points[i+1]);\n\t\t\tif (p <= d) {\n\t\t\t\t// we've located the line segment.\n\t\t\t\tpoint = points[i].clone();\n\t\t\t\tdir = point.getDirection(points[i+1]);\n\t\t\t\tpoint.translate(dir.getScaled(p));\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tp -= d;\n\t\t}\n\n\t\t// return the last point.\n\t\tif (!point)\n\t\t\tpoint = points[points.length - 1];\n\t\treturn [point.x + geometry.offsetX, point.y + geometry.offsetY];\n\t}\n\n\ttoString() {\n\t\treturn 'Edge:{' + (_.isNull(this.source) ? 'null' : this.source.id) + '--' + (_.isNull(this.target) ? 'null' : this.target.id) + '}';\n\t}\n\n\tdestroy() {\n\t\tsuper.destroy();\n\t\tthis.setSource(null);\n\t\tthis.setTarget(null);\n\t}\n}\nEdge.namespace = \"Edges\";\n\nexport default Edge;\n\n/*\n\nEdge.prototype.isVisible = function() {\n\tif (this.graph.getProperty(\"allowDanglingEdges\")) {\n\t\treturn (this.source ? this.source.isVisible() : true) && (this.target ? this.target.isVisible() : true) && this.getProperty(\"visible\");\n\t} else\n\t\treturn this.source && this.target && this.getProperty('visible') && this.source.isVisible() && this.target.isVisible();\n};\n\n*/\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/graph/Edge.js\n **/","import _ from \"lodash\";\nimport Utils from \"../util/Utils\";\n\nclass Layout {\n\tconstructor(config={}) {\n\t\tif (config.hasOwnProperty(\"orientation\") && _.isString(config.orientation)) {\n\t\t\tif (config.orientation.toUpperCase() == \"HORIZONTAL\")\n\t\t\t\tconfig.orientation = Layout.HORIZONTAL;\n\t\t\telse\n\t\t\t\tdelete config.orientation;\n\t\t}\n\t\tUtils.initConfig(this, config);\n\t}\n\n\tlayout(root, bounds) {}\n\treset() {}\n\tdestroy() {}\n}\nLayout.VERTICAL = 0;\nLayout.HORIZONTAL = 1;\n\nLayout.DEFAULTS = {\n\torientation: Layout.VERTICAL\n};\n\nexport default Layout;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/layout/Layout.js\n **/","import Layout from \"./Layout\";\nimport Events from \"bean\";\n\nclass FlowLayout extends Layout {\n\tlayout(root, bounds) {\n\t\tvar items;\n\t\tif (!root)\n\t\t\titems = this.owner.childNodes;\n\t\telse if (_.isArray(root))\n\t\t\titems = root;\n\t\telse\n\t\t\titems = root.getLinkedNodes('target');\n\t\tif (!items || items.length == 0) return;\n\n\t\tvar x = 0, y = 0, h = 0, node;\n\t\tvar p1 = 0, p2 = 0;\n\t\tfor (var i = 0; i < items.length; i++) {\n\t\t\tnode = items[i];\n\t\t\tif (x > 0 && x + this.hgap + node.getProperty(\"width\") > bounds.width) {\n\t\t\t\t// create new line\n\t\t\t\ty += h + this.vgap;\n\t\t\t\tx = 0;h = 0;p1 = 0;p2++;\n\t\t\t}\n\t\t\tnode._flPos = [p1, p2];\n\t\t\tnode.moveTo([bounds.x + x, bounds.y + y]);\n\t\t\tx += this.hgap + node.getProperty(\"width\");\n\t\t\tp1++;\n\t\t\th = h < node.getProperty(\"height\") ? node.getProperty(\"height\") : h;\n\t\t}\n\t\tthis.trigger(new Rectangle(bounds.x, bounds.y, bounds.width, y + h));\n\t}\n}\n\nFlowLayout.DEFAULTS = {\n\thgap: 10,\n\tvgap: 10\n};\n\nexport default FlowLayout;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/layout/FlowLayout.js\n **/","import _ from \"lodash\";\nimport Events from \"bean\";\nimport Utils from \"../util/Utils\";\nimport DomUtils from \"../util/DomUtils\";\nimport Layout from \"../layout/Layout\";\nimport Rectangle from \"../geometry/Rectangle\";\nimport EventDispatcher from \"../event/EventDispatcher\";\nimport Label from \"./Label\";\n\nclass GraphView {\n\tconstructor(id, container, config = {}) {\n\t\tthis.id = id;\n\t\tthis.box = DomUtils.createElement('div', {id:this.id, tabindex:0}, {overflow: \"hidden\", width: \"100%\", height: \"100%\", position: 'relative'});\n\t\tcontainer.appendChild(this.box);\n\t\tif (config.layout) {\n\t\t\tlet layoutClass = Utils.getConstructor(config.layout.jsClass, Layout);\n\t\t\tthis.layout = new layoutClass(config.layout.config);\n\t\t\tdelete config.layout;\n\t\t}\n\t\tthis.clear = true;\n\t\tthis._graph = null;\n\t\tthis.dispatcher = null;\n\t\tUtils.initConfig(this, config);\n\n\t\t// A object for storing template strings.\n\t\tthis.templateStore = {};\n\t\tEvents.on(Label.editor, 'editor.update.*', function(key, value) {\n\t\t\tconsole.log(key + '=' + value);\n\t\t});\n\t}\n\n\tgraph(graph) {\n\t\tif (graph) {\n\t\t\tthis._graph = graph;\n\t\t\treturn this;\n\t\t}\n\t\treturn this._graph;\n\t}\n\n\tviewport(scaled, viewport) {\n\t\tif (_.isUndefined(scaled) || _.isNull(scaled)) scaled = false;\n\t\tif (!viewport) {\n\t\t\tvar vp = new Rectangle(0, 0, this.box.offsetWidth, this.box.offsetHeight);\n\t\t\tif (scaled)\n\t\t\t\treturn Utils.scale(this, vp);\n\t\t\treturn vp;\n\t\t}\n\t\tif (!scaled) viewport = Utils.scale(this, viewport);\n\t\tvar w = this.box.offsetWidth;\n\t\tvar scale = w / viewport.width;\n\t\tthis.transform(-viewport.x*scale, -viewport.y*scale, scale);\n\t}\n\n\ttranslate(t) {\n\t\tif (!this._graph) return [0, 0];\n\t\tif (!arguments.length) {\n\t\t\tvar root = this._graph.getCurrentRoot();\n\t\t\tif (!root)\n\t\t\t\treturn [0, 0];\n\t\t\treturn [root.viewProp(this.id, 'x') || 0, root.viewProp(this.id, 'y') || 0];\n\t\t}\n\t\tthis.transform(t[0], t[1]);\n\t}\n\n\tscale(k) {\n\t\tif (!this._graph) return 1.0;\n\t\tif (!arguments.length) {\n\t\t\tvar root = this._graph.getCurrentRoot();\n\t\t\tif (!root) return 1.0;\n\n\t\t\treturn root.viewProp(this.id, 'scale') || 1.0;\n\t\t}\n\n\t\tswitch (k) {\n\t\t\tcase \"in\":\n\t\t\t\tk = this.scale() * this.prop(\"zoomFactor\");\n\t\t\t\tbreak;\n\t\t\tcase \"out\":\n\t\t\t\tk = this.scale() / this.prop(\"zoomFactor\");\n\t\t\t\tbreak;\n\t\t\tcase \"actual\":\n\t\t\t\tk = 1.0;\n\t\t\t\tbreak;\n\t\t\tcase \"fit\":\n\t\t\t\tvar gridSize = this.prop(\"gridSize\") * 2;\n\n\t\t\t\tvar gBounds = this.getBounds();\n\t\t\t\tvar vBounds = this.viewport();\n\n\t\t\t\tvBounds.width -= gridSize;\n\t\t\t\tvBounds.height -= gridSize;\n\n\t\t\t\t/* Do not zoom more than actual if graph already fits into the bounds */\n\t\t\t\tk = Math.min((vBounds.width / gBounds.width), (vBounds.height /gBounds.height), 1.0);\n\n\t\t\t\t//TODO: Add centering code here or trigger an event for that\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tif (_.isString(k)) k = parseFloat(k);\n\t\t\t\tbreak;\n\t\t}\n\t\tthis.transform(null, null, k);\n\t}\n\n\ttransform(x, y, scale) {\n\t\tif (!this._graph) return;\n\t\tvar root = this._graph.getCurrentRoot();\n\t\tif (!root) return;\n\n\t\t/*if (!_.isNull(x) && !_.isNull(y))\n\t\t\troot.move(x, y);\n\t\tif (scale) {\n\t\t\tscale = Math.max(this.getProperty(\"minZoom\"), Math.min(this.getProperty(\"maxZoom\"), scale));\n\t\t\troot.setProperty('scale', scale);\n\t\t\t// sync the scale between the zoom behavior and the graph\n\t\t\tvar zoom = this.eventDispatcher.zoom;\n\t\t\tif (zoom.scale() != scale)\n\t\t\t\tzoom.scale(scale);\n\t\t}\n\n\t\tthis.trigger(Graph.EVENT_TYPES.REFRESH);*/\n\t}\n\n\trender() {\n\t\tif (!this._graph) return false;\n\t\t// intialize views\n\t\tif (this.layout)\n\t\t\tthis.layout.layout(this._graph.getCurrentRoot(), this.viewport());\n\n\t\t// create the event dispatcher if necessary.\n\t\tif (!this.dispatcher) {\n\t\t\tthis.dispatcher = new EventDispatcher(this.box);\n\t\t\tthis.dispatcher.register('mouseup.node.label', function(type, ns, target, pos, event) {\n\t\t\t\tlet node = this._graph.nodes[target.getAttribute('id')];\n\t\t\t\tif (!this.dispatcher.dragging && !node._firstSelection) {\n\t\t\t\t\tLabel._delayEdit = _.delay(() => {\n\t\t\t\t\t\tif (Label._delayEdit) {\n\t\t\t\t\t\t\tdelete Label._delayEdit;\n\t\t\t\t\t\t\tLabel.editor.start(node.id, this.box, node.getLabelBox(this.id), target, event.nsTarget);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 250);\n\t\t\t\t}\n\t\t\t}, this);\n\t\t\tthis.dispatcher.register(['mousedown.*', 'zoom*'], function(type, ns, target, pos, event) {\n\t\t\t\tif (!DomUtils.eventFromInput(event)) {\n\t\t\t\t\tLabel.editor.stop();\n\t\t\t\t}\n\t\t\t}, this);\n\t\t}\n\t\tthis.dispatcher.start();\n\t\treturn true;\n\t}\n\n\t/**\n\t * Get the template for the specified key.\n\t * @param key\n\t * @param config if the template is a function, this config will be passed as the argument.\n\t * @param preprocessor if the template contains preprossing elements, such as #{shape}, the preprocessor will be\n\t * used to render them.\n\t * @returns {*}\n\t */\n\tgetTemplate(key, config, preprocessor) {\n\t\tvar t = this.templateStore[key];\n\t\tif (t && _.isFunction(t)) {\n\t\t\tt = t(config);\n\t\t}\n\t\t// check if there are any preprocessing tags.\n\t\tif (preprocessor) {\n\t\t\tvar parts = t.match(/(#{[^#]*})/g);\n\t\t\tvar obj = {};\n\t\t\tfor (let part of parts) {\n\t\t\t\tpart = part.substring(2, part.length -1).trim();\n\t\t\t\tobj[part] = preprocessor[_.camelCase('render ' + part)](this);\n\t\t\t}\n\t\t\tt = _.template(t, {interpolate: /#{([\\s\\S]+?)}/g})(obj);\n\t\t}\n\t\treturn t;\n\t}\n\n\treset() {}\n\tdestroy() {}\n}\nGraphView.DEFAULTS = {\n\tdefaultClickMode: \"pan\",\n\thideOutline: false,\n\tsingleSelect: true,\n\tdraggable: true,\n\tgridEnabled: false,\n\tguidesEnabled: true,\n\tgridSize: 30,\n\tmaxZoom: 4.0,\n\tminZoom: 0.1,\n\tzoomFactor: 1.2,\n\tmaskOpacity: 0.5\n};\n\nexport default GraphView;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/view/GraphView.js\n **/","import GraphView from \"./GraphView\";\nimport StringBuffer from \"../util/StringBuffer\";\n\nconst TEMPLATES = {\n\t$root: '<g id=\"${id}\" class=\"${className}\" ns=\"graph\" transform=\"translate(${x},${y})scale(${scale})\">#{children}</g>',\n\t$node: '<g id=\"${id}\" class=\"${className}\" ns=\"${namespace}\" transform=\"translate(${x},${y})\">#{shape}#{label}</g>',\n\t$edge: '<g id=\"${id}\" class=\"${className}\" ns=\"${namespace}\">#{shape}</g>',\n\tEllipse: '<ellipse cx=\"0\" cy=\"0\" rx=\"${width/2}\" ry=\"${height/2}\"></ellipse>',\n\tRectangle: '<rect x=\"${-width/2}\" y=\"${-height/2}\" width=\"${width}\" height=\"${height}\" rx=\"9\" ry=\"9\"></rect>',\n\tTriangle: '<polygon points=\"${-width/2},${-height/2} ${width/2},${-height/2} 0,${height/2}\"></polygon>',\n\tRhombus: '<polygon points=\"0,${-height/2} ${width/2},0 0,${height/2} ${-width/2},0\"></polygon>',\n\thexagon: function(config) {\n\t\tvar vertical = config.direction == 'north' || config.direction == 'south';\n\t\tif (vertical)\n\t\t\treturn '<polygon points=\"0,${-height/2} ${width/2},${-height/4} ${width/2},${height/4} 0,${height/2} ${-width/2},${height/4} ${-width/2},${-height/4}\"></polygon>';\n\t\telse\n\t\t\treturn '<polygon points=\"${-width/2},0 ${width/4},${-height/2} ${width/4},${-height/2} ${width/2},0 ${width/4},${height/2} ${-width/4},${height/2}\"></polygon>';\n\t},\n\tpath: function(config) {\n\t\tvar buf = new StringBuffer();\n\t\tbuf.append('<path class=\"sleeper\" d=\"<%=gfw.SVGRenderer.getPathData(data.getPoints())%>\"></path>');\n\t\tbuf.append('<path d=\"<%=gfw.SVGRenderer.getPathData(data.getPoints())%>\"');\n\t\tif (config.startArrow != 'none' || config.endArrow != 'none') {\n\t\t\tbuf.append(' style=\"');\n\t\t\tif (config.startArrow != 'none')\n\t\t\t\tbuf.append('marker-start: url(#<%=data.type.name%>_StartArrow);');\n\t\t\tif (config.endArrow != 'none')\n\t\t\t\tbuf.append('marker-end: url(#<%=data.type.name%>_EndArrow);');\n\t\t\tbuf.append('\"');\n\t\t}\n\t\tbuf.append('></path>');\n\t\treturn buf.toString();\n\t},\n\timage: function(config) {\n\t\treturn '<image x=\"${-width/2}\" y=\"${-height/2}\" width=\"${width}\" height=\"${height}\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"' + config.image + '\"></image>';\n\t}\n};\n\nclass SVGView extends GraphView {\n\tconstructor(id, container, config) {\n\t\tsuper(id, container, config);\n\t\t_.assign(this.templateStore, TEMPLATES);\n\t}\n\n\trender() {\n\t\tlet result = super.render();\n\t\tif (result) {\n\t\t\tvar root = this._graph.getCurrentRoot();\n\t\t\tvar buf = new StringBuffer('<svg width=\"100%\" height=\"100%\">');\n\t\t\tbuf.append(root.render(this));\n\t\t\tbuf.append('</svg>');\n\t\t\tthis.box.innerHTML = buf.toString();\n\t\t}\n\t}\n}\n\nexport default SVGView;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/view/SVGView.js\n **/"],"sourceRoot":"/source/"}